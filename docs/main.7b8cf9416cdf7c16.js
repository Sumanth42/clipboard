"use strict";(self.webpackChunkneurolab_angular=self.webpackChunkneurolab_angular||[]).push([[179],{2011:(dt,Se,F)=>{F.d(Se,{Dh:()=>_e,GT:()=>he,cc:()=>xe,hO:()=>$e,on:()=>j,pX:()=>se,xv:()=>pe});var g=F(4650),J=F(9260),O=F(4976);dt=F.hmd(dt);const oe=["ngOnDestroy"],se=(ye,ut,gt,Oe={})=>new Proxy(ye,{get:(we,me)=>gt.runOutsideAngular(()=>{var Ge;if(ye[me])return!(null===(Ge=Oe?.spy)||void 0===Ge)&&Ge.get&&Oe.spy.get(me,ye[me]),ye[me];if(oe.indexOf(me)>-1)return()=>{};const Be=ut.toPromise().then(nt=>{const te=nt&&nt[me];return"function"==typeof te?te.bind(nt):te&&te.then?te.then(ne=>gt.run(()=>ne)):gt.run(()=>te)});return new Proxy(()=>{},{get:(nt,te)=>Be[te],apply:(nt,te,ne)=>Be.then(X=>{var fe;const ae=X&&X(...ne);return!(null===(fe=Oe?.spy)||void 0===fe)&&fe.apply&&Oe.spy.apply(me,ne,ae),ae})})})}),he=(ye,ut)=>{ut.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(Oe=>{Object.defineProperty(ye.prototype,Oe,Object.getOwnPropertyDescriptor(gt.prototype||gt,Oe))})})};class le{constructor(ut){return ut}}const _e=new g.OlP("angularfire2.app.options"),pe=new g.OlP("angularfire2.app.name");function j(ye,ut,gt){const we="object"==typeof gt&&gt||{};we.name=we.name||"string"==typeof gt&&gt||"[DEFAULT]";const Ge=J.Z.apps.filter(Be=>Be&&Be.name===we.name)[0]||ut.runOutsideAngular(()=>J.Z.initializeApp(ye,we));try{JSON.stringify(ye)!==JSON.stringify(Ge.options)&&$("error",`${Ge.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ge)}const $=(ye,...ut)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ye](...ut)},q={provide:le,useFactory:j,deps:[_e,g.R0b,[new g.FiY,pe]]};let $e=(()=>{class ye{constructor(gt){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,gt.toString())}static initializeApp(gt,Oe){return{ngModule:ye,providers:[{provide:_e,useValue:gt},{provide:pe,useValue:Oe}]}}}return ye.\u0275fac=function(gt){return new(gt||ye)(g.LFG(g.Lbi))},ye.\u0275mod=g.oAB({type:ye}),ye.\u0275inj=g.cJS({providers:[q]}),ye})();function xe(ye,ut,gt,Oe,we){const[,me,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ye)||[];if(me)return function De(ye,ut){try{return ye.toString()===ut.toString()}catch{return ye===ut}}(we,Ge)||(ge("error",`${ut} was already initialized on the ${gt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:we,was:Ge})),me;{const Be=Oe();return globalThis.\u0275AngularfireInstanceCache.push([ye,Be,we]),Be}}const it=!!dt.hot,ge=(ye,...ut)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ye](...ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(dt,Se,F)=>{F.d(Se,{q4:()=>ps,iC:()=>pl,HU:()=>lo,vb:()=>co,JM:()=>hl});var g=F(4650),J=F(259),O=F(5861),oe=F(6881),se=F(2090),he=F(4859),le=F(1877);let pe,j;const $e=new WeakMap,xe=new WeakMap,De=new WeakMap,it=new WeakMap,ge=new WeakMap;let gt={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return xe.get(E);if("objectStoreNames"===D)return E.objectStoreNames||De.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ge(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function me(E){return"function"==typeof E?function we(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Be(this),D),Ge($e.get(this))}:function(...D){return Ge(E.apply(Be(this),D))}:function(D,...A){const P=E.call(Be(this),D,...A);return De.set(P,D.sort?D.sort():[D]),Ge(P)}}(E):(E instanceof IDBTransaction&&function ut(E){if(xe.has(E))return;const D=new Promise((A,P)=>{const G=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{A(),G()},de=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});xe.set(E,D)}(E),((E,D)=>D.some(A=>E instanceof A))(E,function $(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,gt):E)}function Ge(E){if(E instanceof IDBRequest)return function ye(E){const D=new Promise((A,P)=>{const G=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{A(Ge(E.result)),G()},de=()=>{P(E.error),G()};E.addEventListener("success",K),E.addEventListener("error",de)});return D.then(A=>{A instanceof IDBCursor&&$e.set(A,E)}).catch(()=>{}),ge.set(D,E),D}(E);if(it.has(E))return it.get(E);const D=me(E);return D!==E&&(it.set(E,D),ge.set(D,E)),D}const Be=E=>ge.get(E),ne=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],fe=new Map;function ae(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(fe.get(D))return fe.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,G=X.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!ne.includes(A))return;const K=function(){var de=(0,O.Z)(function*(ze,...je){const Xe=this.transaction(ze,G?"readwrite":"readonly");let bt=Xe.store;return P&&(bt=bt.index(je.shift())),(yield Promise.all([bt[A](...je),G&&Xe.done]))[0]});return function(je){return de.apply(this,arguments)}}();return fe.set(D,K),K}!function Oe(E){gt=E(gt)}(E=>({...E,get:(D,A,P)=>ae(D,A)||E.get(D,A,P),has:(D,A)=>!!ae(D,A)||E.has(D,A)}));const We="@firebase/installations",qt="w:0.6.4",Jt="FIS_v2",On=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bn(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function Dr({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function ii(E){return{token:E.token,requestStatus:2,expiresIn:ma(E.expiresIn),creationTime:Date.now()}}function si(E,D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(E,D){const P=(yield D.json()).error;return On.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function ga({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function ji(E,{refreshToken:D}){const A=ga(E);return A.append("Authorization",function No(E){return`${Jt} ${E}`}(D)),A}function $i(E){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function ma(E){return Number(E.replace("s","000"))}function ot(E,D){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const P=Dr(E),G=ga(E),K=D.getImmediate({optional:!0});if(K){const Xe=yield K.getHeartbeatsHeader();Xe&&G.append("x-firebase-client",Xe)}const ze={method:"POST",headers:G,body:JSON.stringify({fid:A,authVersion:Jt,appId:E.appId,sdkVersion:qt})},je=yield $i(()=>fetch(P,ze));if(je.ok){const Xe=yield je.json();return{fid:Xe.fid||A,registrationStatus:2,refreshToken:Xe.refreshToken,authToken:ii(Xe.authToken)}}throw yield si("Create Installation",je)})).apply(this,arguments)}function wi(E){return new Promise(D=>{setTimeout(D,E)})}const Po=/^[cdef][\w-]{21}$/;function Kn(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Cn(E){return function Fr(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Po.test(A)?A:""}catch{return""}}function Kt(E){return`${E.appName}!${E.appId}`}const tt=new Map;function ht(E,D){const A=Kt(E);$r(A,D),function $n(E,D){const A=function cr(){return!vt&&"BroadcastChannel"in self&&(vt=new BroadcastChannel("[Firebase] FID Change"),vt.onmessage=E=>{$r(E.data.key,E.data.fid)}),vt}();A&&A.postMessage({key:E,fid:D}),function sn(){0===tt.size&&vt&&(vt.close(),vt=null)}()}(A,D)}function $r(E,D){const A=tt.get(E);if(A)for(const P of A)P(D)}let vt=null;const Zn="firebase-installations-store";let lr=null;function Ei(){return lr||(lr=function nt(E,D,{blocked:A,upgrade:P,blocking:G,terminated:K}={}){const de=indexedDB.open(E,D),ze=Ge(de);return P&&de.addEventListener("upgradeneeded",je=>{P(Ge(de.result),je.oldVersion,je.newVersion,Ge(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),ze.then(je=>{K&&je.addEventListener("close",()=>K()),G&&je.addEventListener("versionchange",()=>G())}).catch(()=>{}),ze}("firebase-installations-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Zn)}})),lr}function An(E,D){return dr.apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*(E,D){const A=Kt(E),G=(yield Ei()).transaction(Zn,"readwrite"),K=G.objectStore(Zn),de=yield K.get(A);return yield K.put(D,A),yield G.done,(!de||de.fid!==D.fid)&&ht(E,D.fid),D})).apply(this,arguments)}function Gi(E){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(E){const D=Kt(E),P=(yield Ei()).transaction(Zn,"readwrite");yield P.objectStore(Zn).delete(D),yield P.done})).apply(this,arguments)}function Hr(E,D){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(E,D){const A=Kt(E),G=(yield Ei()).transaction(Zn,"readwrite"),K=G.objectStore(Zn),de=yield K.get(A),ze=D(de);return void 0===ze?yield K.delete(A):yield K.put(ze,A),yield G.done,ze&&(!de||de.fid!==ze.fid)&&ht(E,ze.fid),ze})).apply(this,arguments)}function V(E){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*(E){let D;const A=yield Hr(E.appConfig,P=>{const G=z(P),K=ue(E,G);return D=K.registrationPromise,K.installationEntry});return""===A.fid?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}})).apply(this,arguments)}function z(E){return ke(E||{fid:Kn(),registrationStatus:0})}function ue(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(On.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},P=function Y(E,D){return He.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:P}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:wt(E)}:{installationEntry:D}}function He(){return(He=(0,O.Z)(function*(E,D){try{const A=yield ot(E,D);return An(E.appConfig,A)}catch(A){throw bn(A)&&409===A.customData.serverCode?yield Gi(E.appConfig):yield An(E.appConfig,{fid:D.fid,registrationStatus:0}),A}})).apply(this,arguments)}function wt(E){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(E){let D=yield nn(E.appConfig);for(;1===D.registrationStatus;)yield wi(100),D=yield nn(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield V(E);return P||A}return D})).apply(this,arguments)}function nn(E){return Hr(E,D=>{if(!D)throw On.create("installation-not-found");return ke(D)})}function ke(E){return function st(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function ct(E,D){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const P=hr(E,A),G=ji(E,A),K=D.getImmediate({optional:!0});if(K){const Xe=yield K.getHeartbeatsHeader();Xe&&G.append("x-firebase-client",Xe)}const ze={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:qt,appId:E.appId}})},je=yield $i(()=>fetch(P,ze));if(je.ok)return ii(yield je.json());throw yield si("Generate Auth Token",je)})).apply(this,arguments)}function hr(E,{fid:D}){return`${Dr(E)}/${D}/authTokens:generate`}function dn(E){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(E,D=!1){let A;const P=yield Hr(E.appConfig,K=>{if(!Rt(K))throw On.create("not-registered");const de=K.authToken;if(!D&&Yt(de))return K;if(1===de.requestStatus)return A=re(E,D),K;{if(!navigator.onLine)throw On.create("app-offline");const ze=Ut(K);return A=Ne(E,ze),ze}});return A?yield A:P.authToken})).apply(this,arguments)}function re(E,D){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(E,D){let A=yield Me(E.appConfig);for(;1===A.authToken.requestStatus;)yield wi(100),A=yield Me(E.appConfig);const P=A.authToken;return 0===P.requestStatus?dn(E,D):P})).apply(this,arguments)}function Me(E){return Hr(E,D=>{if(!Rt(D))throw On.create("not-registered");return function fr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ne(E,D){return mt.apply(this,arguments)}function mt(){return(mt=(0,O.Z)(function*(E,D){try{const A=yield ct(E,D),P=Object.assign(Object.assign({},D),{authToken:A});return yield An(E.appConfig,P),A}catch(A){if(!bn(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield An(E.appConfig,P)}else yield Gi(E.appConfig);throw A}})).apply(this,arguments)}function Rt(E){return void 0!==E&&2===E.registrationStatus}function Yt(E){return 2===E.requestStatus&&!function Tn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+36e5}(E)}function Ut(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}function Gr(){return(Gr=(0,O.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:P}=yield V(D);return P?P.catch(console.error):dn(D).catch(console.error),A.fid})).apply(this,arguments)}function gu(){return(gu=(0,O.Z)(function*(E,D=!1){const A=E;return yield hn(A),(yield dn(A,D)).token})).apply(this,arguments)}function hn(E){return zi.apply(this,arguments)}function zi(){return(zi=(0,O.Z)(function*(E){const{registrationPromise:D}=yield V(E);D&&(yield D)})).apply(this,arguments)}function Yn(E){return On.create("missing-app-config-values",{valueName:E})}const Vr="installations",yu=E=>{const D=E.getProvider("app").getImmediate(),A=function sd(E){if(!E||!E.options)throw Yn("App Configuration");if(!E.name)throw Yn("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw Yn(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},rs=E=>{const D=E.getProvider("app").getImmediate(),A=(0,oe._getProvider)(D,Vr).getImmediate();return{getId:()=>function ai(E){return Gr.apply(this,arguments)}(A),getToken:G=>function ya(E){return gu.apply(this,arguments)}(A,G)}};(function Di(){(0,oe._registerComponent)(new he.wA(Vr,yu,"PUBLIC")),(0,oe._registerComponent)(new he.wA("installations-internal",rs,"PRIVATE"))})(),(0,oe.registerVersion)(We,"0.6.4"),(0,oe.registerVersion)(We,"0.6.4","esm2017");const Lo="@firebase/remote-config",En=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ui{constructor(D,A,P,G){this.client=D,this.storage=A,this.storageCache=P,this.logger=G}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,G=P<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${G}.`),G}fetch(D){var A=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(G&&A.isCachedDataFresh(D.cacheMaxAgeMillis,P))return G;D.eTag=G&&G.eTag;const K=yield A.client.fetch(D),de=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&de.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(de),K})()}}function gd(E=navigator){return E.languages&&E.languages[0]||E.language}class va{constructor(D,A,P,G,K,de){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=P,this.projectId=G,this.apiKey=K,this.appId=de}fetch(D){var A=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},je={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:G,app_id:A.appId,language_code:gd()},Xe={method:"POST",headers:ze,body:JSON.stringify(je)},bt=fetch(de,Xe),Tt=new Promise((Xr,Qi)=>{D.signal.addEventListener(()=>{const Qu=new Error("The operation was aborted.");Qu.name="AbortError",Qi(Qu)})});let hi;try{yield Promise.race([bt,Tt]),hi=yield bt}catch(Xr){let Qi="fetch-client-network";throw"AbortError"===Xr?.name&&(Qi="fetch-timeout"),En.create(Qi,{originalErrorMessage:Xr?.message})}let Ln=hi.status;const xi=hi.headers.get("ETag")||void 0;let Mi,Ri;if(200===hi.status){let Xr;try{Xr=yield hi.json()}catch(Qi){throw En.create("fetch-client-parse",{originalErrorMessage:Qi?.message})}Mi=Xr.entries,Ri=Xr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ri?Ln=500:"NO_CHANGE"===Ri?Ln=304:("NO_TEMPLATE"===Ri||"EMPTY_CONFIG"===Ri)&&(Mi={}),304!==Ln&&200!==Ln)throw En.create("fetch-status",{httpStatus:Ln});return{status:Ln,eTag:xi,config:Mi}})()}}class _f{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,O.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,P)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:P}){var G=this;return(0,O.Z)(function*(){yield function jc(E,D){return new Promise((A,P)=>{const G=Math.max(D-Date.now(),0),K=setTimeout(A,G);E.addEventListener(()=>{clearTimeout(K),P(En.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const K=yield G.client.fetch(D);return yield G.storage.deleteThrottleMetadata(),K}catch(K){if(!function wu(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(K))throw K;const de={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield G.storage.setThrottleMetadata(de),G.attemptFetch(D,de)}})()}}class wf{constructor(D,A,P,G,K){this.app=D,this._client=A,this._storageCache=P,this._storage=G,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nr(E,D){const A=E.target.error||void 0;return En.create(D,{originalErrorMessage:A&&A?.message})}const Cr="app_namespace_store";class hw{constructor(D,A,P,G=function Du(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{D(nr(P,"storage-open"))},A.onsuccess=P=>{E(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(Cr,{keyPath:"compositeKey"})}}catch(A){D(En.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=P,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((G,K)=>{const ze=P.transaction([Cr],"readonly").objectStore(Cr),je=A.createCompositeKey(D);try{const Xe=ze.get(je);Xe.onerror=bt=>{K(nr(bt,"storage-get"))},Xe.onsuccess=bt=>{const Tt=bt.target.result;G(Tt?Tt.value:void 0)}}catch(Xe){K(En.create("storage-get",{originalErrorMessage:Xe?.message}))}})})()}set(D,A){var P=this;return(0,O.Z)(function*(){const G=yield P.openDbPromise;return new Promise((K,de)=>{const je=G.transaction([Cr],"readwrite").objectStore(Cr),Xe=P.createCompositeKey(D);try{const bt=je.put({compositeKey:Xe,value:A});bt.onerror=Tt=>{de(nr(Tt,"storage-set"))},bt.onsuccess=()=>{K()}}catch(bt){de(En.create("storage-set",{originalErrorMessage:bt?.message}))}})})()}delete(D){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((G,K)=>{const ze=P.transaction([Cr],"readwrite").objectStore(Cr),je=A.createCompositeKey(D);try{const Xe=ze.delete(je);Xe.onerror=bt=>{K(nr(bt,"storage-delete"))},Xe.onsuccess=()=>{G()}}catch(Xe){K(En.create("storage-delete",{originalErrorMessage:Xe?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fn{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const A=D.storage.getLastFetchStatus(),P=D.storage.getLastSuccessfulFetchTimestampMillis(),G=D.storage.getActiveConfig(),K=yield A;K&&(D.lastFetchStatus=K);const de=yield P;de&&(D.lastSuccessfulFetchTimestampMillis=de);const ze=yield G;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function zr(){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}let Vo,$t;!function ss(){(0,oe._registerComponent)(new he.wA("remote-config",function E(D,{instanceIdentifier:A}){const P=D.getProvider("app").getImmediate(),G=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw En.create("registration-window");if(!(0,se.hl)())throw En.create("indexed-db-unavailable");const{projectId:K,apiKey:de,appId:ze}=P.options;if(!K)throw En.create("registration-project-id");if(!de)throw En.create("registration-api-key");if(!ze)throw En.create("registration-app-id");const je=new hw(ze,P.name,A=A||"firebase"),Xe=new Fn(je),bt=new le.Yd(Lo);bt.logLevel=le.in.ERROR;const Tt=new va(G,oe.SDK_VERSION,A,K,de,ze),hi=new _f(Tt,je),Ln=new ui(hi,je,Xe,bt),xi=new wf(P,Ln,Xe,je,bt);return function xg(E){const D=(0,se.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(xi),xi},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Lo,"0.4.4"),(0,oe.registerVersion)(Lo,"0.4.4","esm2017")}();const md=new WeakMap,qr=new WeakMap,_a=new WeakMap,gr=new WeakMap,St=new WeakMap;let Uo={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return qr.get(E);if("objectStoreNames"===D)return E.objectStoreNames||_a.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return bi(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function wa(E){return"function"==typeof E?function vd(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function os(){return $t||($t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Ea(this),D),bi(md.get(this))}:function(...D){return bi(E.apply(Ea(this),D))}:function(D,...A){const P=E.call(Ea(this),D,...A);return _a.set(P,D.sort?D.sort():[D]),bi(P)}}(E):(E instanceof IDBTransaction&&function If(E){if(qr.has(E))return;const D=new Promise((A,P)=>{const G=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",de),E.removeEventListener("abort",de)},K=()=>{A(),G()},de=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",K),E.addEventListener("error",de),E.addEventListener("abort",de)});qr.set(E,D)}(E),((E,D)=>D.some(A=>E instanceof A))(E,function Rg(){return Vo||(Vo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Uo):E)}function bi(E){if(E instanceof IDBRequest)return function Ef(E){const D=new Promise((A,P)=>{const G=()=>{E.removeEventListener("success",K),E.removeEventListener("error",de)},K=()=>{A(bi(E.result)),G()},de=()=>{P(E.error),G()};E.addEventListener("success",K),E.addEventListener("error",de)});return D.then(A=>{A instanceof IDBCursor&&md.set(A,E)}).catch(()=>{}),St.set(D,E),D}(E);if(gr.has(E))return gr.get(E);const D=wa(E);return D!==E&&(gr.set(E,D),St.set(D,E)),D}const Ea=E=>St.get(E);function be(E,D,{blocked:A,upgrade:P,blocking:G,terminated:K}={}){const de=indexedDB.open(E,D),ze=bi(de);return P&&de.addEventListener("upgradeneeded",je=>{P(bi(de.result),je.oldVersion,je.newVersion,bi(de.transaction))}),A&&de.addEventListener("blocked",()=>A()),ze.then(je=>{K&&je.addEventListener("close",()=>K()),G&&je.addEventListener("versionchange",()=>G())}).catch(()=>{}),ze}function Lt(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),bi(A).then(()=>{})}const Gc=["get","getKey","getAll","getAllKeys","count"],zc=["put","add","delete","clear"],xn=new Map;function Tu(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(xn.get(D))return xn.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,G=zc.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!Gc.includes(A))return;const K=function(){var de=(0,O.Z)(function*(ze,...je){const Xe=this.transaction(ze,G?"readwrite":"readonly");let bt=Xe.store;return P&&(bt=bt.index(je.shift())),(yield Promise.all([bt[A](...je),G&&Xe.done]))[0]});return function(je){return de.apply(this,arguments)}}();return xn.set(D,K),K}!function yd(E){Uo=E(Uo)}(E=>({...E,get:(D,A,P)=>Tu(D,A)||E.get(D,A,P),has:(D,A)=>!!Tu(D,A)||E.has(D,A)}));const Bo="/firebase-messaging-sw.js",Wr="/firebase-cloud-messaging-push-scope",Ia="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Su="google.c.a.c_id",_d="google.c.a.c_l",wd="google.c.a.ts",Au="google.c.a.e";var br=(()=>{return(E=br||(br={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",br;var E})();function Kr(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function as(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),G=new Uint8Array(P.length);for(let K=0;K<P.length;++K)G[K]=P.charCodeAt(K);return G}const li="fcm_token_details_db",Zs="fcm_token_object_Store";function Ng(E){return xu.apply(this,arguments)}function xu(){return xu=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(li))return null;let D=null;return(yield be(li,5,{upgrade:(P=(0,O.Z)(function*(G,K,de,ze){var je;if(K<2||!G.objectStoreNames.contains(Zs))return;const Xe=ze.objectStore(Zs),bt=yield Xe.index("fcmSenderId").get(E);if(yield Xe.clear(),bt)if(2===K){const Tt=bt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;D={token:Tt.fcmToken,createTime:null!==(je=Tt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:Kr(Tt.vapidKey)}}}else if(3===K){const Tt=bt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:Kr(Tt.auth),p256dh:Kr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:Kr(Tt.vapidKey)}}}else if(4===K){const Tt=bt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:Kr(Tt.auth),p256dh:Kr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:Kr(Tt.vapidKey)}}}}),function(K,de,ze,je){return P.apply(this,arguments)})})).close(),yield Lt(li),yield Lt("fcm_vapid_details_db"),yield Lt("undefined"),Id(D)?D:null;var P}),xu.apply(this,arguments)}function Id(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ti="firebase-messaging-store";let Mu=null;function Ca(){return Mu||(Mu=be("firebase-messaging-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Ti)}})),Mu}function Wc(E){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(E){const D=us(E),P=yield(yield Ca()).transaction(Ti).objectStore(Ti).get(D);if(P)return P;{const G=yield Ng(E.appConfig.senderId);if(G)return yield Kc(E,G),G}})).apply(this,arguments)}function Kc(E,D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(E,D){const A=us(E),G=(yield Ca()).transaction(Ti,"readwrite");return yield G.objectStore(Ti).put(D,A),yield G.done,D})).apply(this,arguments)}function Dd(E){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(E){const D=us(E),P=(yield Ca()).transaction(Ti,"readwrite");yield P.objectStore(Ti).delete(D),yield P.done})).apply(this,arguments)}function us({appConfig:E}){return E.appId}const Ht=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qi(E,D){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(E,D){const A=yield jo(E),P=$o(D),G={method:"POST",headers:A,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(xs(E.appConfig),G)).json()}catch(de){throw Ht.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(K.error)throw Ht.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Ht.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Zc(E,D){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,O.Z)(function*(E,D){const A=yield jo(E),P=$o(D.subscriptionOptions),G={method:"PATCH",headers:A,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(`${xs(E.appConfig)}/${D.token}`,G)).json()}catch(de){throw Ht.create("token-update-failed",{errorInfo:de?.toString()})}if(K.error)throw Ht.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Ht.create("token-update-no-token");return K.token})).apply(this,arguments)}function Ru(E,D){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,O.Z)(function*(E,D){const P={method:"DELETE",headers:yield jo(E)};try{const K=yield(yield fetch(`${xs(E.appConfig)}/${D}`,P)).json();if(K.error)throw Ht.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(G){throw Ht.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function xs({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function jo(E){return cs.apply(this,arguments)}function cs(){return(cs=(0,O.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function $o({p256dh:E,auth:D,endpoint:A,vapidKey:P}){const G={web:{endpoint:A,auth:D,p256dh:E}};return P!==Ia&&(G.web.applicationPubKey=P),G}const Wi=6048e5;function Nu(E){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(E){const D=yield Ou(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Kr(D.getKey("auth")),p256dh:Kr(D.getKey("p256dh"))},P=yield Wc(E.firebaseDependencies);if(P){if(bd(P.subscriptionOptions,A))return Date.now()>=P.createTime+Wi?Qs(E,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield Ru(E.firebaseDependencies,P.token)}catch(G){console.warn(G)}return Cd(E.firebaseDependencies,A)}return Cd(E.firebaseDependencies,A)})).apply(this,arguments)}function Pu(E){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(E){const D=yield Wc(E.firebaseDependencies);D&&(yield Ru(E.firebaseDependencies,D.token),yield Dd(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function Qs(E,D){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(E,D){try{const A=yield Zc(E.firebaseDependencies,D),P=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield Kc(E.firebaseDependencies,P),A}catch(A){throw yield Pu(E),A}})).apply(this,arguments)}function Cd(E,D){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(E,D){const P={token:yield qi(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Kc(E,P),P.token})).apply(this,arguments)}function Ou(E,D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:as(D)})})).apply(this,arguments)}function bd(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}function Pg(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Td(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const P=D.notification.body;P&&(E.notification.body=P);const G=D.notification.image;G&&(E.notification.image=G);const K=D.notification.icon;K&&(E.notification.icon=K)}(D,E),function Go(E,D){!D.data||(E.data=D.data)}(D,E),function bf(E,D){var A,P,G,K,de;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const ze=null!==(G=null===(P=D.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==G?G:null===(K=D.notification)||void 0===K?void 0:K.click_action;ze&&(E.fcmOptions.link=ze);const je=null===(de=D.fcmOptions)||void 0===de?void 0:de.analytics_label;je&&(E.fcmOptions.analyticsLabel=je)}(D,E),D}function Sd(E){return"object"==typeof E&&!!E&&Su in E}function zo(E,D){const A=[];for(let P=0;P<E.length;P++)A.push(E.charAt(P)),P<D.length&&A.push(D.charAt(P));return A.join("")}function Jc(E){return Ht.create("missing-app-config-values",{valueName:E})}zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Aa{constructor(D,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function Ad(E){if(!E||!E.options)throw Jc("App Configuration Object");if(!E.name)throw Jc("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const P of D)if(!A[P])throw Jc(P);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:G,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function xd(E){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Bo,{scope:Wr}),E.swRegistration.update().catch(()=>{})}catch(D){throw Ht.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Md(E,D){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield xd(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Ht.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function Ns(E,D){return xa.apply(this,arguments)}function xa(){return(xa=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Ia)})).apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(E,D){if(!navigator)throw Ht.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ht.create("permission-blocked");return yield Ns(E,D?.vapidKey),yield Md(E,D?.serviceWorkerRegistration),Nu(E)})).apply(this,arguments)}function ls(E,D,A){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,O.Z)(function*(E,D,A){const P=Ma(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[Su],message_name:A[_d],message_time:A[wd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ma(E){switch(E){case br.NOTIFICATION_CLICKED:return"notification_open";case br.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ps(){return(Ps=(0,O.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===br.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Pg(A)):E.onMessageHandler.next(Pg(A)));const P=A.data;Sd(P)&&"1"===P[Au]&&(yield ls(E,A.messageType,P))})).apply(this,arguments)}const Xs="@firebase/messaging",Ra=E=>{const D=new Aa(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Xc(E,D){return Ps.apply(this,arguments)}(D,A)),D},Fu=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:P=>function Rd(E,D){return ku.apply(this,arguments)}(D,P)}};function Od(){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pd(){(0,oe._registerComponent)(new he.wA("messaging",Ra,"PUBLIC")),(0,oe._registerComponent)(new he.wA("messaging-internal",Fu,"PRIVATE")),(0,oe.registerVersion)(Xs,"0.12.4"),(0,oe.registerVersion)(Xs,"0.12.4","esm2017")}();const Qt="analytics",tl="firebase_id",Wo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",to="https://www.googletagmanager.com/gtag/js",Mn=new le.Yd("@firebase/analytics"),mr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Pa(E){if(!E.startsWith(to)){const D=mr.create("invalid-gtag-resource",{gtagURL:E});return Mn.warn(D.message),""}return E}function no(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function il(E,D){const A=function rl(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:Pa}),P=document.createElement("script"),G=`${to}?l=${E}&id=${D}`;P.src=A?A?.createScriptURL(G):G,P.async=!0,document.head.appendChild(P)}function kd(E,D,A,P,G,K){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,O.Z)(function*(E,D,A,P,G,K){const de=P[G];try{if(de)yield D[de];else{const je=(yield no(A)).find(Xe=>Xe.measurementId===G);je&&(yield D[je.appId])}}catch(ze){Mn.error(ze)}E("config",G,K)})).apply(this,arguments)}function Af(E,D,A,P,G){return xf.apply(this,arguments)}function xf(){return(xf=(0,O.Z)(function*(E,D,A,P,G){try{let K=[];if(G&&G.send_to){let de=G.send_to;Array.isArray(de)||(de=[de]);const ze=yield no(A);for(const je of de){const Xe=ze.find(Tt=>Tt.measurementId===je),bt=Xe&&D[Xe.appId];if(!bt){K=[];break}K.push(bt)}}0===K.length&&(K=Object.values(D)),yield Promise.all(K),E("event",P,G||{})}catch(K){Mn.error(K)}})).apply(this,arguments)}function uv(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(to)&&A.src.includes(E))return A;return null}const Hn=new class Oa{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function fn(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Zr(E){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,O.Z)(function*(E){var D;const{appId:A,apiKey:P}=E,G={method:"GET",headers:fn(P)},K=Wo.replace("{app-id}",A),de=yield fetch(K,G);if(200!==de.status&&304!==de.status){let ze="";try{const je=yield de.json();null!==(D=je.error)&&void 0!==D&&D.message&&(ze=je.error.message)}catch{}throw mr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:ze})}return de.json()})).apply(this,arguments)}function Rf(E){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(E,D=Hn,A){const{appId:P,apiKey:G,measurementId:K}=E.options;if(!P)throw mr.create("no-app-id");if(!G){if(K)return{measurementId:K,appId:P};throw mr.create("no-api-key")}const de=D.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new ro;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==A?A:6e4),Ki({appId:P,apiKey:G,measurementId:K},de,ze,D)})).apply(this,arguments)}function Ki(E,D,A){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},P,G=Hn){var K;const{appId:de,measurementId:ze}=E;try{yield Bu(P,D)}catch(je){if(ze)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:de,measurementId:ze};throw je}try{const je=yield Zr(E);return G.deleteThrottleMetadata(de),je}catch(je){const Xe=je;if(!Zi(Xe)){if(G.deleteThrottleMetadata(de),ze)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${Xe?.message}]`),{appId:de,measurementId:ze};throw je}const bt=503===Number(null===(K=Xe?.customData)||void 0===K?void 0:K.httpStatus)?(0,se.$s)(A,G.intervalMillis,30):(0,se.$s)(A,G.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+bt,backoffCount:A+1};return G.setThrottleMetadata(de,Tt),Mn.debug(`Calling attemptFetch again in ${bt} millis`),Ki(E,Tt,P,G)}})).apply(this,arguments)}function Bu(E,D){return new Promise((A,P)=>{const G=Math.max(D-Date.now(),0),K=setTimeout(A,G);E.addEventListener(()=>{clearTimeout(K),P(mr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Zi(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ro{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Jn,sl;function Vd(){return(Vd=(0,O.Z)(function*(E,D,A,P,G){if(G&&G.global)E("event",A,P);else{const K=yield D;E("event",A,Object.assign(Object.assign({},P),{send_to:K}))}})).apply(this,arguments)}function ju(E){sl=E}function so(E){Jn=E}function Ua(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(){if(!(0,se.hl)())return Mn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return Mn.warn(mr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(E,D,A,P,G,K,de){var ze;const je=Rf(E);je.then(Ln=>{A[Ln.measurementId]=Ln.appId,E.options.measurementId&&Ln.measurementId!==E.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ln=>Mn.error(Ln)),D.push(je);const Xe=Ua().then(Ln=>{if(Ln)return P.getId()}),[bt,Tt]=yield Promise.all([je,Xe]);uv(K)||il(K,bt.measurementId),sl&&(G("consent","default",sl),ju(void 0)),G("js",new Date);const hi=null!==(ze=de?.config)&&void 0!==ze?ze:{};return hi.origin="firebase",hi.update=!0,null!=Tt&&(hi[tl]=Tt),G("config",bt.measurementId,hi),Jn&&(G("set",Jn),so(void 0)),bt.measurementId})).apply(this,arguments)}class yr{constructor(D){this.app=D}_delete(){return delete Tr[this.app.options.appId],Promise.resolve()}}let Tr={},Nf=[];const al={};let ks,vr,Ba="dataLayer",$u=!1;function oo(E,D,A){!function ul(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((P,G)=>`(${G+1}) ${P}`).join(" "),A=mr.create("invalid-analytics-context",{errorInfo:D});Mn.warn(A.message)}}();const P=E.options.appId;if(!P)throw mr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw mr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tr[P])throw mr.create("already-exists",{id:P});if(!$u){!function gn(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(Ba);const{wrappedGtag:K,gtagCore:de}=function Og(E,D,A,P,G){let K=function(...de){window[P].push(arguments)};return window[G]&&"function"==typeof window[G]&&(K=window[G]),window[G]=function Mf(E,D,A,P){function K(){return(K=(0,O.Z)(function*(de,...ze){try{if("event"===de){const[je,Xe]=ze;yield Af(E,D,A,je,Xe)}else if("config"===de){const[je,Xe]=ze;yield kd(E,D,A,P,je,Xe)}else if("consent"===de){const[je]=ze;E("consent","update",je)}else if("get"===de){const[je,Xe,bt]=ze;E("get",je,Xe,bt)}else if("set"===de){const[je]=ze;E("set",je)}else E(de,...ze)}catch(je){Mn.error(je)}})).apply(this,arguments)}return function G(de){return K.apply(this,arguments)}}(K,E,D,A),{gtagCore:K,wrappedGtag:window[G]}}(Tr,Nf,al,Ba,"gtag");vr=K,ks=de,$u=!0}return Tr[P]=function ol(E,D,A,P,G,K,de){return mn.apply(this,arguments)}(E,Nf,al,D,ks,Ba,A),new yr(E)}function Hu(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Qo="@firebase/analytics";!function jd(){(0,oe._registerComponent)(new he.wA(Qt,(D,{options:A})=>oo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,oe._registerComponent)(new he.wA("analytics-internal",function E(D){try{const A=D.getProvider(Qt).getImmediate();return{logEvent:(P,G,K)=>function Vs(E,D,A,P){E=(0,se.m9)(E),function At(E,D,A,P,G){return Vd.apply(this,arguments)}(vr,Tr[E.app.options.appId],D,A,P).catch(G=>Mn.error(G))}(A,P,G,K)}}catch(A){throw mr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,oe.registerVersion)(Qo,"0.10.0"),(0,oe.registerVersion)(Qo,"0.10.0","esm2017")}();var hs=F(4408),Sr=F(7565);const dl=new class fs extends Sr.v{}(class Jo extends hs.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,A,P):(D.flush(this),0)}});var Pf=F(4986),Of=F(8505),Wu=F(9468),Xo=F(5363);const ps=new g.GfV("7.5.0"),Ga="__angularfire_symbol__analyticsIsSupportedValue",uo="__angularfire_symbol__analyticsIsSupported",Ku="__angularfire_symbol__remoteConfigIsSupportedValue",$d="__angularfire_symbol__remoteConfigIsSupported",Zu="__angularfire_symbol__messagingIsSupportedValue",Hd="__angularfire_symbol__messagingIsSupported";function hl(E,D,A){if(D){if(1===D.length)return D[0];const K=D.filter(de=>de.app===A);if(1===K.length)return K[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[uo]||(globalThis[uo]=Hu().then(E=>globalThis[Ga]=E).catch(()=>globalThis[Ga]=!1)),globalThis[Hd]||(globalThis[Hd]=Od().then(E=>globalThis[Zu]=E).catch(()=>globalThis[Zu]=!1)),globalThis[$d]||(globalThis[$d]=zr().then(E=>globalThis[Ku]=E).catch(()=>globalThis[Ku]=!1));const co=(E,D)=>{const A=D?[D]:(0,J.C6)(),P=[];return A.forEach(G=>{G.container.getProvider(E).instances.forEach(de=>{P.includes(de)||P.push(de)})}),P};function Us(){}class qd{constructor(D,A=dl){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,P){const G=this.zone;return this.delegate.schedule(function(de){G.runGuarded(()=>{D.apply(this,[de])})},A,P)}}class Lg{constructor(D){this.zone=D,this.task=null}call(D,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us)),A.pipe((0,Of.b)({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lo=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new qd(Zone.current)),this.insideAngular=A.run(()=>new qd(Zone.current,Pf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(g.LFG(g.R0b))},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Qr(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function pl(E){return Qr(),function gl(E){return function(A){return(A=A.lift(new Lg(E.ngZone))).pipe((0,Wu.R)(E.outsideAngular),(0,Xo.Q)(E.insideAngular))}}(Qr())(E)}},2090:(dt,Se,F)=>{F.d(Se,{$s:()=>Gi,BH:()=>me,G6:()=>qt,L:()=>pe,LL:()=>yt,Pz:()=>we,Sg:()=>Ge,UG:()=>te,US:()=>he,ZB:()=>q,ZR:()=>Ct,aH:()=>Oe,b$:()=>fe,eu:()=>Ze,hl:()=>Jt,jU:()=>ne,m9:()=>Lr,ne:()=>Kt,pd:()=>Kn,r3:()=>_i,ru:()=>X,tV:()=>j,uI:()=>nt,vZ:()=>kr,w1:()=>We,xO:()=>Po,xb:()=>No,z$:()=>Be,zI:()=>tr,zd:()=>oi});const oe=function(V){const L=[];let z=0;for(let ue=0;ue<V.length;ue++){let Y=V.charCodeAt(ue);Y<128?L[z++]=Y:Y<2048?(L[z++]=Y>>6|192,L[z++]=63&Y|128):55296==(64512&Y)&&ue+1<V.length&&56320==(64512&V.charCodeAt(ue+1))?(Y=65536+((1023&Y)<<10)+(1023&V.charCodeAt(++ue)),L[z++]=Y>>18|240,L[z++]=Y>>12&63|128,L[z++]=Y>>6&63|128,L[z++]=63&Y|128):(L[z++]=Y>>12|224,L[z++]=Y>>6&63|128,L[z++]=63&Y|128)}return L},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let Y=0;Y<V.length;Y+=3){const He=V[Y],wt=Y+1<V.length,Mt=wt?V[Y+1]:0,nn=Y+2<V.length,ke=nn?V[Y+2]:0;let ln=(15&Mt)<<2|ke>>6,hr=63&ke;nn||(hr=64,wt||(ln=64)),ue.push(z[He>>2],z[(3&He)<<4|Mt>>4],z[ln],z[hr])}return ue.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(oe(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let z=0,ue=0;for(;z<V.length;){const Y=V[z++];if(Y<128)L[ue++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const He=V[z++];L[ue++]=String.fromCharCode((31&Y)<<6|63&He)}else if(Y>239&&Y<365){const nn=((7&Y)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;L[ue++]=String.fromCharCode(55296+(nn>>10)),L[ue++]=String.fromCharCode(56320+(1023&nn))}else{const He=V[z++],wt=V[z++];L[ue++]=String.fromCharCode((15&Y)<<12|(63&He)<<6|63&wt)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let Y=0;Y<V.length;){const He=z[V.charAt(Y++)],Mt=Y<V.length?z[V.charAt(Y)]:0;++Y;const ke=Y<V.length?z[V.charAt(Y)]:64;++Y;const ct=Y<V.length?z[V.charAt(Y)]:64;if(++Y,null==He||null==Mt||null==ke||null==ct)throw new le;ue.push(He<<2|Mt>>4),64!==ke&&(ue.push(Mt<<4&240|ke>>2),64!==ct&&ue.push(ke<<6&192|ct))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(V){return function(V){const L=oe(V);return he.encodeByteArray(L,!0)}(V).replace(/\./g,"")},j=function(V){try{return he.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!$e(z)||(V[z]=q(V[z],L[z]));return V}function $e(V){return"__proto__"!==V}const ye=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&j(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Oe=()=>{var V;return null===(V=ye())||void 0===V?void 0:V.config},we=V=>{var L;return null===(L=ye())||void 0===L?void 0:L[`_${V}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ue)=>{z?this.reject(z):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ue))}}}function Ge(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",Y=V.iat||0,He=V.sub||V.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:Y,exp:Y+3600,auth_time:Y,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},V);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(wt)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function te(){var V;const L=null===(V=ye())||void 0===V?void 0:V.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ne(){return"object"==typeof self&&self.self===self}function X(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){const V=Be();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function qt(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jt(){try{return"object"==typeof indexedDB}catch{return!1}}function Ze(){return new Promise((V,L)=>{try{let z=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ue);Y.onsuccess=()=>{Y.result.close(),z||self.indexedDB.deleteDatabase(ue),V(!0)},Y.onupgradeneeded=()=>{z=!1},Y.onerror=()=>{var He;L((null===(He=Y.error)||void 0===He?void 0:He.message)||"")}}catch(z){L(z)}})}function tr(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ct extends Error{constructor(L,z,ue){super(z),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,Ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yt.prototype.create)}}class yt{constructor(L,z,ue){this.service=L,this.serviceName=z,this.errors=ue}create(L,...z){const ue=z[0]||{},Y=`${this.service}/${L}`,He=this.errors[L],wt=He?function On(V,L){return V.replace(bn,(z,ue)=>{const Y=L[ue];return null!=Y?String(Y):`<${ue}?>`})}(He,ue):"Error";return new Ct(Y,`${this.serviceName}: ${wt} (${Y}).`,ue)}}const bn=/\{\$([^}]+)}/g;function _i(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function No(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function kr(V,L){if(V===L)return!0;const z=Object.keys(V),ue=Object.keys(L);for(const Y of z){if(!ue.includes(Y))return!1;const He=V[Y],wt=L[Y];if(wi(He)&&wi(wt)){if(!kr(He,wt))return!1}else if(He!==wt)return!1}for(const Y of ue)if(!z.includes(Y))return!1;return!0}function wi(V){return null!==V&&"object"==typeof V}function Po(V){const L=[];for(const[z,ue]of Object.entries(V))Array.isArray(ue)?ue.forEach(Y=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function oi(V){const L={};return V.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[Y,He]=ue.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(He)}}),L}function Kn(V){const L=V.indexOf("?");if(!L)return"";const z=V.indexOf("#",L);return V.substring(L,z>0?z:void 0)}function Kt(V,L){const z=new tt(V,L);return z.subscribe.bind(z)}class tt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ue){let Y;if(void 0===L&&void 0===z&&void 0===ue)throw new Error("Missing Observer.");Y=function cn(V,L){if("object"!=typeof V||null===V)return!1;for(const z of L)if(z in V&&"function"==typeof V[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ue},void 0===Y.next&&(Y.next=Hi),void 0===Y.error&&(Y.error=Hi),void 0===Y.complete&&(Y.complete=Hi);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hi(){}function Gi(V,L=1e3,z=2){const ue=L*Math.pow(z,V),Y=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+Y)}function Lr(V){return V&&V._delegate?V._delegate:V}},8219:(dt,Se,F)=>{var g=F(4650);let J=null;function O(){return J}const le=new g.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function pe(){return(0,g.LFG)($)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let $=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){q()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){q()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function $e(){return new $((0,g.LFG)(le))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ut)},providedIn:"root"}),n})();const ye=new g.OlP("appBaseHref");let ut=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+it(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+it(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e),g.LFG(ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+it(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+it(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e),g.LFG(ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(Ge(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function me(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=it,n.joinWithSlash=xe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(g.LFG(ge))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return new Oe((0,g.LFG)(ge))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}class Fc{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Fc(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),As(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{As(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function As(n,e){n.context.$implicit=e.item}let pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sd{constructor(){this.$implicit=null,this.ngIf=null}}function Yn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let $c=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Iu(n){return"server"===n}let ss=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Cu((0,g.LFG)(le),window)}),n})();class Cu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ci(this.window.history)||ci(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ci(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ys extends class Dd extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){J||(J=n)}(new Ys)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Cf(){return us=us||document.querySelector("base"),us?us.getAttribute("href"):null}();return null==t?null:function qi(n){Ht=Ht||document.createElement("a"),Ht.setAttribute("href",n);const e=Ht.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){us=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function gu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ht,us=null;const In=new g.OlP("TRANSITION_ID"),Yc=[{provide:g.ip1,useFactory:function Zc(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[In,le,g.zs3],multi:!0}];let Qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const xs=new g.OlP("EventManagerPlugins");let jo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(xs),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class cs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let $o=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Wi=(()=>{class n extends $o{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Nu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Nu))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Nu(n){O().remove(n)}const Ms={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pu=/%COMP%/g;function Ho(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ho(n,s,t):(s=s.replace(Pu,n),t.push(s))}return t}function bd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Td=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Go(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Ad(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case g.ifc.ShadowDom:return new Jc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ho(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(jo),g.LFG(Wi),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Go{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ms[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(zo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Ms[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Ms[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,s&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bd(r)):this.eventManager.addEventListener(e,t,bd(r))}}function zo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ad extends Go{constructor(e,t,r,s){super(e),this.component=r;const u=Ho(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function di(n){return"_ngcontent-%COMP%".replace(Pu,n)}(s+"-"+r.id),this.hostAttr=function Ou(n){return"_nghost-%COMP%".replace(Pu,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Jc extends Go{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ho(s.id,s.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Aa=(()=>{class n extends cs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const xd=["alt","control","meta","shift"],Js={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Md={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rs=(()=>{class n extends cs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),xd.forEach(b=>{const x=r.indexOf(b);x>-1&&(r.splice(x,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=Js[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),xd.forEach(l=>{l!==s&&(0,Md[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Xs=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Nd(){Ys.makeCurrent()},multi:!0},{provide:le,useFactory:function Xc(){return(0,g.RDi)(document),document},deps:[]}]),qo=new g.OlP(""),Ra=[{provide:g.rWj,useClass:class Ru{addToWindow(e){g.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const s=g.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Fu=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ma(){return new g.qLn},deps:[]},{provide:xs,useClass:Aa,multi:!0,deps:[le,g.R0b,g.Lbi]},{provide:xs,useClass:Rs,multi:!0,deps:[le]},{provide:Td,useClass:Td,deps:[jo,Wi,g.AFp]},{provide:g.FYo,useExisting:Td},{provide:$o,useExisting:Wi},{provide:Wi,useClass:Wi,deps:[le]},{provide:jo,useClass:jo,deps:[xs,g.R0b]},{provide:class bu{},useClass:Qc,deps:[]},[]];let Pd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:In,useExisting:g.AFp},Yc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qo,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Fu,...Ra],imports:[$c,g.hGG]}),n})(),Na=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ds(){return new Na((0,g.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fn=F(8996),Zr=F(9751);const{isArray:Ld}=Array,{getPrototypeOf:Rf,prototype:Qn,keys:Ki}=Object;function ka(n){if(1===n.length){const e=n[0];if(Ld(e))return{args:e,keys:null};if(function Bu(n){return n&&"object"==typeof n&&Rf(n)===Qn}(e)){const t=Ki(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zi=F(8421),ro=F(7669),Jn=F(5403),At=F(4004);const{isArray:Vd}=Array;function Zo(n){return(0,At.U)(e=>function kg(n,e){return Vd(e)?n(...e):n(e)}(n,e))}function Ur(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}const mn=new g.OlP("NgValidators"),yr=new g.OlP("NgAsyncValidators");function cl(n){return null!=n}function Fs(n){return(0,g.QGY)(n)?(0,fn.D)(n):n}function Hu(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Gu(n,e){return e.map(t=>t(n))}function ll(n){return n.map(e=>function zu(n){return!n.validate}(e)?e:t=>e.validate(t))}function ja(n){return null!=n?function Ls(n){if(!n)return null;const e=n.filter(cl);return 0==e.length?null:function(t){return Hu(Gu(t,e))}}(ll(n)):null}function qu(n){return null!=n?function ao(n){if(!n)return null;const e=n.filter(cl);return 0==e.length?null:function(t){return function Fa(...n){const e=(0,ro.jO)(n),{args:t,keys:r}=ka(n),s=new Zr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let x=0;x<l;x++){let N=!1;(0,Zi.Xf)(t[x]).subscribe((0,Jn.x)(u,B=>{N||(N=!0,b--),m[x]=B},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?Ur(r,m):m),u.complete())}))}});return e?s.pipe(Zo(e)):s}(Gu(t,e).map(Fs)).pipe((0,At.U)(Hu))}}(ll(n)):null}function Bd(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Qo(n){return n?Array.isArray(n)?n:[n]:[]}function Ha(n,e){return Array.isArray(n)?n.includes(e):n===e}function jd(n,e){const t=Qo(e);return Qo(n).forEach(s=>{Ha(t,s)||t.push(s)}),t}function hs(n,e){return Qo(e).filter(t=>!Ha(n,t))}class Sr extends class Jo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ja(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}{get formDirective(){return null}get path(){return null}}let Wu=(()=>{class n extends class dl{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Sr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const Qr="VALID",Bs="INVALID",Jr="PENDING",za="DISABLED";function pl(n){return Array.isArray(n)?ja(n):n||null}function Wd(n){return Array.isArray(n)?qu(n):n||null}function ml(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class P extends class A{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=pl(this._rawValidators),this._composedAsyncValidatorFn=Wd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qr}get invalid(){return this.status===Bs}get pending(){return this.status==Jr}get disabled(){return this.status===za}get enabled(){return this.status!==za}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=pl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Wd(e)}addValidators(e){this.setValidators(jd(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jd(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hs(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hs(e,this._rawAsyncValidators))}hasValidator(e){return Ha(this._rawValidators,e)}hasAsyncValidator(e){return Ha(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Jr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=za,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qr||this.status===Jr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?za:Qr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Jr,this._hasOwnPendingAsyncValidator=!0;const t=Fs(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?za:this.errors?Bs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jr)?Jr:this._anyControlsHaveStatus(Bs)?Bs:Qr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ml(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e,t,r){super(function fl(n){return(ml(n)?n.validators:n)||null}(t),function gl(n,e){return(ml(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function D(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function E(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Tt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ln(n,e){const t=function Vs(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Bd(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function $a(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Bd(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Tt(e._rawValidators,s),Tt(e._rawAsyncValidators,s)}function Xr(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const hv={provide:Sr,useExisting:(0,g.Gpc)(()=>ea)},Xu=(()=>Promise.resolve())();let ea=(()=>{class n extends Sr{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new P({},ja(t),qu(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function Xe(n,e){Ln(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Mi(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Xr(n,e)})}(n,e),function Qi(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ri(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Xr(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function hi(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xu.then(()=>{const r=this._findContainer(t.path),s=new P({});(function Qu(n,e){Ln(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Xu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Kd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(mn,10),g.Y36(yr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([hv]),g.qOj]}),n})(),ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Yd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),ih=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Yd]}),n})(),Ev=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[ih]}),n})();function f(...n){const e=(0,ro.yG)(n);return(0,fn.D)(n,e)}var _=F(7579);class T extends _.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const U=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var W=F(4671),Te=F(9672);function Ue(...n){const e=(0,ro.yG)(n),t=(0,ro.jO)(n),{args:r,keys:s}=ka(n);if(0===r.length)return(0,fn.D)([],e);const u=new Zr.y(function Je(n,e,t=W.y){return r=>{et(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)et(e,()=>{const b=(0,fn.D)(n[w],e);let x=!1;b.subscribe((0,Jn.x)(r,N=>{u[w]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Ur(s,l):W.y));return t?u.pipe(Zo(t)):u}function et(n,e,t){n?(0,Te.f)(t,n,e):e()}var yn=F(8189);function ac(...n){return function gs(){return(0,yn.J)(1)}()((0,fn.D)(n,(0,ro.yG)(n)))}function ep(n){return new Zr.y(e=>{(0,Zi.Xf)(n()).subscribe(e)})}var tp=F(9635),uc=F(576);function cc(n,e){const t=(0,uc.m)(n)?n:()=>n,r=s=>s.error(t());return new Zr.y(e?s=>e.schedule(r,0,s):r)}var fo=F(515),np=F(727),Ar=F(4482);function wl(){return(0,Ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class rp extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new np.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=np.w0.EMPTY)}return e}refCount(){return wl()(this)}}function Xt(n,e){return(0,Ar.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,Jn.x)(r,w=>{s?.unsubscribe();let b=0;const x=u++;(0,Zi.Xf)(n(w,x)).subscribe(s=(0,Jn.x)(r,N=>r.next(e?e(w,N,x,b++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function po(n){return n<=0?()=>fo.E:(0,Ar.e)((e,t)=>{let r=0;e.subscribe((0,Jn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function El(...n){const e=(0,ro.yG)(n);return(0,Ar.e)((t,r)=>{(e?ac(n,t,e):ac(n,t)).subscribe(r)})}function ms(n,e){return(0,Ar.e)((t,r)=>{let s=0;t.subscribe((0,Jn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var vn=F(5577);function lc(n){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Dv(n=SC){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function SC(){return new U}function Wa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((s,u)=>n(s,u,r)):W.y,po(1),t?lc(e):Dv(()=>new U))}function dc(n,e){return(0,uc.m)(e)?(0,vn.z)(n,e,1):(0,vn.z)(n,1)}var fi=F(8505);function Ka(n){return(0,Ar.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Jn.x)(t,void 0,void 0,l=>{u=(0,Zi.Xf)(n(l,Ka(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function AC(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,Jn.x)(l,x=>{const N=b++;w=m?n(w,x,N):(m=!0,x),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}function sh(n,e){return(0,Ar.e)(AC(n,e,arguments.length>=2,!0))}function Cv(n){return n<=0?()=>fo.E:(0,Ar.e)((e,t)=>{let r=[];e.subscribe((0,Jn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function ww(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ms((s,u)=>n(s,u,r)):W.y,Cv(1),t?lc(e):Dv(()=>new U))}function bv(n){return(0,Ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const kt="primary",ys=Symbol("RouteTitle");class RC{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oh(n){return new RC(n)}function zA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function go(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!NC(n[s],e[s]))return!1;return!0}function NC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function mo(n){return Array.prototype.concat.apply([],n)}function em(n){return n.length>0?n[n.length-1]:null}function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Za(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,fn.D)(Promise.resolve(n)):f(n)}const PC={exact:function Av(n,e,t){if(!Cl(n.segments,e.segments)||!sp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Av(n.children[r],e.children[r],t))return!1;return!0},subset:Il},Iw={exact:function Sv(n,e){return go(n,e)},subset:function WA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NC(n[t],e[t]))},ignored:()=>!0};function tm(n,e,t){return PC[t.paths](n.root,e.root,t.matrixParams)&&Iw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Il(n,e,t){return nm(n,e,e.segments,t)}function nm(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Cl(s,t)||e.hasChildren()||!sp(s,t,r))}if(n.segments.length===t.length){if(!Cl(n.segments,t)||!sp(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Il(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Cl(n.segments,s)&&sp(n.segments,s,r)&&n.children[kt])&&nm(n.children[kt],e,u,r)}}function sp(n,e,t){return e.every((r,s)=>Iw[t](n[s].parameters,r.parameters))}class Dl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oh(this.queryParams)),this._queryParamMap}toString(){return Cw.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ti(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ah(this)}}class op{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oh(this.parameters)),this._parameterMap}toString(){return Mv(this)}}function Cl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Dw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new xv},providedIn:"root"}),n})();class xv{parse(e){const t=new Rv(e);return new Dl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uh(e.root,!0)}`,r=function LC(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${im(t)}=${im(s)}`).join("&"):`${im(t)}=${im(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function FC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Cw=new xv;function ah(n){return n.segments.map(e=>Mv(e)).join("/")}function uh(n,e){if(!n.hasChildren())return ah(n);if(e){const t=n.children[kt]?uh(n.children[kt],!1):"",r=[];return ti(n.children,(s,u)=>{u!==kt&&r.push(`${u}:${uh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kC(n,e){let t=[];return ti(n.children,(r,s)=>{s===kt&&(t=t.concat(e(r,s)))}),ti(n.children,(r,s)=>{s!==kt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===kt?[uh(n.children[kt],!1)]:[`${s}:${uh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${ah(n)}/${t[0]}`:`${ah(n)}/(${t.join("//")})`}}function rm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function im(n){return rm(n).replace(/%3B/gi,";")}function sm(n){return rm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ap(n){return decodeURIComponent(n)}function hc(n){return ap(n.replace(/\+/g,"%20"))}function Mv(n){return`${sm(n.path)}${function bw(n){return Object.keys(n).map(e=>`;${sm(e)}=${sm(n[e])}`).join("")}(n.parameters)}`}const KA=/^[^\/()?;=#]+/;function bl(n){const e=n.match(KA);return e?e[0]:""}const VC=/^[^=?&#]+/,Sw=/^[^&#]+/;class Rv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Bt(e,t)),r}parseSegment(){const e=bl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new op(ap(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=bl(this.remaining);s&&(r=s,this.capture(r))}e[ap(t)]=ap(r)}parseQueryParam(e){const t=function Tw(n){const e=n.match(VC);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Aw(n){const e=n.match(Sw);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=hc(t),u=hc(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bl(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[kt]:new Bt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function om(n){return n.segments.length>0?new Bt([],{[kt]:n}):n}function Tl(n){const e={};for(const r of Object.keys(n.children)){const u=Tl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function am(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function fc(n){return n instanceof Dl}function BC(n,e,t,r,s){if(0===t.length)return lh(e.root,e.root,e.root,r,s);const u=function Ov(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new um(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return ti(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new um(t,e,r)}(t);return u.toRoot()?lh(e.root,e.root,new Bt([],{}),r,s):function l(w){const b=function jC(n,e,t,r){if(n.isAbsolute)return new dp(e.root,!0,0);if(-1===r)return new dp(t,t===e.root,0);return function kv(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new g.vHH(4005,!1);s=r.segments.length}return new dp(r,!1,s-u)}(t,r+(ch(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),x=b.processChildren?Ni(b.segmentGroup,b.index,u.commands):Fv(b.segmentGroup,b.index,u.commands);return lh(e.root,b.segmentGroup,x,r,s)}(n.snapshot?._lastPathIndex)}function ch(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lp(n){return"object"==typeof n&&null!=n&&n.outlets}function lh(n,e,t,r,s){let l,u={};r&&ti(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(x=>`${x}`):`${w}`}),l=n===e?t:Pv(n,e,t);const m=om(Tl(l));return new Dl(m,u,s)}function Pv(n,e,t){const r={};return ti(n.children,(s,u)=>{r[u]=s===e?t:Pv(s,e,t)}),new Bt(n.segments,r)}class um{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ch(r[0]))throw new g.vHH(4003,!1);const s=r.find(lp);if(s&&s!==em(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Fv(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Ni(n,e,t);const r=function HC(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(lp(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Rw(w,b,l))return u;r+=2}else{if(!Rw(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new Bt(n.segments.slice(r.pathIndex),n.children),Ni(u,0,s)}return r.match&&0===s.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?cm(n,e,t):r.match?Ni(n,0,s):cm(n,e,t)}function Ni(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function $C(n){return lp(n[0])?n[0].outlets:{[kt]:n}}(t),s={};return ti(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=Fv(n.children[l],e,u))}),ti(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Bt(n.segments,s)}}function cm(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(lp(u)){const w=GC(u.outlets);return new Bt(r,w)}if(0===s&&ch(t[0])){r.push(new op(n.segments[e].path,Mw(t[0]))),s++;continue}const l=lp(u)?u.outlets[kt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&ch(m)?(r.push(new op(l,Mw(m))),s+=2):(r.push(new op(l,{})),s++)}return new Bt(r,{})}function GC(n){const e={};return ti(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cm(new Bt([],{}),0,t))}),e}function Mw(n){const e={};return ti(n,(t,r)=>e[r]=`${t}`),e}function Rw(n,e,t){return n==t.path&&go(e,t.parameters)}class Ya{constructor(e,t){this.id=e,this.url=t}}class lm extends Ya{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sl extends Ya{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dm extends Ya{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nw extends Ya{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ft extends Ya{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pw extends Ya{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ow extends Ya{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kw extends Ya{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zC extends Ya{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qC{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WC{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KC{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Lv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qa(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Qa(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Vv(e,this._root).map(t=>t.value)}}function Qa(n,e){if(n===e.value)return e;for(const t of e.children){const r=Qa(n,t);if(r)return r}return null}function Vv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vv(n,t);if(r.length)return r.unshift(e),r}return[]}class yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Uw extends Lv{constructor(e,t){super(e),this.snapshot=t,gc(this,e)}toString(){return this.snapshot.toString()}}function QC(n,e){const t=function ZA(n,e){const l=new Uv([],{},{},"",{},kt,e,null,n.root,-1,{});return new $w("",new yo(l,[]))}(n,e),r=new T([new op("",{})]),s=new T({}),u=new T({}),l=new T({}),m=new T(""),w=new dh(r,s,l,m,u,kt,e,t.root);return w.snapshot=t.root,new Uw(new yo(w,[]),t)}class dh{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,At.U)(b=>b[ys]))??f(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>oh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>oh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bw(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function jw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Uv{constructor(e,t,r,s,u,l,m,w,b,x,N,B){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[ys],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=x,this._correctedLastPathIndex=B??x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $w extends Lv{constructor(e,t){super(t),this.url=e,gc(this,t)}toString(){return Hw(this._root)}}function gc(n,e){e.value._routerState=n,e.children.forEach(t=>gc(n,t))}function Hw(n){const e=n.children.length>0?` { ${n.children.map(Hw).join(", ")} } `:"";return`${n.value}${e}`}function hm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,go(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),go(e.params,t.params)||n.params.next(t.params),function qA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!go(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),go(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hh(n,e){const t=go(n.params,e.params)&&function OC(n,e){return Cl(n,e)&&n.every((t,r)=>go(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hh(n.parent,e.parent))}function fh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function XC(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return fh(n,r,s);return fh(n,r)})}(n,e,t);return new yo(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>fh(n,m)),l}}const r=function eb(n){return new dh(new T(n.url),new T(n.params),new T(n.queryParams),new T(n.fragment),new T(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>fh(n,u));return new yo(r,s)}}const Bv="ngNavigationCancelingError";function Gw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=zw(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function zw(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Bv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function jv(n){return qw(n)&&fc(n.url)}function qw(n){return n&&n[Bv]}class Ww{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ph,this.attachRef=null}}let ph=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ww,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gh=!1;let Kw=(()=>{class n{constructor(t,r,s,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=s||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,gh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,gh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,gh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,gh);this._activatedRoute=t;const s=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new $v(t,m,s.injector);if(r&&function tb(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ph),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class $v{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dh?this.route:e===ph?this.childContexts:this.parent.get(e,t)}}let Zw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Kw],encapsulation:2}),n})();function Al(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hp(n){const e=n.children&&n.children.map(hp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=Zw),t}function vs(n){return n.outlet||kt}function pm(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}function gm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class YA{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=pc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),ti(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=pc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=pc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=pc(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new ZC(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Lw(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(hm(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),hm(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=gm(s.snapshot),w=m?.get(g._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class fp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xl{constructor(e,t){this.component=e,this.route=t}}function zv(n,e,t){const r=n._root;return mm(r,e?e._root:null,t,[r.value])}function mc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function mm(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=pc(e);return n.children.forEach(l=>{(function sb(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function ob(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Cl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cl(n.url,e.url)||!go(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hh(n,e)||!go(n.queryParams,e.queryParams);default:return!hh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new fp(r)):(u.data=l.data,u._resolvedData=l._resolvedData),mm(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new xl(m.outlet.component,l))}else l&&pp(e,m,s),s.canActivateChecks.push(new fp(r)),mm(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),ti(u,(l,m)=>pp(l,t.getContext(m),s)),s}function pp(n,e,t){const r=pc(n),s=n.value;ti(r,(u,l)=>{pp(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new xl(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function gp(n){return"function"==typeof n}function eE(n){return n instanceof U||"EmptyError"===n?.name}const Kv=Symbol("INITIAL_VALUE");function mp(){return Xt(n=>Ue(n.map(e=>e.pipe(po(1),El(Kv)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===Kv)return Kv;if(!1===t||t instanceof Dl)return t}return!0}),ms(e=>e!==Kv),po(1)))}function tE(n){return(0,tp.z)((0,fi.b)(e=>{if(fc(e))throw Gw(0,e)}),(0,At.U)(e=>!0===e))}const yp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yv(n,e,t,r,s){const u=vp(n,e,t);return u.matched?function nE(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?f(s.map(l=>{const m=mc(l,n);return Za(function Xw(n){return n&&gp(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(mp(),tE()):f(!0)}(r=Al(e,r),e,t).pipe((0,At.U)(l=>!0===l?u:{...yp})):f(u)}function vp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||zA)(t,n,e);if(!s)return{...yp};const u={};ti(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function ym(n,e,t,r,s="corrected"){if(t.length>0&&function ub(n,e,t){return t.some(r=>_p(n,e,r)&&vs(r)!==kt)}(n,t,r)){const l=new Bt(e,function rE(n,e,t,r){const s={};s[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&vs(u)!==kt){const l=new Bt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[vs(u)]=l}return s}(n,e,r,new Bt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function cb(n,e,t){return t.some(r=>_p(n,e,r))}(n,t,r)){const l=new Bt(n.segments,function vc(n,e,t,r,s,u){const l={};for(const m of r)if(_p(n,t,m)&&!s[vs(m)]){const w=new Bt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[vs(m)]=w}return{...s,...l}}(n,e,t,r,n.children,s));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function _p(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function iE(n,e,t,r){return!!(vs(n)===r||r!==kt&&_p(e,t,n))&&("**"===n.path||vp(e,n,t).matched)}function sE(n,e,t){return 0===e.length&&!n.children[t]}const Ml=!1;class Xa{constructor(e){this.segmentGroup=e||null}}class vm{constructor(e){this.urlTree=e}}function sa(n){return cc(new Xa(n))}function _m(n){return cc(new vm(n))}class Qv{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=ym(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,kt).pipe((0,At.U)(u=>this.createUrlTree(Tl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ka(u=>{if(u instanceof vm)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Xa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,kt).pipe((0,At.U)(s=>this.createUrlTree(Tl(s),e.queryParams,e.fragment))).pipe(Ka(s=>{throw s instanceof Xa?this.noMatchError(s):s}))}noMatchError(e){return new g.vHH(4002,Ml)}createUrlTree(e,t,r){const s=om(e);return new Dl(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,fn.D)(s).pipe(dc(u=>{const l=r.children[u],m=pm(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,At.U)(w=>({segment:w,outlet:u})))}),sh((u,l)=>(u[l.outlet]=l.segment,u),{}),ww())}expandSegment(e,t,r,s,u,l){return(0,fn.D)(r).pipe(dc(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(Ka(b=>{if(b instanceof Xa)return f(null);throw b}))),Wa(m=>!!m),Ka((m,w)=>{if(eE(m))return sE(t,s,u)?f(new Bt([],{})):sa(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return iE(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):sa(t):sa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_m(u):this.lineralizeSegments(r,u).pipe((0,vn.z)(l=>{const m=new Bt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:x}=vp(t,s,u);if(!m)return sa(t);const N=this.applyRedirectCommands(w,s.redirectTo,x);return s.redirectTo.startsWith("/")?_m(N):this.lineralizeSegments(s,N).pipe((0,vn.z)(B=>this.expandSegment(e,t,r,B.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Al(r,e),r.loadChildren?(r._loadedRoutes?f({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Bt(s,{})))):f(new Bt(s,{}))):Yv(t,r,s,e).pipe(Xt(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,vn.z)(x=>{const N=x.injector??e,B=x.routes,{segmentGroup:Z,slicedSegments:Ee}=ym(t,m,w,B),Re=new Bt(Z.segments,Z.children);if(0===Ee.length&&Re.hasChildren())return this.expandChildren(N,B,Re).pipe((0,At.U)(_t=>new Bt(m,_t)));if(0===B.length&&0===Ee.length)return f(new Bt(m,{}));const Le=vs(r)===u;return this.expandSegment(N,Re,B,Ee,Le?kt:u,!0).pipe((0,At.U)(xt=>new Bt(m.concat(xt.segments),xt.children)))})):sa(t)))}getChildConfig(e,t,r){return t.children?f({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?f({routes:t._loadedRoutes,injector:t._loadedInjector}):function Zv(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?f(!0):f(s.map(l=>{const m=mc(l,n);return Za(function QA(n){return n&&gp(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(mp(),tE())}(e,t,r).pipe((0,vn.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,fi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function oE(n){return cc(zw(Ml,3))}())):f({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return f(r);if(s.numberOfChildren>1||!s.children[kt])return cc(new g.vHH(4e3,Ml));s=s.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Dl(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ti(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return ti(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Bt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new g.vHH(4001,Ml);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Xv{}class db{constructor(e,t,r,s,u,l,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=ym(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe((0,At.U)(t=>{if(null===t)return null;const r=new Uv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new yo(r,t),u=new $w(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Bw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,fn.D)(Object.keys(r.children)).pipe(dc(s=>{const u=r.children[s],l=pm(t,s);return this.processSegmentGroup(e,l,u,s)}),sh((s,u)=>s&&u?(s.push(...u),s):null),function xC(n,e=!1){return(0,Ar.e)((t,r)=>{let s=0;t.subscribe((0,Jn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),lc(null),ww(),(0,At.U)(s=>{if(null===s)return null;const u=e_(s);return function uE(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,fn.D)(t).pipe(dc(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Wa(l=>!!l),Ka(l=>{if(eE(l))return sE(r,s,u)?f([]):f(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!iE(t,r,s,u))return f(null);let l;if("**"===t.path){const m=s.length>0?em(s).parameters:{},w=t_(r)+s.length;l=f({snapshot:new Uv(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pb(t),vs(t),t.component??t._loadedComponent??null,t,Xi(r),w,dE(t),w),consumedSegments:[],remainingSegments:[]})}else l=Yv(r,t,s,e).pipe((0,At.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:x})=>{if(!m)return null;const N=t_(r)+w.length;return{snapshot:new Uv(w,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pb(t),vs(t),t.component??t._loadedComponent??null,t,Xi(r),N,dE(t),N),consumedSegments:w,remainingSegments:b}}));return l.pipe(Xt(m=>{if(null===m)return f(null);const{snapshot:w,consumedSegments:b,remainingSegments:x}=m;e=t._injector??e;const N=t._loadedInjector??e,B=function hb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:Ee}=ym(r,b,x,B.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===Ee.length&&Z.hasChildren())return this.processChildren(N,B,Z).pipe((0,At.U)(Le=>null===Le?null:[new yo(w,Le)]));if(0===B.length&&0===Ee.length)return f([new yo(w,[])]);const Re=vs(t)===u;return this.processSegment(N,B,Z,Ee,Re?kt:u).pipe((0,At.U)(Le=>null===Le?null:[new yo(w,Le)]))}))}}function cE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function e_(n){const e=[],t=new Set;for(const r of n){if(!cE(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=e_(r.children);e.push(new yo(r.value,s))}return e.filter(r=>!t.has(r))}function Xi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function t_(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function pb(n){return n.data||{}}function dE(n){return n.resolve||{}}function pE(n){return"string"==typeof n.title||null===n.title}function Em(n){return Xt(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,At.U)(()=>e)):f(e)})}let gE=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===kt);return r}getResolvedTitleForRoute(t){return t.data[ys]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(mE)},providedIn:"root"}),n})(),mE=(()=>{class n extends gE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Na))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yE{}class oa extends class _b{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Im=new g.OlP("",{providedIn:"root",factory:()=>({})}),_E=new g.OlP("ROUTES");let Dm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return f(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Za(t.loadComponent()).pipe((0,fi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),bv(()=>{this.componentLoaders.delete(t)})),s=new rp(r,()=>new _.x).pipe(wl());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return f({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,x=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=mo(w.get(_E,[],g.XFs.Self|g.XFs.Optional)));return{routes:b.map(hp),injector:w}}),bv(()=>{this.childrenLoaders.delete(r)})),l=new rp(u,()=>new _.x).pipe(wl());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Za(t()).pipe((0,vn.z)(r=>r instanceof g.YKP||Array.isArray(r)?f(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wb{}class Eb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function i_(n){throw n}function Ib(n,e,t){return e.parse("/")}const Db={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ep(){const n=(0,g.f3M)(Dw),e=(0,g.f3M)(ph),t=(0,g.f3M)(Oe),r=(0,g.f3M)(g.zs3),s=(0,g.f3M)(g.Sil),u=(0,g.f3M)(_E,{optional:!0})??[],l=(0,g.f3M)(Im,{optional:!0})??{},m=(0,g.f3M)(mE),w=(0,g.f3M)(gE,{optional:!0}),b=(0,g.f3M)(wb,{optional:!0}),x=(0,g.f3M)(yE,{optional:!0}),N=new pi(null,n,e,t,r,s,mo(u));return b&&(N.urlHandlingStrategy=b),x&&(N.routeReuseStrategy=x),N.titleStrategy=w??m,function s_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,N),N}let pi=(()=>{class n{constructor(t,r,s,u,l,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _.x,this.errorHandler=i_,this.malformedUriErrorHandler=Ib,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>f(void 0),this.urlHandlingStrategy=new Eb,this.routeReuseStrategy=new oa,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Dm),this.configLoader.onLoadEndListener=B=>this.triggerEvent(new Fw(B)),this.configLoader.onLoadStartListener=B=>this.triggerEvent(new qC(B)),this.ngModule=l.get(g.h0i),this.console=l.get(g.c2e);const N=l.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function ip(){return new Dl(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=QC(this.currentUrlTree,this.rootComponentType),this.transitions=new T({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ms(s=>0!==s.id),(0,At.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xt(s=>{let u=!1,l=!1;return f(s).pipe((0,fi.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xt(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Cb(m.source)&&(this.browserUrlTree=m.extractedUrl),f(m).pipe(Xt(N=>{const B=this.transitions.getValue();return r.next(new lm(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),B!==this.transitions.getValue()?fo.E:Promise.resolve(N)}),function Jv(n,e,t,r){return Xt(s=>function aE(n,e,t,r,s){return new Qv(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,At.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,fi.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},s.urlAfterRedirects=N.urlAfterRedirects}),function n_(n,e,t,r,s,u){return(0,vn.z)(l=>function ax(n,e,t,r,s,u,l="emptyOnly",m="legacy"){return new db(n,e,t,r,s,l,m,u).recognize().pipe(Xt(w=>null===w?function lb(n){return new Zr.y(e=>e.error(n))}(new Xv):f(w)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,s,u).pipe((0,At.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,fi.b)(N=>{if(s.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const B=new Ft(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(B)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:Z,source:Ee,restoredState:Re,extras:Le}=m,pt=new lm(B,this.serializeUrl(Z),Ee,Re);r.next(pt);const xt=QC(Z,this.rootComponentType).snapshot;return f(s={...m,targetSnapshot:xt,urlAfterRedirects:Z,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),fo.E}),(0,fi.b)(m=>{const w=new Pw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,At.U)(m=>s={...m,guards:zv(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function ex(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?f({...t,guardsResult:!0}):function tx(n,e,t,r){return(0,fn.D)(n).pipe((0,vn.z)(s=>function yc(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?f(u.map(m=>{const w=gm(e)??s,b=mc(m,w);return Za(function Jw(n){return n&&gp(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Wa())})).pipe(mp()):f(!0)}(s.component,s.route,t,e,r)),Wa(s=>!0!==s,!0))}(l,r,s,n).pipe((0,vn.z)(m=>m&&function Qw(n){return"boolean"==typeof n}(m)?function nx(n,e,t,r){return(0,fn.D)(e).pipe(dc(s=>ac(function ix(n,e){return null!==n&&e&&e(new WC(n)),f(!0)}(s.route.parent,r),function rx(n,e){return null!==n&&e&&e(new KC(n)),f(!0)}(s.route,r),function ox(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function qv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ep(()=>f(l.guards.map(w=>{const b=gm(l.node)??t,x=mc(w,b);return Za(function JA(n){return n&&gp(n.canActivateChild)}(x)?x.canActivateChild(r,n):b.runInContext(()=>x(r,n))).pipe(Wa())})).pipe(mp())));return f(u).pipe(mp())}(n,s.path,t),function sx(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return f(!0);const s=r.map(u=>ep(()=>{const l=gm(e)??t,m=mc(u,l);return Za(function ab(n){return n&&gp(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Wa())}));return f(s).pipe(mp())}(n,s.route,t))),Wa(s=>!0!==s,!0))}(r,u,n,e):f(m)),(0,At.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,fi.b)(m=>{if(s.guardsResult=m.guardsResult,fc(m.guardsResult))throw Gw(0,m.guardsResult);const w=new Ow(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),ms(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Em(m=>{if(m.guards.canActivateChecks.length)return f(m).pipe((0,fi.b)(w=>{const b=new kw(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Xt(w=>{let b=!1;return f(w).pipe(function hE(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return f(t);let u=0;return(0,fn.D)(s).pipe(dc(l=>function gb(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!pE(s)&&(u[ys]=s.title),function mb(n,e,t,r){const s=function yb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return f({});const u={};return(0,fn.D)(s).pipe((0,vn.z)(l=>function fE(n,e,t,r){const s=gm(e)??r,u=mc(n,s);return Za(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Wa(),(0,fi.b)(m=>{u[l]=m}))),Cv(1),function MC(n){return(0,At.U)(()=>n)}(u),Ka(l=>eE(l)?fo.E:cc(l)))}(u,n,e,r).pipe((0,At.U)(l=>(n._resolvedData=l,n.data=Bw(n,t).resolve,s&&pE(s)&&(n.data[ys]=s.title),null)))}(l.route,r,n,e)),(0,fi.b)(()=>u++),Cv(1),(0,vn.z)(l=>u===s.length?f(t):fo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,fi.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,fi.b)(w=>{const b=new zC(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),Em(m=>{const w=b=>{const x=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,fi.b)(N=>{b.component=N}),(0,At.U)(()=>{})));for(const N of b.children)x.push(...w(N));return x};return Ue(w(m.targetSnapshot.root)).pipe(lc(),po(1))}),Em(()=>this.afterPreactivation()),(0,At.U)(m=>{const w=function JC(n,e,t){const r=fh(n,e._root,t?t._root:void 0);return new Uw(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:w}}),(0,fi.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new YA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,fi.b)({next(){u=!0},complete(){u=!0}}),bv(()=>{u||l||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ka(m=>{if(l=!0,qw(m)){jv(m)||(this.navigated=!0,this.restoreHistory(s,!0));const w=new dm(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(w),jv(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cb(s.source)};this.scheduleNavigation(b,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new Nw(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(w);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return fo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(hp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=s||this.routerState.root,x=w?this.currentUrlTree.fragment:l;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),BC(b,this.currentUrlTree,t,N,x??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=fc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function o_(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...Db}:!1===r?{...bm}:r,fc(t))return tm(this.currentUrlTree,t,s);const u=this.parseUrl(t);return tm(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Sl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b;l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((B,Z)=>{m=B,w=Z});const x=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),N=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:x,targetPageId:N,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new dm(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Ep()},providedIn:"root"}),n})();function Cb(n){return"imperative"!==n}class Am{}let xm=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ms(t=>t instanceof Sl),dc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,fn.D)(s).pipe((0,yn.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):f(null);const u=s.pipe((0,vn.z)(l=>null===l?f(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([u,l]).pipe((0,yn.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pi),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Am),g.LFG(Dm))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rl=new g.OlP("");let IE=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof YC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new YC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function yh(n,e){return{\u0275kind:n,\u0275providers:e}}function Nl(n){return[{provide:_E,multi:!0,useValue:n}]}function Tb(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(pi),s=n.get(CE);1===n.get(bE)&&r.initialNavigation(),n.get(u_,null,g.XFs.Optional)?.setUpPreloading(),n.get(Rl,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const CE=new g.OlP("",{factory:()=>new _.x}),bE=new g.OlP("",{providedIn:"root",factory:()=>1});const u_=new g.OlP("");function c_(n){return yh(0,[{provide:u_,useExisting:xm},{provide:Am,useExisting:n}])}const TE=new g.OlP("ROUTER_FORROOT_GUARD"),Mb=[Oe,{provide:Dw,useClass:xv},{provide:pi,useFactory:Ep},ph,{provide:dh,useFactory:function DE(n){return n.routerState.root},deps:[pi]},Dm];function Rb(){return new g.PXZ("Router",pi)}let SE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Mb,[],Nl(t),{provide:TE,useFactory:dx,deps:[[pi,new g.FiY,new g.tp0]]},{provide:Im,useValue:r||{}},r?.useHash?{provide:ge,useClass:gt}:{provide:ge,useClass:ut},{provide:Rl,useFactory:()=>{const n=(0,g.f3M)(pi),e=(0,g.f3M)(ss),t=(0,g.f3M)(Im);return t.scrollOffset&&e.setOffset(t.scrollOffset),new IE(n,e,t)}},r?.preloadingStrategy?c_(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Rb},r?.initialNavigation?Ip(r):[],[{provide:AE,useFactory:Tb},{provide:g.tb,multi:!0,useExisting:AE}]]}}static forChild(t){return{ngModule:n,providers:[Nl(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(TE,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Zw]}),n})();function dx(n){return"guarded"}function Ip(n){return["disabled"===n.initialNavigation?yh(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(pi);return()=>{e.setUpLocationChangeListener()}}},{provide:bE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yh(2,[{provide:bE,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(pi),m=e.get(CE);(function s(u){e.get(pi).events.pipe(ms(m=>m instanceof Sl||m instanceof dm||m instanceof Nw),(0,At.U)(m=>m instanceof Sl||m instanceof dm&&(0===m.code||1===m.code)&&null),ms(m=>null!==m),po(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?f(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const AE=new g.OlP(""),Ob=[];let aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[SE.forRoot(Ob),SE]}),n})();var Dp=F(4986),on=F(4976);function eu(){return(0,Ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function $s(n,e){return n===e}var Qe,_s=F(2011),_h=(F(3042),F(3942)),ve=F(5861),Hs=F(6881),tu=F(4859),ws=F(1877),zt=F(2090),wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gi={},Nm=Nm||{},Ot=wh||self;function bp(){}function Tp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Eh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pm="closure_uid_"+(1e9*Math.random()>>>0),RE=0;function kb(n,e,t){return n.call.apply(n.bind,arguments)}function Fb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ni(n,e,t){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kb:Fb).apply(null,arguments)}function Om(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function ua(){this.s=this.s,this.o=this.o}ua.prototype.s=!1,ua.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function ME(n){Object.prototype.hasOwnProperty.call(n,Pm)&&n[Pm]||(n[Pm]=++RE)}(this)},ua.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ih(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sp(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Tp(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Br(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var Lb=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",bp,e),Ot.removeEventListener("test",bp,e)}catch{}return n}();function Dh(n){return/^[\s\xa0]*$/.test(n)}var km=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fm(n,e){return n<e?-1:n>e?1:0}function Ap(){var n=Ot.navigator;return n&&(n=n.userAgent)?n:""}function Gs(n){return-1!=Ap().indexOf(n)}function Lm(n){return Lm[" "](n),n}function d_(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Lm[" "]=bp;var Um,n,h_=Gs("Opera"),Ol=Gs("Trident")||Gs("MSIE"),PE=Gs("Edge"),Vm=PE||Ol,f_=Gs("Gecko")&&!(-1!=Ap().toLowerCase().indexOf("webkit")&&!Gs("Edge"))&&!(Gs("Trident")||Gs("MSIE"))&&!Gs("Edge"),OE=-1!=Ap().toLowerCase().indexOf("webkit")&&!Gs("Edge");function p_(){var n=Ot.document;return n?n.documentMode:void 0}e:{var g_="",m_=(n=Ap(),f_?/rv:([^\);]+)(\)|;)/.exec(n):PE?/Edge\/([\d\.]+)/.exec(n):Ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):OE?/WebKit\/(\S+)/.exec(n):h_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(m_&&(g_=m_?m_[1]:""),Ol){var Bm=p_();if(null!=Bm&&Bm>parseFloat(g_)){Um=String(Bm);break e}}Um=g_}var y_={},FE=Ot.document&&Ol&&(p_()||parseInt(Um,10))||void 0;function Ch(n,e){if(Br.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(f_){e:{try{Lm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ch.$.h.call(this)}}xr(Ch,Br);var LE={2:"touch",3:"pen",4:"mouse"};Ch.prototype.h=function(){Ch.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bh="closure_listenable_"+(1e6*Math.random()|0),VE=0;function hx(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++VE,this.fa=this.ia=!1}function $m(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function __(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w_(n){const e={};for(const t in n)e[t]=n[t];return e}const UE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _r(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<UE.length;u++)t=UE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xp(n){this.src=n,this.g={},this.h=0}function E_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=NE(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&($m(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function I_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}xp.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=I_(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new hx(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Hm="closure_lm_"+(1e6*Math.random()|0),D_={};function C_(n,e,t,r,s){if(r&&r.once)return BE(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)C_(n,e[u],t,r,s);return null}return t=Mp(t),n&&n[bh]?n.O(e,t,Eh(r)?!!r.capture:!!r,s):b_(n,e,t,!1,r,s)}function b_(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Eh(s)?!!s.capture:!!s,m=GE(n);if(m||(n[Hm]=m=new xp(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function Th(){const e=HE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Lb||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent($E(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function BE(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)BE(n,e[u],t,r,s);return null}return t=Mp(t),n&&n[bh]?n.P(e,t,Eh(r)?!!r.capture:!!r,s):b_(n,e,t,!0,r,s)}function jE(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)jE(n,e[u],t,r,s);else r=Eh(r)?!!r.capture:!!r,t=Mp(t),n&&n[bh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=I_(u=n.g[e],t,r,s))&&($m(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=GE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=I_(e,t,r,s)),(t=-1<n?e[n]:null)&&Gm(t))}function Gm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[bh])E_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($E(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=GE(e))?(E_(t,n),0==t.h&&(t.src=null,e[Hm]=null)):$m(n)}}}function $E(n){return n in D_?D_[n]:D_[n]="on"+n}function HE(n,e){if(n.fa)n=!0;else{e=new Ch(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Gm(n),n=t.call(r,e)}return n}function GE(n){return(n=n[Hm])instanceof xp?n:null}var zm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mp(n){return"function"==typeof n?n:(n[zm]||(n[zm]=function(e){return n.handleEvent(e)}),n[zm])}function Sn(){ua.call(this),this.i=new xp(this),this.S=this,this.J=null}function ri(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Br(e,n);else if(e instanceof Br)e.target=e.target||n;else{var s=e;_r(e=new Br(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=qm(l,r,!0,e)&&s}if(s=qm(l=e.g=n,r,!0,e)&&s,s=qm(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=qm(l=e.g=t[u],r,!1,e)&&s}function qm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&E_(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}xr(Sn,ua),Sn.prototype[bh]=!0,Sn.prototype.removeEventListener=function(n,e,t,r){jE(this,n,e,t,r)},Sn.prototype.N=function(){if(Sn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$m(t[r]);delete n.g[e],n.h--}}this.J=null},Sn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Sn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zs=Ot.JSON.stringify;function vo(){var n=Sh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var S_,T_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zE,n=>n.reset());class zE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Vb(n){Ot.setTimeout(()=>{throw n},0)}function qE(n,e){S_||function Ub(){var n=Ot.Promise.resolve(void 0);S_=function(){n.then(Bb)}}(),Rp||(S_(),Rp=!0),Sh.add(n,e)}var Rp=!1,Sh=new class _o{constructor(){this.h=this.g=null}add(e,t){const r=T_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Bb(){for(var n;n=vo();){try{n.h.call(n.g)}catch(t){Vb(t)}var e=T_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rp=!1}function Np(n,e){Sn.call(this),this.h=n||1,this.g=e||Ot,this.j=ni(this.qb,this),this.l=Date.now()}function A_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Wm(n,e,t){if("function"==typeof n)t&&(n=ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function x_(n){n.g=Wm(()=>{n.g=null,n.i&&(n.i=!1,x_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xr(Np,Sn),(Qe=Np.prototype).ga=!1,Qe.T=null,Qe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ri(this,"tick"),this.ga&&(A_(this),this.start()))}},Qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.N=function(){Np.$.N.call(this),A_(this),delete this.g};class Km extends ua{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:x_(this)}N(){super.N(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pp(n){ua.call(this),this.h=n,this.g={}}xr(Pp,ua);var M_=[];function R_(n,e,t,r){Array.isArray(t)||(t&&(M_[0]=t.toString()),t=M_);for(var s=0;s<t.length;s++){var u=C_(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zm(n){__(n.g,function(e,t){this.g.hasOwnProperty(t)&&Gm(e)},n),n.g={}}function Ah(){this.g=!0}function kl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function YE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return zs(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Pp.prototype.N=function(){Pp.$.N.call(this),Zm(this)},Pp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ah.prototype.Ea=function(){this.g=!1},Ah.prototype.info=function(){};var wc={},N_=null;function Op(){return N_=N_||new Sn}function QE(n){Br.call(this,wc.Ta,n)}function kp(n){const e=Op();ri(e,new QE(e))}function JE(n,e){Br.call(this,wc.STAT_EVENT,n),this.stat=e}function Pi(n){const e=Op();ri(e,new JE(e,n))}function XE(n,e){Br.call(this,wc.Ua,n),this.size=e}function Fp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}wc.Ta="serverreachability",xr(QE,Br),wc.STAT_EVENT="statevent",xr(JE,Br),wc.Ua="timingevent",xr(XE,Br);var Ym={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function P_(){}function nI(){}P_.prototype.h=null;var F_,Lp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function O_(){Br.call(this,"d")}function k_(){Br.call(this,"c")}function Qm(){}function Vp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Pp(this),this.P=iI,this.V=new Np(n=Vm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new rI}function rI(){this.i=null,this.g="",this.h=!1}xr(O_,Br),xr(k_,Br),xr(Qm,P_),Qm.prototype.g=function(){return new XMLHttpRequest},Qm.prototype.i=function(){return{}},F_=new Qm;var iI=45e3,Jm={},Up={};function Xm(n,e,t){n.L=1,n.v=nu(Ic(e)),n.s=t,n.S=!0,L_(n,null)}function L_(n,e){n.G=Date.now(),xh(n),n.A=Ic(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),lI(t.i,"t",r),n.C=0,t=n.l.I,n.h=new rI,n.g=TI(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Km(ni(n.Pa,n,n.g),n.O)),R_(n.U,n.g,"readystatechange",n.nb),e=n.I?w_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),kp(),function WE(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var x=b[0];b=b[1];var N=x.split("_");l=2<=N.length&&"type"==N[1]?l+(x+"=")+b+"&":l+(x+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function V_(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function U_(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=sI(n,t),s==Up){4==e&&(n.o=4,Pi(14),r=!1),kl(n.j,n.m,null,"[Incomplete Response]");break}if(s==Jm){n.o=4,Pi(15),kl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kl(n.j,n.m,s,null),j_(n,s)}V_(n)&&s!=Up&&s!=Jm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yp(e),e.L=!0,Pi(11))):(kl(n.j,n.m,t,"[Invalid Chunked Response]"),Fl(n),wo(n))}function sI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Up:(t=Number(e.substring(t,r)),isNaN(t)?Jm:(r+=1)+t>e.length?Up:(e=e.substr(r,t),n.C=r+t,e))}function xh(n){n.Y=Date.now()+n.P,B_(n,n.P)}function B_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fp(ni(n.lb,n),e)}function Bp(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function wo(n){0==n.l.H||n.J||Y_(n.l,n)}function Fl(n){Bp(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,A_(n.V),Zm(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function j_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ry(t.h,n)))if(!n.K&&ry(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Qp(t),ay(t)}Z_(t),Pi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.M&&0==t.A&&!t.v&&(t.v=Fp(ni(t.ib,t),6e3));if(1>=Hp(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Vl(t,11)}else if((n.K||t.g==n)&&Qp(t),!Dh(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.J=b[1],t.oa=b[2];const x=b[3];null!=x&&(t.qa=x,t.j.info("VER="+t.qa));const N=b[4];null!=N&&(t.Ga=N,t.j.info("SVER="+t.Ga));const B=b[5];null!=B&&"number"==typeof B&&0<B&&(t.K=r=1.5*B,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const Ee=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ee){var u=r.h;u.g||-1==Ee.indexOf("spdy")&&-1==Ee.indexOf("quic")&&-1==Ee.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(iy(u,u.h),u.h=null))}if(r.F){const Re=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.Da=Re,Bn(r.G,r.F,Re))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=cy(r,r.I?r.oa:null,r.Y),l.K){G_(r.h,l);var m=l,w=r.K;w&&m.setTimeout(w),m.B&&(Bp(m),xh(m)),r.g=l}else K_(r);0<t.i.length&&uy(t)}else"stop"!=b[0]&&"close"!=b[0]||Vl(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Vl(t,7):W_(t):"noop"!=b[0]&&t.l&&t.l.Aa(b),t.A=0)}kp()}catch{}}function ey(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function fx(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Tp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Mh(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Tp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(Qe=Vp.prototype).setTimeout=function(n){this.P=n},Qe.nb=function(n){n=n.target;const e=this.M;e&&3==iu(n)?e.l():this.Pa(n)},Qe.Pa=function(n){try{if(n==this.g)e:{const x=iu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||Vm||this.g&&(this.h.h||this.g.ja()||vI(this.g)))){this.J||4!=x||7==e||kp(),Bp(this);var t=this.g.da();this.aa=t;t:if(V_(this)){var r=vI(this.g);n="";var s=r.length,u=4==iu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fl(this),wo(this);var l="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function KE(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dh(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Pi(12),Fl(this),wo(this);break e}kl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,j_(this,t)}this.S?(U_(this,x,l),Vm&&this.i&&3==x&&(R_(this.U,this.V,"tick",this.mb),this.V.start())):(kl(this.j,this.m,l,null),j_(this,l)),4==x&&Fl(this),this.i&&!this.J&&(4==x?Y_(this.l,this):(this.i=!1,xh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),Fl(this),wo(this)}}}catch{}},Qe.mb=function(){if(this.g){var n=iu(this.g),e=this.g.ja();this.C<e.length&&(Bp(this),U_(this,n,e),this.i&&4!=n&&xh(this))}},Qe.cancel=function(){this.J=!0,Fl(this)},Qe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ZE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(kp(),Pi(17)),Fl(this),this.o=2,wo(this)):B_(this,this.Y-n)};var jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ec){this.h=void 0!==e?e:n.h,Et(this,n.j),this.s=n.s,this.g=n.g,ty(this,n.m),this.l=n.l,e=n.i;var t=new Rh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),aI(this,t),this.o=n.o}else n&&(t=String(n).match(jb))?(this.h=!!e,Et(this,t[1]||"",!0),this.s=jp(t[2]||""),this.g=jp(t[3]||"",!0),ty(this,t[4]),this.l=jp(t[5]||"",!0),aI(this,t[6]||"",!0),this.o=jp(t[7]||"")):(this.h=!!e,this.i=new Rh(null,this.h))}function Ic(n){return new Ec(n)}function Et(n,e,t){n.j=t?jp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ty(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aI(n,e,t){e instanceof Rh?(n.i=e,function Hb(n,e){e&&!n.j&&(ru(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&($_(this,r),lI(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Dc(e,cI)),n.i=new Rh(e,n.h))}function Bn(n,e,t){n.i.set(e,t)}function nu(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ny),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ny(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dc(e,Gn,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dc(e,Gn,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dc(t,"/"==t.charAt(0)?uI:px,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dc(t,$b)),n.join("")};var Gn=/[#\/\?@]/g,px=/[#\?:]/g,uI=/[#\?]/g,cI=/[#\?@]/g,$b=/#/g;function Rh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ru(n){n.g||(n.g=new Map,n.h=0,n.i&&function oI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $_(n,e){ru(n),e=Nh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function H_(n,e){return ru(n),e=Nh(n,e),n.g.has(e)}function lI(n,e,t){$_(n,e),0<t.length&&(n.i=null,n.g.set(Nh(n,e),Ih(t)),n.h+=t.length)}function Nh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dI(n){this.l=n||Gb,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ka&&Ot.g.Ka()&&Ot.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=Rh.prototype).add=function(n,e){ru(this),this.i=null,n=Nh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){ru(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Qe.sa=function(){ru(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},Qe.Z=function(n){ru(this);let e=[];if("string"==typeof n)H_(this,n)&&(e=e.concat(this.g.get(Nh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qe.set=function(n,e){return ru(this),this.i=null,H_(this,n=Nh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var Gb=10;function hI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Hp(n){return n.h?1:n.g?n.g.size:0}function ry(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function iy(n,e){n.g?n.g.add(e):n.h=e}function G_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Ih(n.i)}function Ll(){}function Gp(){this.g=new Ll}function zb(n,e,t){const r=t||"";try{ey(n,function(s,u){let l=s;Eh(s)&&(l=zs(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function sy(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Ph(n){this.l=n.fc||null,this.j=n.ob||!1}function zp(n,e){Sn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=oy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dI.prototype.cancel=function(){if(this.i=fI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ll.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},Ll.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},xr(Ph,P_),Ph.prototype.g=function(){return new zp(this.l,this.j)},Ph.prototype.i=function(n){return function(){return n}}({}),xr(zp,Sn);var oy=0;function pI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Oh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qp(n)}function qp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=zp.prototype).open=function(n,e){if(this.readyState!=oy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qp(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oh(this)),this.readyState=oy},Qe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qp(this)),this.g&&(this.readyState=3,qp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Qe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Oh(this):qp(this),3==this.readyState&&pI(this)}},Qe.Za=function(n){this.g&&(this.response=this.responseText=n,Oh(this))},Qe.Ya=function(n){this.g&&(this.response=n,Oh(this))},Qe.ka=function(){this.g&&Oh(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Wb=Ot.JSON.parse;function sr(n){Sn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Kb,this.L=this.M=!1}xr(sr,Sn);var Kb="",gx=/^https?$/i,mx=["POST","PUT"];function Wp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mI(n),Kp(n)}function mI(n){n.F||(n.F=!0,ri(n,"complete"),ri(n,"error"))}function yI(n){if(n.h&&typeof Nm<"u"&&(!n.C[1]||4!=iu(n)||2!=n.da()))if(n.v&&4==iu(n))Wm(n.La,0,n);else if(ri(n,"readystatechange"),4==iu(n)){n.h=!1;try{const m=n.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.I).match(jb)[1]||null;if(!s&&Ot.self&&Ot.self.location){var u=Ot.self.location.protocol;s=u.substr(0,u.length-1)}r=!gx.test(s?s.toLowerCase():"")}t=r}if(t)ri(n,"complete"),ri(n,"success");else{n.m=6;try{var l=2<iu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",mI(n)}}finally{Kp(n)}}}function Kp(n,e){if(n.g){kh(n);const t=n.g,r=n.C[0]?bp:null;n.g=null,n.C=null,e||ri(n,"ready");try{t.onreadystatechange=r}catch{}}}function kh(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function iu(n){return n.g?n.g.readyState:0}function vI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Kb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function _I(n){let e="";return __(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function z_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_I(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function Zp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function q_(n){this.Ga=0,this.i=[],this.j=new Ah,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zp("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zp("baseRetryDelayMs",5e3,n),this.hb=Zp("retryDelaySeedMs",1e4,n),this.eb=Zp("forwardChannelMaxRetries",2,n),this.xa=Zp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new dI(n&&n.concurrentRequestLimit),this.Ja=new Gp,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function W_(n){if(Fh(n),3==n.H){var e=n.W++,t=Ic(n.G);Bn(t,"SID",n.J),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),Lh(n,t),(e=new Vp(n,n.j,e,void 0)).L=2,e.v=nu(Ic(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=TI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xh(e)}bI(n)}function ay(n){n.g&&(Yp(n),n.g.cancel(),n.g=null)}function Fh(n){ay(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),Qp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function uy(n){hI(n.h)||n.m||(n.m=!0,qE(n.Na,n),n.C=0)}function EI(n,e){var t;t=e?e.m:n.W++;const r=Ic(n.G);Bn(r,"SID",n.J),Bn(r,"RID",t),Bn(r,"AID",n.V),Lh(n,r),n.o&&n.s&&z_(r,n.o,n.s),t=new Vp(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=II(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),iy(n.h,t),Xm(t,r,e)}function Lh(n,e){n.ma&&__(n.ma,function(t,r){Bn(e,r,t)}),n.l&&ey({},function(t,r){Bn(e,r,t)})}function II(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ni(n.l.Va,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const x=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{zb(x,l,"req"+b+"_")}catch{r&&r(x)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function K_(n){n.g||n.u||(n.ba=1,qE(n.Ma,n),n.A=0)}function Z_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Fp(ni(n.Ma,n),CI(n,n.A)),n.A++,0))}function Yp(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function DI(n){n.g=new Vp(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ic(n.wa);Bn(e,"RID","rpc"),Bn(e,"SID",n.J),Bn(e,"CI",n.M?"0":"1"),Bn(e,"AID",n.V),Bn(e,"TYPE","xmlhttp"),Lh(n,e),n.o&&n.s&&z_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=nu(Ic(e)),t.s=null,t.S=!0,L_(t,n)}function Qp(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function Y_(n,e){var t=null;if(n.g==e){Qp(n),Yp(n),n.g=null;var r=2}else{if(!ry(n.h,e))return;t=e.F,G_(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;ri(r=Op(),new XE(r,t)),uy(n)}else K_(n);else if(3==(s=e.o)||0==s&&0<n.ta||!(1==r&&function wI(n,e){return!(Hp(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Fp(ni(n.Na,n,e),CI(n,n.C)),n.C++,0)))}(n,e)||2==r&&Z_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Vl(n,5);break;case 4:Vl(n,10);break;case 3:Vl(n,6);break;default:Vl(n,2)}}function CI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Vl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ni(n.pb,n);t||(t=new Ec("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||Et(t,"https"),nu(t)),function qb(n,e){const t=new Ah;if(Ot.Image){const r=new Image;r.onload=Om(sy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Om(sy,t,r,"TestLoadImage: error",!1,e),r.onabort=Om(sy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Om(sy,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pi(2);n.H=0,n.l&&n.l.za(e),bI(n),Fh(n)}function bI(n){if(n.H=0,n.pa=[],n.l){const e=fI(n.h);(0!=e.length||0!=n.i.length)&&(Sp(n.pa,e),Sp(n.pa,n.i),n.h.i.length=0,Ih(n.i),n.i.length=0),n.l.ya()}}function cy(n,e,t){var r=t instanceof Ec?Ic(t):new Ec(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ty(r,r.m);else{var s=Ot.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ec(null,void 0);r&&Et(u,r),e&&(u.g=e),s&&ty(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Bn(r,t,e),Bn(r,"VER",n.qa),Lh(n,r),r}function TI(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Ha&&!n.va?new Ph({ob:!0}):n.va)).Oa(n.I),e}function Q_(){}function ly(){if(Ol&&!(10<=Number(FE)))throw Error("Environmental error: no available transport.")}function Es(n,e){Sn.call(this),this.g=new q_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Dh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vh(this)}function SI(n){O_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function AI(){k_.call(this),this.status=1}function Vh(n){this.g=n}function Eo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function J_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function _n(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(Qe=sr.prototype).Oa=function(n){this.M=n},Qe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():F_.g(),this.C=function tI(n){return n.h||(n.h=n.i())}(this.u?this.u:F_),this.g.onreadystatechange=ni(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Wp(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ot.FormData&&n instanceof Ot.FormData,!(0<=NE(mx,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kh(this),0<this.B&&((this.L=function gI(n){return Ol&&function kE(){return d_(y_,9,function(){let n=0;const e=km(String(Um)).split("."),t=km("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Fm(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Fm(0==s[2].length,0==u[2].length)||Fm(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.ua,this)):this.A=Wm(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Wp(this,u)}},Qe.ua=function(){typeof Nm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ri(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ri(this,"complete"),ri(this,"abort"),Kp(this))},Qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kp(this,!0)),sr.$.N.call(this)},Qe.La=function(){this.s||(this.G||this.v||this.l?yI(this):this.kb())},Qe.kb=function(){yI(this)},Qe.da=function(){try{return 2<iu(this)?this.g.status:-1}catch{return-1}},Qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Wb(e)}},Qe.Ia=function(){return this.m},Qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=q_.prototype).qa=8,Qe.H=1,Qe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Vp(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=w_(u),_r(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=II(this,s,e),Bn(t=Ic(this.G),"RID",n),Bn(t,"CVER",22),this.F&&Bn(t,"X-HTTP-Session-Id",this.F),Lh(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(_I(u)))+"&"+e:this.o&&z_(t,this.o,u)),iy(this.h,s),this.bb&&Bn(t,"TYPE","init"),this.P?(Bn(t,"$req",e),Bn(t,"SID","null"),s.ba=!0,Xm(s,t,null)):Xm(s,t,e),this.H=2}}else 3==this.H&&(n?EI(this,n):0==this.i.length||hI(this.h)||EI(this))},Qe.Ma=function(){if(this.u=null,DI(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Fp(ni(this.jb,this),n)}},Qe.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Pi(10),ay(this),DI(this))},Qe.ib=function(){null!=this.v&&(this.v=null,ay(this),Z_(this),Pi(19))},Qe.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Pi(2)):(this.j.info("Failed to ping google.com"),Pi(1))},(Qe=Q_.prototype).Ba=function(){},Qe.Aa=function(){},Qe.za=function(){},Qe.ya=function(){},Qe.Va=function(){},ly.prototype.g=function(n,e){return new Es(n,e)},xr(Es,Sn),Es.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Pi(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=cy(n,null,n.Y),uy(n)},Es.prototype.close=function(){W_(this.g)},Es.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zs(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&uy(e)},Es.prototype.N=function(){this.g.l=null,delete this.j,W_(this.g),delete this.g,Es.$.N.call(this)},xr(SI,O_),xr(AI,k_),xr(Vh,Q_),Vh.prototype.Ba=function(){ri(this.g,"a")},Vh.prototype.Aa=function(n){ri(this.g,new SI(n))},Vh.prototype.za=function(n){ri(this.g,new AI)},Vh.prototype.ya=function(){ri(this.g,"b")},xr(Eo,function Zb(){this.blockSize=-1}),Eo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Eo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)J_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){J_(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){J_(this,r),s=0;break}}this.h=s,this.i+=e},Eo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var xI={};function X_(n){return-128<=n&&128>n?d_(xI,n,function(e){return new _n([0|e],0>e?-1:0)}):new _n([0|n],0>n?-1:0)}function ca(n){if(isNaN(n)||!isFinite(n))return Uh;if(0>n)return Mr(ca(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=t0;return new _n(e,0)}var t0=4294967296,Uh=X_(0),n0=X_(1),dy=X_(16777216);function Io(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Is(n){return-1==n.h}function Mr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new _n(t,~n.h).add(n0)}function hy(n,e){return n.add(Mr(e))}function fy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ul(n,e){this.g=n,this.h=e}function py(n,e){if(Io(e))throw Error("division by zero");if(Io(n))return new Ul(Uh,Uh);if(Is(n))return e=py(Mr(n),e),new Ul(Mr(e.g),Mr(e.h));if(Is(e))return e=py(n,Mr(e)),new Ul(Mr(e.g),e.h);if(30<n.g.length){if(Is(n)||Is(e))throw Error("slowDivide_ only works with positive integers.");for(var t=n0,r=e;0>=r.X(n);)t=r0(t),r=r0(r);var s=Do(t,1),u=Do(r,1);for(r=Do(r,2),t=Do(t,2);!Io(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Do(r,1),t=Do(t,1)}return e=hy(n,s.R(e)),new Ul(s,e)}for(s=Uh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=ca(t)).R(e);Is(l)||0<l.X(n);)l=(u=ca(t-=r)).R(e);Io(u)&&(u=n0),s=s.add(u),n=hy(n,l)}return new Ul(s,n)}function r0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new _n(t,n.h)}function Do(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new _n(s,n.h)}(Qe=_n.prototype).ea=function(){if(Is(this))return-Mr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:t0+r)*e,e*=t0}return n},Qe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Io(this))return"0";if(Is(this))return"-"+Mr(this).toString(n);for(var e=ca(Math.pow(n,6)),t=this,r="";;){var s=py(t,e).g,u=((0<(t=hy(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Io(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Qe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Qe.X=function(n){return Is(n=hy(this,n))?-1:Io(n)?0:1},Qe.abs=function(){return Is(this)?Mr(this):this},Qe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new _n(t,-2147483648&t[t.length-1]?-1:0)},Qe.R=function(n){if(Io(this)||Io(n))return Uh;if(Is(this))return Is(n)?Mr(this).R(Mr(n)):Mr(Mr(this).R(n));if(Is(n))return Mr(this.R(Mr(n)));if(0>this.X(dy)&&0>n.X(dy))return ca(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,fy(t,2*r+2*s),t[2*r+2*s+1]+=u*w,fy(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,fy(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,fy(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new _n(t,0)},Qe.gb=function(n){return py(this,n).h},Qe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new _n(t,this.h&n.h)},Qe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new _n(t,this.h|n.h)},Qe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new _n(t,this.h^n.h)},ly.prototype.createWebChannel=ly.prototype.g,Es.prototype.send=Es.prototype.u,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,Ym.NO_ERROR=0,Ym.TIMEOUT=8,Ym.HTTP_ERROR=6,eI.COMPLETE="complete",nI.EventType=Lp,Lp.OPEN="a",Lp.CLOSE="b",Lp.ERROR="c",Lp.MESSAGE="d",Sn.prototype.listen=Sn.prototype.O,sr.prototype.listenOnce=sr.prototype.P,sr.prototype.getLastError=sr.prototype.Sa,sr.prototype.getLastErrorCode=sr.prototype.Ia,sr.prototype.getStatus=sr.prototype.da,sr.prototype.getResponseJson=sr.prototype.Wa,sr.prototype.getResponseText=sr.prototype.ja,sr.prototype.send=sr.prototype.ha,sr.prototype.setWithCredentials=sr.prototype.Oa,Eo.prototype.digest=Eo.prototype.l,Eo.prototype.reset=Eo.prototype.reset,Eo.prototype.update=Eo.prototype.j,_n.prototype.add=_n.prototype.add,_n.prototype.multiply=_n.prototype.R,_n.prototype.modulo=_n.prototype.gb,_n.prototype.compare=_n.prototype.X,_n.prototype.toNumber=_n.prototype.ea,_n.prototype.toString=_n.prototype.toString,_n.prototype.getBits=_n.prototype.D,_n.fromNumber=ca,_n.fromString=function e0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Mr(e0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ca(Math.pow(e,8)),r=Uh,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=ca(Math.pow(e,u)),r=r.R(u).add(ca(l))):r=(r=r.R(t)).add(ca(l))}return r};var MI=gi.createWebChannelTransport=function(){return new ly},Yb=gi.getStatEventTarget=function(){return Op()},RI=gi.ErrorCode=Ym,NI=gi.EventType=eI,s0=gi.Event=wc,PI=gi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},o0=gi.FetchXmlHttpFactory=Ph,gy=gi.WebChannel=nI,OI=gi.XhrIo=sr,a0=gi.Md5=Eo,Bl=gi.Integer=_n;const u0="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let jl="9.21.0";const Cc=new ws.Yd("@firebase/firestore");function c0(){return Cc.logLevel}function Pe(n,...e){if(Cc.logLevel<=ws.in.DEBUG){const t=e.map(my);Cc.debug(`Firestore (${jl}): ${n}`,...t)}}function Xn(n,...e){if(Cc.logLevel<=ws.in.ERROR){const t=e.map(my);Cc.error(`Firestore (${jl}): ${n}`,...t)}}function Co(n,...e){if(Cc.logLevel<=ws.in.WARN){const t=e.map(my);Cc.warn(`Firestore (${jl}): ${n}`,...t)}}function my(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function lt(n,e){n||rt()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class Xb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eT{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new kI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new Rr(e)}}class tT{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class nT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rT{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.T=t.token,new FI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class l0{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Jp(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function $l(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function d0(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Vn(0,0))}static max(){return new ft(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends Xp{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const iT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Xp{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return iT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(rn.fromString(e))}static fromName(e){return new Ke(rn.fromString(e).popFirst(5))}static empty(){return new Ke(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new rn(e.slice()))}}class yy{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function h0(n){return n.fields.find(e=>2===e.kind)}function bo(n){return n.fields.filter(e=>2!==e.kind)}yy.UNKNOWN_ID=-1;class Bh{constructor(e,t){this.fieldPath=e,this.kind=t}}class eg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eg(0,Ds.min())}}function vy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Ds(s,Ke.empty(),e)}function jh(n){return new Ds(n.readTime,n.key,-1)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(ft.min(),Ke.empty(),-1)}static max(){return new Ds(ft.max(),Ke.empty(),-1)}}function f0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function To(n){return p0.apply(this,arguments)}function p0(){return p0=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==LI)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),p0.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(x=>{l[b]=x,++m,m===u&&r(l)},x=>s(x))}})}static doWhile(e,t){return new ie((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ng{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Nr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new $h(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const s=rg(r.target.error);this.R.reject(new $h(e,s))}}static open(e,t,r,s){try{return new ng(t,e.transaction(s,r))}catch(u){throw new $h(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oT(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===qs.S((0,zt.z$)())&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Hh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,zt.hl)())return!1;if(qs.C())return!0;const e=(0,zt.z$)(),t=qs.S(e),r=0<t&&t<10,s=qs.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new $h(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Ae(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new $h(e,m))},u.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ve.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const w=ng.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(x=>(w.P(),x)).catch(x=>(w.abort(x),ie.reject(x))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,x="FirebaseError"!==b.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",x),u.close(),!x)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class g0{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Hh(this.L.delete())}}class $h extends Ae{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bc(n){return"IndexedDbTransactionError"===n.name}class oT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hh(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Hh(this.store.add(e))}get(e){return Hh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Hh(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Hh(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ie((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ie((r,s)=>{t.onerror=u=>{const l=rg(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ie((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new g0(m),b=t(m.primaryKey,m.value,w);if(b instanceof ie){const x=b.catch(N=>(w.done(),ie.reject(N)));r.push(x)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hh(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=rg(r.target.error);t(s)}})}let _y=!1;function rg(n){const e=qs.S((0,zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _y||(_y=!0,setTimeout(()=>{throw r},0)),r}}return n}class VI{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){bc(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield To(r)}yield t.et(6e4)}))}}class m0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ie.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Pe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=jh(u);f0(l,r)>0&&(r=l)}),new Ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Oi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ig(n){return null==n}function sg(n){return 0===n&&1/n==-1/0}function UI(n){return"number"==typeof n&&Number.isInteger(n)&&!sg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wy(e)),e=BI(n.get(t),e);return wy(e)}function BI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function wy(n){return n+"\x01\x01"}function So(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:rt()}u=l+2}return new rn(r)}const jI=["userId","batchId"];function og(n,e){return[n,mi(e)]}function y0(n,e,t){return[n,mi(e),t]}const aT={},$I=["prefixPath","collectionGroup","readTime","documentId"],HI=["prefixPath","collectionGroup","documentId"],uT=["collectionGroup","readTime","prefixPath","documentId"],GI=["canonicalId","targetId"],cT=["targetId","path"],ki=["path","targetId"],Gh=["collectionId","parent"],lT=["indexId","uid"],dT=["uid","sequenceNumber"],_x=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wx=["indexId","uid","orderedDocumentKey"],zI=["userId","collectionPath","documentId"],qI=["userId","collectionPath","largestBatchId"],ag=["userId","collectionGroup","largestBatchId"],WI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v0=[...WI,"documentOverlays"],KI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_0=KI,hT=[..._0,"indexConfiguration","indexState","indexEntries"];class w0 extends tg{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function jr(n,e){const t=Ye(n);return qs.M(t.at,e)}function Ey(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function su(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dn{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??yi.RED,this.left=s??yi.EMPTY,this.right=u??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new yi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return yi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZI(this.data.getIterator())}getIteratorFrom(e){return new ZI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class ZI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(n){return n.hasNext()?n.getNext():void 0}class Pr{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new Nn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class YI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new YI("Invalid base64 string: "+s):s}}(e);return new or(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const Ex=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tc(n){if(lt(!!n),"string"==typeof n){let e=0;const t=Ex.exec(n);if(lt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ou(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function Iy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dy(n){const e=n.mapValue.fields.__previous_value__;return Iy(e)?Dy(e):e}function qh(n){const e=Tc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class JI{constructor(e,t,r,s,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Sc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}const au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ug={nullValue:"NULL_VALUE"};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Iy(n)?4:pT(n)?9007199254740991:10:rt()}function da(n,e){if(n===e)return!0;const t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qh(n).isEqual(qh(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Tc(r.timestampValue),l=Tc(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ou(n.bytesValue).isEqual(ou(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ar(r.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ar(r.integerValue)===ar(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ar(r.doubleValue),l=ar(s.doubleValue);return u===l?sg(u)===sg(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return $l(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Ey(u)!==Ey(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!da(u[m],l[m])))return!1;return!0}(n,e);default:return rt()}var s}function Wh(n,e){return void 0!==(n.values||[]).find(t=>da(t,e))}function xc(n,e){if(n===e)return 0;const t=Ac(n),r=Ac(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=ar(s.integerValue||s.doubleValue),m=ar(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return I0(n.timestampValue,e.timestampValue);case 4:return I0(qh(n),qh(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=ou(s),m=ou(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Nt(l[w],m[w]);if(0!==b)return b}return Nt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Nt(ar(s.latitude),ar(u.latitude));return 0!==l?l:Nt(ar(s.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=xc(l[w],m[w]);if(b)return b}return Nt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===au.mapValue&&u===au.mapValue)return 0;if(s===au.mapValue)return 1;if(u===au.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const N=Nt(m[x],b[x]);if(0!==N)return N;const B=xc(l[m[x]],w[b[x]]);if(0!==B)return B}return Nt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function I0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Tc(n),r=Tc(e),s=Nt(t.seconds,r.seconds);return 0!==s?s:Nt(t.nanos,r.nanos)}function Gl(n){return Cy(n)}function Cy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Tc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ou(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Cy(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${Cy(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function zl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function D0(n){return!!n&&"integerValue"in n}function by(n){return!!n&&"arrayValue"in n}function C0(n){return!!n&&"nullValue"in n}function fT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function b0(n){return!!n&&"mapValue"in n}function Ty(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return su(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ty(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ty(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ix(n){return"nullValue"in n?ug:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zl(Sc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function Dx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zl(Sc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?au:rt()}function gT(n,e){const t=xc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function mT(n,e){const t=xc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!b0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ty(t)}setAll(e){let t=er.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Ty(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());b0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];b0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){su(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new wr(Ty(this.value))}}function yT(n){const e=[];return su(n.fields,(t,r)=>{const s=new er([t]);if(b0(r)){const u=yT(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Pr(e)}class Pn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Pn(e,0,ft.min(),ft.min(),ft.min(),wr.empty(),0)}static newFoundDocument(e,t,r,s){return new Pn(e,1,t,ft.min(),r,s,0)}static newNoDocument(e,t){return new Pn(e,2,t,ft.min(),ft.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,ft.min(),ft.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ao{constructor(e,t){this.position=e,this.inclusive=t}}function T0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):xc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function S0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}class lg{constructor(e,t="asc"){this.field=e,this.dir=t}}function A0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class x0{}class Wt extends x0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Cx(e,t,r):"array-contains"===t?new bx(e,r):"in"===t?new rD(e,r):"not-in"===t?new iD(e,r):"array-contains-any"===t?new sD(e,r):new Wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new wT(e,r):new ET(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xc(t,this.value)):null!==t&&Ac(this.value)===Ac(t)&&this.matchesComparison(xc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends x0{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new wn(e,t)}matches(e){return dg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dg(n){return"and"===n.op}function XI(n){return"or"===n.op}function M0(n){return eD(n)&&dg(n)}function eD(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function Kh(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+Gl(n.value);if(M0(n))return n.filters.map(e=>Kh(e)).join(",");{const e=n.filters.map(t=>Kh(t)).join(",");return`${n.op}(${e})`}}function tD(n,e){return n instanceof Wt?(t=n,(r=e)instanceof Wt&&t.op===r.op&&t.field.isEqual(r.field)&&da(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&tD(u,r.filters[l]),!0)}(n,e):void rt();var t,r}function vT(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function _T(n){return n instanceof Wt?`${(e=n).field.canonicalString()} ${e.op} ${Gl(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(_T).join(" ,")+"}"}(n):"Filter";var e}class Cx extends Wt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class wT extends Wt{constructor(e,t){super(e,"in",t),this.keys=nD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ET extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=nD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class bx extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return by(t)&&Wh(t.arrayValue,this.value)}}class rD extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wh(this.value.arrayValue,t)}}class iD extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wh(this.value.arrayValue,t)}}class sD extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!by(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wh(this.value.arrayValue,r))}}class Tx{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function Cs(n,e=null,t=[],r=[],s=null,u=null,l=null){return new Tx(n,e,t,r,s,u,l)}function ql(n){const e=Ye(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Kh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gl(r)).join(",")),e.ft=t}return e.ft}function Wl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S0(n.startAt,e.startAt)&&S0(n.endAt,e.endAt)}function Sy(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fi(n,e){return n.filters.filter(t=>t instanceof Wt&&t.field.isEqual(e))}function oD(n,e,t){let r=ug,s=!0;for(const u of Fi(n,e)){let l=ug,m=!0;switch(u.op){case"<":case"<=":l=Ix(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=ug}gT({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];gT({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function Ay(n,e,t){let r=au,s=!0;for(const u of Fi(n,e)){let l=au,m=!0;switch(u.op){case">=":case">":l=Dx(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=au}mT({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];mT({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class uu{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function aD(n,e,t,r,s,u,l,m){return new uu(n,e,t,r,s,u,l,m)}function Mc(n){return new uu(n)}function R0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function My(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ry(n){return null!==n.collectionGroup}function Rc(n){const e=Ye(n);if(null===e.dt){e.dt=[];const t=My(e),r=xy(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new lg(t)),e.dt.push(new lg(er.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new lg(er.keyField(),u))}}}return e.dt}function Li(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=Cs(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Rc(e))t.push(new lg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ao(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ao(e.startAt.position,e.startAt.inclusive):null;e._t=Cs(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Ny(n,e){e.getFirstInequalityField(),My(n);const t=n.filters.concat([e]);return new uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Py(n,e,t){return new uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kl(n,e){return Wl(Li(n),Li(e))&&n.limitType===e.limitType}function cu(n){return`${ql(Li(n))}|lt:${n.limitType}`}function Oy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>_T(r)).join(", ")}]`),ig(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gl(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gl(r)).join(",")),`Target(${t})`}(Li(n))}; limitType=${n.limitType})`}function Zl(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ke.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Rc(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=T0(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Rc(t),r)||t.endAt&&!function(s,u,l){const m=T0(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Rc(t),r)));var t,r}function ha(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uD(n){return(e,t)=>{let r=!1;for(const s of Rc(n)){const u=Sx(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Sx(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?xc(m,w):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){su(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return E0(this.inner)}size(){return this.innerSize}}const IT=new Dn(Ke.comparator);function es(){return IT}const cD=new Dn(Ke.comparator);function Zh(...n){let e=cD;for(const t of n)e=e.insert(t.key,t);return e}function DT(n){let e=cD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xo(){return Yh()}function lD(){return Yh()}function Yh(){return new lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ax=new Dn(Ke.comparator),N0=new Nn(Ke.comparator);function Vt(...n){let e=N0;for(const t of n)e=e.add(t);return e}const dD=new Nn(Nt);function ky(){return dD}function P0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sg(e)?"-0":e}}function O0(n){return{integerValue:""+n}}function hg(n,e){return UI(e)?O0(e):P0(n,e)}class Yl{constructor(){this._=void 0}}function hD(n,e,t){return n instanceof Ql?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Iy(s)&&(s=Dy(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Jl?fD(n,e):n instanceof Qh?bT(n,e):function(r,s){const u=k0(r,s),l=pD(u)+pD(r.wt);return D0(u)&&D0(r.wt)?O0(l):P0(r.serializer,l)}(n,e)}function CT(n,e,t){return n instanceof Jl?fD(n,e):n instanceof Qh?bT(n,e):t}function k0(n,e){return n instanceof Xl?D0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ql extends Yl{}class Jl extends Yl{constructor(e){super(),this.elements=e}}function fD(n,e){const t=gD(e);for(const r of n.elements)t.some(s=>da(s,r))||t.push(r);return{arrayValue:{values:t}}}class Qh extends Yl{constructor(e){super(),this.elements=e}}function bT(n,e){let t=gD(e);for(const r of n.elements)t=t.filter(s=>!da(s,r));return{arrayValue:{values:t}}}class Xl extends Yl{constructor(e,t){super(),this.serializer=e,this.wt=t}}function pD(n){return ar(n.integerValue||n.doubleValue)}function gD(n){return by(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fg{constructor(e,t){this.field=e,this.transform=t}}class Mx{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function F0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class L0{}function mD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Nc(n.key,zn.none()):new Ws(n.key,n.data,zn.none());{const t=n.data,r=wr.empty();let s=new Nn(er.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new fa(n.key,r,new Pr(s.toArray()),zn.none())}}function Fy(n,e,t){n instanceof Ws?function(r,s,u){const l=r.value.clone(),m=Vy(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fa?function(r,s,u){if(!F0(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=Vy(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Ly(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pg(n,e,t,r){return n instanceof Ws?function(s,u,l,m){if(!F0(s.precondition,u))return l;const w=s.value.clone(),b=yD(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof fa?function(s,u,l,m){if(!F0(s.precondition,u))return l;const w=yD(s.fieldTransforms,m,u),b=u.data;return b.setAll(Ly(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(x=>x.field))}(n,e,t,r):(l=t,F0(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function TT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=k0(r.transform,s||null);null!=u&&(null===t&&(t=wr.empty()),t.set(r.field,u))}return t||null}function V0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$l(t,r,(s,u)=>function xx(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jl&&r instanceof Jl||t instanceof Qh&&r instanceof Qh?$l(t.elements,r.elements,da):t instanceof Xl&&r instanceof Xl?da(t.wt,r.wt):t instanceof Ql&&r instanceof Ql);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ws extends L0{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fa extends L0{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ly(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Vy(n,e,t){const r=new Map;lt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,CT(l,m,t[s]))}return r}function yD(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,hD(u,l,e))}return r}class Nc extends L0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gg extends L0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jh{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Fy(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lD();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=mD(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,(t,r)=>V0(t,r))&&$l(this.baseMutations,e.baseMutations,(t,r)=>V0(t,r))}}class vD{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length);let s=Ax;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new vD(e,t,r,s)}}class _D{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nx{constructor(e,t){this.count=e,this.unchangedNames=t}}var ur,en;function wD(n){switch(n){default:return rt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function ED(n){if(void 0===n)return Xn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case ur.OK:return ce.OK;case ur.CANCELLED:return ce.CANCELLED;case ur.UNKNOWN:return ce.UNKNOWN;case ur.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case ur.INTERNAL:return ce.INTERNAL;case ur.UNAVAILABLE:return ce.UNAVAILABLE;case ur.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case ur.NOT_FOUND:return ce.NOT_FOUND;case ur.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case ur.ABORTED:return ce.ABORTED;case ur.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case ur.DATA_LOSS:return ce.DATA_LOSS;default:return rt()}}(en=ur||(ur={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class U0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return mg}static getOrCreateInstance(){return null===mg&&(mg=new U0),mg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let mg=null;function B0(){return new TextEncoder}const ID=new Bl([4294967295,4294967295],0);function DD(n){const e=B0().encode(n),t=new a0;return t.update(e),new Uint8Array(t.digest())}function CD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Bl([t,r],0),new Bl([s,u],0)]}class Uy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ed(`Invalid padding: ${t}`);if(r<0)throw new ed(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ed(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ed(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Bl.fromNumber(this.yt)}Tt(e,t,r){let s=e.add(t.multiply(Bl.fromNumber(r)));return 1===s.compare(ID)&&(s=new Bl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=DD(e),[r,s]=CD(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,s,u);if(!this.Et(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Uy(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.yt)return;const t=DD(e),[r,s]=CD(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class By{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new By(ft.min(),s,new Dn(Nt),es(),Vt())}}class Xh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xh(r,t,Vt(),Vt(),Vt())}}class ef{constructor(e,t,r,s){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=s}}class bD{constructor(e,t){this.targetId=e,this.bt=t}}class TD{constructor(e,t,r=or.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ST{constructor(){this.Vt=0,this.St=AD(),this.Dt=or.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Vt(),t=Vt(),r=Vt();return this.St.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:rt()}}),new Xh(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=AD()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Px{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=es(),this.jt=SD(),this.zt=new Dn(Nt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,s)=>{this.Zt(s)&&t(s)})}ee(e){var t;const r=e.targetId,s=e.bt.count,u=this.ne(r);if(u){const l=u.target;if(Sy(l))if(0===s){const m=new Ke(l.path);this.Jt(r,m,Pn.newNoDocument(m,ft.min()))}else lt(1===s);else{const m=this.se(r);if(m!==s){const w=this.ie(e,m);0!==w&&(this.te(r),this.zt=this.zt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=U0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,x,N){var B,Z,Ee,Re,Le,pt;const xt={localCacheCount:x,existenceFilterCount:N.count},_t=N.unchangedNames;return _t&&(xt.bloomFilter={applied:0===b,hashCount:null!==(B=_t?.hashCount)&&void 0!==B?B:0,bitmapLength:null!==(Re=null===(Ee=null===(Z=_t?.bits)||void 0===Z?void 0:Z.bitmap)||void 0===Ee?void 0:Ee.length)&&void 0!==Re?Re:0,padding:null!==(pt=null===(Le=_t?.bits)||void 0===Le?void 0:Le.padding)&&void 0!==pt?pt:0}),xt}(w,m,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:s}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=ou(u).toUint8Array()}catch(x){if(x instanceof YI)return Co("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{b=new Uy(w,l,m)}catch(x){return Co(x instanceof ed?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===b.yt?1:s!==t-this.re(e.targetId,b)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Kt.oe(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.At(m)||(this.Jt(e,u,null),s++)}),s}ue(e){const t=new Map;this.Gt.forEach((u,l)=>{const m=this.ne(l);if(m){if(u.current&&Sy(m.target)){const w=new Ke(m.target.path);null!==this.Qt.get(w)||this.ce(l,w)||this.Jt(l,w,Pn.newNoDocument(w,e))}u.kt&&(t.set(l,u.Ot()),u.$t())}});let r=Vt();this.jt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.ne(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Qt.forEach((u,l)=>l.setReadTime(e));const s=new By(e,t,this.zt,this.Qt,r);return this.Qt=es(),this.jt=SD(),this.zt=new Dn(Nt),s}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const s=this.Xt(e);this.ce(e,t)?s.Ft(t,1):s.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new ST,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Nn(Nt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new ST),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function SD(){return new Dn(Ke.comparator)}function AD(){return new Dn(Ke.comparator)}const AT={asc:"ASCENDING",desc:"DESCENDING"},Ox={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kx={and:"AND",or:"OR"};class Fx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xD(n,e){return n.useProto3Json||ig(e)?e:{value:e}}function yg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Lx(n,e){return yg(n,e.toTimestamp())}function Er(n){return lt(!!n),ft.fromTimestamp(function(e){const t=Tc(e);return new Vn(t.seconds,t.nanos)}(n))}function RD(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xT(n){const e=rn.fromString(n);return lt(Pc(e)),e}function jy(n,e){return RD(n.databaseId,e.path)}function du(n,e){const t=xT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(c(t))}function i(n,e){return RD(n.databaseId,e)}function o(n){const e=xT(n);return 4===e.length?rn.emptyPath():c(e)}function a(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function d(n,e,t){return{name:jy(n,e),fields:t.value.mapValue.fields}}function p(n,e,t){const r=du(n,e.name),s=Er(e.updateTime),u=e.createTime?Er(e.createTime):ft.min(),l=new wr({mapValue:{fields:e.fields}}),m=Pn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function C(n,e){let t;if(e instanceof Ws)t={update:d(n,e.key,e.value)};else if(e instanceof Nc)t={delete:jy(n,e.key)};else if(e instanceof fa)t={update:d(n,e.key,e.data),updateMask:jn(e.fieldMask)};else{if(!(e instanceof gg))return rt();t={verify:jy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Ql)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xl)return{fieldPath:u.field.canonicalString(),increment:l.wt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Lx(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function S(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?zn.updateTime(Er(s.updateTime)):void 0!==s.exists?zn.exists(s.exists):zn.none():zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(lt("REQUEST_TIME"===l.setToServerValue),m=new Ql):"appendMissingElements"in l?m=new Jl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Qh(l.removeAllFromArray.values||[]):"increment"in l?m=new Xl(u,l.increment):rt();const w=er.fromServerFormat(l.fieldPath);return new fg(w,m)}(n,s)):[];var s;if(e.update){const s=du(n,e.update.name),u=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Pr((e.updateMask.fieldPaths||[]).map(b=>er.fromServerFormat(b)));return new fa(s,u,l,t,r)}return new Ws(s,u,t,r)}if(e.delete){const s=du(n,e.delete);return new Nc(s,t)}if(e.verify){const s=du(n,e.verify);return new gg(s,t)}return rt()}function k(n,e){return{documents:[i(n,e.path)]}}function H(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=i(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=i(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return an(wn.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Ce((x=b).field),direction:qe(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=xD(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Q(n){let e=o(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(1===r);const x=t.from[0];x.allDescendants?s=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=function(x){const N=Fe(x);return N instanceof wn&&M0(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(x=>{return new lg(It((N=x).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,ig(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Ao((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Ao(x.values||[],!x.before)}(t.endAt)),aD(e,s,l,u,m,"F",w,b)}function Fe(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=It(e.unaryFilter.field);return Wt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=It(e.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=It(e.unaryFilter.field);return Wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=It(e.unaryFilter.field);return Wt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Wt.create(It((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>Fe(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function qe(n){return AT[n]}function at(n){return Ox[n]}function Dt(n){return kx[n]}function Ce(n){return{fieldPath:n.canonicalString()}}function It(n){return er.fromServerFormat(n.fieldPath)}function an(n){return n instanceof Wt?function(e){if("=="===e.op){if(fT(e.value))return{unaryFilter:{field:Ce(e.field),op:"IS_NAN"}};if(C0(e.value))return{unaryFilter:{field:Ce(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fT(e.value))return{unaryFilter:{field:Ce(e.field),op:"IS_NOT_NAN"}};if(C0(e.value))return{unaryFilter:{field:Ce(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ce(e.field),op:at(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>an(r));return 1===t.length?t[0]:{compositeFilter:{op:Dt(e.op),filters:t}}}(n):rt()}function jn(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pc(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Mo{constructor(e,t,r,s,u=ft.min(),l=ft.min(),m=or.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $y{constructor(e){this.le=e}}function Hy(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jy(s=n.le,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:yg(s,u.version.toTimestamp()),createTime:yg(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hu(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:hu(e.version)}}var s,u;return r}function tf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fu(n){const e=new Vn(n.seconds,n.nanoseconds);return ft.fromTimestamp(e)}function pu(n,e){const t=(e.baseMutations||[]).map(u=>S(n.le,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>S(n.le,u)),s=Vn.fromMillis(e.localWriteTimeMs);return new Jh(e.batchId,s,t,r)}function td(n){const e=fu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fu(n.lastLimboFreeSnapshotVersion):ft.min();let r;var s;return void 0!==n.query.documents?(lt(1===(s=n.query).documents.length),r=Li(Mc(o(s.documents[0])))):r=Li(Q(n.query)),new Mo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken))}function Vx(n,e){const t=hu(e.snapshotVersion),r=hu(e.lastLimboFreeSnapshotVersion);let s;s=Sy(e.target)?k(n.le,e.target):H(n.le,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ql(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function MT(n){const e=Q({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Py(e,e.limit,"L"):e}function RT(n,e){return new _D(e.largestBatchId,S(n.le,e.overlayMutation))}function Ux(n,e){const t=e.path.lastSegment();return[n,mi(e.path.popLast()),t]}function Bx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hu(r.readTime),documentKey:mi(r.documentKey.path),largestBatchId:r.largestBatchId}}class IN{getBundleMetadata(e,t){return jx(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:fu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return jx(e).put({bundleId:(r=t).id,createTime:hu(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $x(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:MT(s.bundledQuery),readTime:fu(s.readTime)};var s})}saveNamedQuery(e,t){return $x(e).put({name:(r=t).name,readTime:hu(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jx(n){return jr(n,"bundles")}function $x(n){return jr(n,"namedQueries")}class ND{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new ND(e,t.uid||"")}getOverlay(e,t){return $0(e).get(Ux(this.userId,t)).next(r=>r?RT(this.serializer,r):null)}getOverlays(e,t){const r=xo();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new _D(t,l);s.push(this.de(e,m))}),ie.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(mi(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push($0(e).J("collectionPathOverlayIndex",m))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const s=xo(),u=mi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return $0(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=RT(this.serializer,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=xo();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,x)=>{const N=RT(this.serializer,b);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):x.done()}).next(()=>u)}de(e,t){return $0(e).put(function(r,s,u){const[l,m,w]=Ux(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:C(r.le,u.mutation)}}(this.serializer,this.userId,t))}}function $0(n){return jr(n,"documentOverlays")}class vg{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),sg(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(ou(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?pT(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):rt()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const s of Object.keys(r))this.Ie(s,t),this.we(r[s],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const s of r)this.we(s,t)}Ae(e,t){this.ge(t,37),Ke.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function DN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Hx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=DN(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}vg.be=new vg;class CN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Se(r.value),r=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xe(r.value),r=t.next();this.Ne()}ke(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Se(r);else if(r<2048)this.Se(960|r>>>6),this.Se(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Se(480|r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r);else{const s=t.codePointAt(0);this.Se(240|s>>>18),this.Se(128|63&s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s)}}this.De()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xe(r);else if(r<2048)this.xe(960|r>>>6),this.xe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xe(480|r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r);else{const s=t.codePointAt(0);this.xe(240|s>>>18),this.xe(128|63&s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s)}}this.Ne()}Oe(e){const t=this.$e(e),r=Hx(t);this.Fe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Be(e){const t=this.$e(e),r=Hx(t);this.Fe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class bN{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class TN{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class H0{constructor(){this.Qe=new CN,this.je=new bN(this.Qe),this.ze=new TN(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class _g{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _g(this.indexId,this.documentKey,this.arrayValue,r)}}function nf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gx(n.arrayValue,e.arrayValue),0!==t?t:(t=Gx(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function Gx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class SN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xe=r:this.Ye.push(r)}}Ze(e){lt(e.collectionGroup===this.collectionId);const t=h0(e);if(void 0!==t&&!this.tn(t))return!1;const r=bo(e);let s=0,u=0;for(;s<r.length&&this.tn(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Xe){const l=r[s];if(!this.en(this.Xe,l)||!this.nn(this.Je[u++],l))return!1;++s}for(;s<r.length;++s){const l=r[s];if(u>=this.Je.length||!this.nn(this.Je[u++],l))return!1}return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zx(n){var e,t;if(lt(n instanceof Wt||n instanceof wn),n instanceof Wt){if(n instanceof rD){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Wt.create(n.field,"==",u)))||[];return wn.create(s,"or")}return n}const r=n.filters.map(s=>zx(s));return wn.create(r,n.op)}function AN(n){if(0===n.getFilters().length)return[];const e=OT(zx(n));return lt(qx(e)),NT(e)||PT(e)?[e]:e.getFilters()}function NT(n){return n instanceof Wt}function PT(n){return n instanceof wn&&M0(n)}function qx(n){return NT(n)||PT(n)||function(e){if(e instanceof wn&&XI(e)){for(const t of e.getFilters())if(!NT(t)&&!PT(t))return!1;return!0}return!1}(n)}function OT(n){if(lt(n instanceof Wt||n instanceof wn),n instanceof Wt)return n;if(1===n.filters.length)return OT(n.filters[0]);const e=n.filters.map(r=>OT(r));let t=wn.create(e,n.op);return t=PD(t),qx(t)?t:(lt(t instanceof wn),lt(dg(t)),lt(t.filters.length>1),t.filters.reduce((r,s)=>kT(r,s)))}function kT(n,e){let t;return lt(n instanceof Wt||n instanceof wn),lt(e instanceof Wt||e instanceof wn),t=n instanceof Wt?e instanceof Wt?wn.create([n,e],"and"):Wx(n,e):e instanceof Wt?Wx(e,n):function(r,s){if(lt(r.filters.length>0&&s.filters.length>0),dg(r)&&dg(s))return vT(r,s.getFilters());const u=XI(r)?r:s,l=XI(r)?s:r,m=u.filters.map(w=>kT(w,l));return wn.create(m,"or")}(n,e),PD(t)}function Wx(n,e){if(dg(e))return vT(e,n.getFilters());{const t=e.filters.map(r=>kT(n,r));return wn.create(t,"or")}}function PD(n){if(lt(n instanceof Wt||n instanceof wn),n instanceof Wt)return n;const e=n.getFilters();if(1===e.length)return PD(e[0]);if(eD(n))return n;const t=e.map(s=>PD(s)),r=[];return t.forEach(s=>{s instanceof Wt?r.push(s):s instanceof wn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:wn.create(r,n.op)}class xN{constructor(){this.sn=new FT}addToCollectionParentIndex(e,t){return this.sn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ds.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class FT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nn(rn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nn(rn.comparator)).toArray()}}const OD=new Uint8Array(0);class MN{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new FT,this.on=new lu(r=>ql(r),(r,s)=>Wl(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const u={collectionId:r,parent:mi(s)};return Kx(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[d0(t),""],!1,!0);return Kx(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(So(l.parent))}return r})}addFieldIndex(e,t){const r=kD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=z0(e);return u.next(m=>{l.put(Bx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=kD(e),s=z0(e),u=G0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=G0(e);let s=!0;const u=new Map;return ie.forEach(this.un(t),l=>this.cn(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Vt();const m=[];return ie.forEach(u,(w,b)=>{var x;Pe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${ql(t)}`);const N=function(_t,jt){const Gt=h0(jt);if(void 0===Gt)return null;for(const un of Fi(_t,Gt.fieldPath))switch(un.op){case"array-contains-any":return un.value.arrayValue.values||[];case"array-contains":return[un.value]}return null}(b,w),B=function(_t,jt){const Gt=new Map;for(const un of bo(jt))for(const Ss of Fi(_t,un.fieldPath))switch(Ss.op){case"==":case"in":Gt.set(un.fieldPath.canonicalString(),Ss.value);break;case"not-in":case"!=":return Gt.set(un.fieldPath.canonicalString(),Ss.value),Array.from(Gt.values())}return null}(b,w),Z=function(_t,jt){const Gt=[];let un=!0;for(const Ss of bo(jt)){const ff=0===Ss.kind?oD(_t,Ss.fieldPath,_t.startAt):Ay(_t,Ss.fieldPath,_t.startAt);Gt.push(ff.value),un&&(un=ff.inclusive)}return new Ao(Gt,un)}(b,w),Ee=function(_t,jt){const Gt=[];let un=!0;for(const Ss of bo(jt)){const ff=0===Ss.kind?Ay(_t,Ss.fieldPath,_t.endAt):oD(_t,Ss.fieldPath,_t.endAt);Gt.push(ff.value),un&&(un=ff.inclusive)}return new Ao(Gt,un)}(b,w),Re=this.an(w,b,Z),Le=this.an(w,b,Ee),pt=this.hn(w,b,B),xt=this.ln(w.indexId,N,Re,Z.inclusive,Le,Ee.inclusive,pt);return ie.forEach(xt,_t=>r.H(_t,t.limit).next(jt=>{jt.forEach(Gt=>{const un=Ke.fromSegments(Gt.documentKey);l.has(un)||(l=l.add(un),m.push(un))})}))}).next(()=>m)}return ie.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:AN(wn.create(e.filters,"and")).map(r=>Cs(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const B=t?this.fn(t[N/b]):OD,Z=this.dn(e,B,r[N%b],s),Ee=this._n(e,B,u[N%b],l),Re=m.map(Le=>this.dn(e,B,Le,!0));x.push(...this.createRange(Z,Ee,Re))}return x}dn(e,t,r,s){const u=new _g(e,Ke.empty(),t,r);return s?u:u.He()}_n(e,t,r,s){const u=new _g(e,Ke.empty(),t,r);return s?u.He():u}cn(e,t){const r=new SN(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.Ze(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.un(t);return ie.forEach(s,u=>this.cn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Nn(er.comparator),b=!1;for(const x of m.filters)for(const N of x.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const x of m.orderBy)x.field.isKeyField()||(w=w.add(x.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}wn(e,t){const r=new H0;for(const s of bo(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.We(s.kind);vg.be._e(u,l)}return r.Ge()}fn(e){const t=new H0;return vg.be._e(e,t.We(0)),t.Ge()}mn(e,t){const r=new H0;return vg.be._e(zl(this.databaseId,t),r.We(function(s){const u=bo(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Ge()}hn(e,t,r){if(null===r)return[];let s=[];s.push(new H0);let u=0;for(const l of bo(e)){const m=r[u++];for(const w of s)if(this.gn(t,l.fieldPath)&&by(m))s=this.yn(s,l,m);else{const b=w.We(l.kind);vg.be._e(m,b)}}return this.pn(s)}an(e,t,r){return this.hn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ge();return t}yn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new H0;w.seed(m.Ge()),vg.be._e(l,w.We(t.kind)),u.push(w)}return u}gn(e,t){return!!e.filters.find(r=>r instanceof Wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=kD(e),s=z0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ie.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,x){const N=x?new eg(x.sequenceNumber,new Ds(fu(x.readTime),new Ke(So(x.documentKey)),x.largestBatchId)):eg.empty(),B=b.fields.map(([Z,Ee])=>new Bh(er.fromServerFormat(Z),Ee));return new yy(b.indexId,b.collectionGroup,B,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=kD(e),u=z0(e);return this.In(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ie.forEach(m,w=>u.put(Bx(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ie.forEach(m,w=>this.Tn(e,s,w).next(b=>{const x=this.En(u,w);return b.isEqual(x)?ie.resolve():this.An(e,u,w,b,x)}))))})}Rn(e,t,r,s){return G0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,s){return G0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}Tn(e,t,r){const s=G0(e);let u=new Nn(nf);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,m)=>{u=u.add(new _g(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}En(e,t){let r=new Nn(nf);const s=this.wn(t,e);if(null==s)return r;const u=h0(t);if(null!=u){const l=e.data.field(u.fieldPath);if(by(l))for(const m of l.arrayValue.values||[])r=r.add(new _g(t.indexId,e.key,this.fn(m),s))}else r=r.add(new _g(t.indexId,e.key,OD,s));return r}An(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,x,N){const B=m.getIterator(),Z=w.getIterator();let Ee=Hl(B),Re=Hl(Z);for(;Ee||Re;){let Le=!1,pt=!1;if(Ee&&Re){const xt=b(Ee,Re);xt<0?pt=!0:xt>0&&(Le=!0)}else null!=Ee?pt=!0:Le=!0;Le?(x(Re),Re=Hl(Z)):pt?(N(Ee),Ee=Hl(B)):(Ee=Hl(B),Re=Hl(Z))}}(s,u,nf,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.vn(e,t,r,m))}),ie.waitFor(l)}In(e){let t=1;return z0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>nf(l,m)).filter((l,m,w)=>!m||0!==nf(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=nf(l,e),w=nf(l,t);if(0===m)s[0]=e.He();else if(m>0&&w<0)s.push(l),s.push(l.He());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.Pn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,OD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,OD,[]]))}return u}Pn(e,t){return nf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zx)}getMinOffset(e,t){return ie.mapArray(this.un(t),r=>this.cn(e,r).next(s=>s||rt())).next(Zx)}}function Kx(n){return jr(n,"collectionParents")}function G0(n){return jr(n,"indexEntries")}function kD(n){return jr(n,"indexConfiguration")}function z0(n){return jr(n,"indexState")}function Zx(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;f0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ds(e.readTime,e.documentKey,t)}const Yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qx(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(x,N,B)=>(m++,B.delete()));u.push(w.next(()=>{lt(1===m)}));const b=[];for(const x of t.mutations){const N=y0(e,x.key.path,t.batchId);u.push(s.delete(N)),b.push(x.key)}return ie.waitFor(u).next(()=>b)}function FD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class LD{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.bn={}}static fe(e,t,r,s){lt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new LD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rf(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Gy(e),l=rf(e);return l.add({}).next(m=>{lt("number"==typeof m);const w=new Jh(m,t,r,s),b=function(B,Z,Ee){const Re=Ee.baseMutations.map(pt=>C(B.le,pt)),Le=Ee.mutations.map(pt=>C(B.le,pt));return{userId:Z,batchId:Ee.batchId,localWriteTimeMs:Ee.localWriteTime.toMillis(),baseMutations:Re,mutations:Le}}(this.serializer,this.userId,w),x=[];let N=new Nn((B,Z)=>Nt(B.canonicalString(),Z.canonicalString()));for(const B of s){const Z=y0(this.userId,B.key.path,m);N=N.add(B.key.path.popLast()),x.push(l.put(b)),x.push(u.put(Z,aT))}return N.forEach(B=>{x.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.bn[m]=w.keys()}),ie.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return rf(e).get(t).next(r=>r?(lt(r.userId===this.userId),pu(this.serializer,r)):null)}Vn(e,t){return this.bn[t]?ie.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return rf(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(lt(m.batchId>=r),u=pu(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rf(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rf(e).j("userMutationsIndex",t).next(r=>r.map(s=>pu(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=og(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Gy(e).X({range:s},(l,m,w)=>{const[b,x,N]=l,B=So(x);if(b===this.userId&&t.path.isEqual(B))return rf(e).get(N).next(Z=>{if(!Z)throw rt();lt(Z.userId===this.userId),u.push(pu(this.serializer,Z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Nt);const s=[];return t.forEach(u=>{const l=og(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Gy(e).X({range:m},(b,x,N)=>{const[B,Z,Ee]=b,Re=So(Z);B===this.userId&&u.path.isEqual(Re)?r=r.add(Ee):N.done()});s.push(w)}),ie.waitFor(s).next(()=>this.Sn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=og(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Nn(Nt);return Gy(e).X({range:l},(w,b,x)=>{const[N,B,Z]=w,Ee=So(B);N===this.userId&&r.isPrefixOf(Ee)?Ee.length===s&&(m=m.add(Z)):x.done()}).next(()=>this.Sn(e,m))}Sn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(rf(e).get(u).next(l=>{if(null===l)throw rt();lt(l.userId===this.userId),r.push(pu(this.serializer,l))}))}),ie.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Qx(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),ie.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Gy(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=So(u[1]);s.push(w)}else m.done()}).next(()=>{lt(0===s.length)})})}containsKey(e,t){return Jx(e,this.userId,t)}Cn(e){return Xx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jx(n,e,t){const r=og(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Gy(n).X({range:u,Y:!0},(m,w,b)=>{const[x,N,B]=m;x===e&&N===s&&(l=!0),b.done()}).next(()=>l)}function rf(n){return jr(n,"mutations")}function Gy(n){return jr(n,"documentMutations")}function Xx(n){return jr(n,"mutationQueues")}class wg{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new wg(0)}static kn(){return new wg(-1)}}class RN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const r=new wg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>ft.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Mn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(r=>(r.targetCount+=1,this.Fn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zy(e).delete(t.targetId)).next(()=>this.Mn(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return zy(e).X((l,m)=>{const w=td(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ie.waitFor(u)).next(()=>s)}forEachTarget(e,t){return zy(e).X((r,s)=>{const u=td(s);t(u)})}Mn(e){return eM(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}On(e,t){return eM(e).put("targetGlobalKey",t)}$n(e,t){return zy(e).put(Vx(this.serializer,t))}Fn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ql(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return zy(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=td(m);Wl(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=sf(e);return t.forEach(l=>{const m=mi(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ie.waitFor(s)}removeMatchingKeys(e,t,r){const s=sf(e);return ie.forEach(t,u=>{const l=mi(u.path);return ie.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=sf(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=sf(e);let u=Vt();return s.X({range:r,Y:!0},(l,m,w)=>{const b=So(l[1]),x=new Ke(b);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=mi(t.path),s=IDBKeyRange.bound([r],[d0(r)],!1,!0);let u=0;return sf(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}he(e,t){return zy(e).get(t).next(r=>r?td(r):null)}}function zy(n){return jr(n,"targets")}function eM(n){return jr(n,"targetGlobal")}function sf(n){return jr(n,"targetDocuments")}function tM([n,e],[t,r]){const s=Nt(n,t);return 0===s?Nt(e,r):s}class NN{constructor(e){this.Bn=e,this.buffer=new Nn(tM),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bc(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield To(r)}yield t.Gn(3e5)}))}}class PN{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(Oi.ct);const r=new NN(t);return this.Qn.forEachTarget(e,s=>r.Un(s.sequenceNumber)).next(()=>this.Qn.zn(e,s=>r.Un(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Qn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Yx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yx):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let r,s,u,l,m,w,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),c0()<=ws.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-x}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class ON{constructor(e,t){this.db=e,this.garbageCollector=function rM(n,e){return new PN(n,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Hn(e){let t=0;return this.zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(r,s)=>t(s))}addReference(e,t,r){return VD(e,r)}removeReference(e,t,r){return VD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return VD(e,t)}Yn(e,t){return function(r,s){let u=!1;return Xx(r).Z(l=>Jx(r,l,s).next(m=>(m&&(u=!0),ie.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Jn(e,(l,m)=>{if(m<=t){const w=this.Yn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ft.min()),sf(e).delete([0,mi(l.path)])))});s.push(w)}}).next(()=>ie.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return VD(e,t)}Jn(e,t){const r=sf(e);let s,u=Oi.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Oi.ct&&t(new Ke(So(s)),u),u=b,s=w):u=Oi.ct}).next(()=>{u!==Oi.ct&&t(new Ke(So(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VD(n,e){return sf(n).put((r=n.currentSequenceNumber,{targetId:0,path:mi(e.path),sequenceNumber:r}));var r}class iM{constructor(){this.changes=new lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Eg(e).put(r)}removeEntry(e,t,r){return Eg(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],tf(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Xn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Eg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(q0(t))},(s,u)=>{r=this.Zn(t,u)}).next(()=>r)}ts(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Eg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(q0(t))},(s,u)=>{r={document:this.Zn(t,u),size:FD(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.es(e,t,(s,u)=>{const l=this.Zn(s,u);r=r.insert(s,l)}).next(()=>r)}ns(e,t){let r=es(),s=new Dn(Ke.comparator);return this.es(e,t,(u,l)=>{const m=this.Zn(u,l);r=r.insert(u,m),s=s.insert(u,FD(l))}).next(()=>({documents:r,ss:s}))}es(e,t,r){if(t.isEmpty())return ie.resolve();let s=new Nn(uM);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(q0(s.first()),q0(s.last())),l=s.getIterator();let m=l.getNext();return Eg(e).X({index:"documentKeyIndex",range:u},(w,b,x)=>{const N=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&uM(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?x.G(q0(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),tf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eg(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=es();for(const x of w){const N=this.Zn(Ke.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);N.isFoundDocument()&&(Zl(t,N)||s.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=es();const l=aM(t,r),m=aM(t,Ds.max());return Eg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,x)=>{const N=this.Zn(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===s&&x.done()}).next(()=>u)}newChangeBuffer(e){return new FN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oM(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}Xn(e,t){return oM(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const r=function j0(n,e){let t;if(e.document)t=p(n.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),s=fu(e.noDocument.readTime);t=Pn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ke.fromSegments(e.unknownDocument.path),s=fu(e.unknownDocument.version);t=Pn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Vn(r[0],r[1]);return ft.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ft.min()))return r}return Pn.newInvalidDocument(e)}}function sM(n){return new kN(n)}class FN extends iM{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new lu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Nn((u,l)=>Nt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.os.get(u);if(t.push(this.rs.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=Hy(this.rs.serializer,l);s=s.add(u.path.popLast()),r+=FD(w)-m.size,t.push(this.rs.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Hy(this.rs.serializer,l.convertToNoDocument(ft.min()));t.push(this.rs.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.rs.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(r=>(this.os.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:r,ss:s})=>(s.forEach((u,l)=>{this.os.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function oM(n){return jr(n,"remoteDocumentGlobal")}function Eg(n){return jr(n,"remoteDocumentsV14")}function q0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aM(n,e){const t=e.documentKey.path.toArray();return[n,tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Nt(t[u],r[u]),s)return s;return s=Nt(t.length,r.length),s||(s=Nt(t[t.length-2],r[r.length-2]),s||Nt(t[t.length-1],r[r.length-1]))}class LN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&pg(r.mutation,s,Pr.empty(),Vn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const s=xo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Zh();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=xo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=es();const l=Yh(),m=Yh();return t.forEach((w,b)=>{const x=r.get(b.key);s.has(b.key)&&(void 0===x||x.mutation instanceof fa)?u=u.insert(b.key,b):void 0!==x?(l.set(b.key,x.mutation.getFieldMask()),pg(x.mutation,b,x.mutation.getFieldMask(),Vn.now())):l.set(b.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,x)=>l.set(b,x)),t.forEach((b,x)=>{var N;return m.set(b,new LN(x,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Yh();let s=new Dn((l,m)=>l-m),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let x=r.get(w)||Pr.empty();x=m.applyToLocalView(b,x),r.set(w,x);const N=(s.get(m.batchId)||Vt()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,x=w.value,N=lD();x.forEach(B=>{if(!u.has(B)){const Z=mD(t.get(B),r.get(B));null!==Z&&N.set(B,Z),u=u.add(B)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ry(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ie.resolve(xo());let m=-1,w=u;return l.next(b=>ie.forEach(b,(x,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next(B=>{w=w.insert(x,B)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Vt())).next(x=>({batchId:m,changes:DT(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let s=Zh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Zh();return this.indexManager.getCollectionParents(e,s).next(l=>ie.forEach(l,m=>{const w=(b=t,x=m.child(s),new uu(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Pn.newInvalidDocument(b)))});let l=Zh();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&pg(b.mutation,w,Pr.empty(),Vn.now()),Zl(t,w)&&(l=l.insert(m,w))}),l})}}class VN{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return ie.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:MT(r.bundledQuery),readTime:Er(r.readTime)}),ie.resolve();var r}}class UN{constructor(){this.overlays=new Dn(Ke.comparator),this.hs=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xo();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.de(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hs.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.hs.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=xo(),u=t.length+1,l=new Ke(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Dn((b,x)=>b-x);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=u.get(b.largestBatchId);null===x&&(x=xo(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=xo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,x)=>m.set(b,x)),!(m.size()>=s)););return ie.resolve(m)}de(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.hs.get(s.largestBatchId).delete(r.key);this.hs.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new _D(t,r));let u=this.hs.get(t);void 0===u&&(u=Vt(),this.hs.set(t,u)),this.hs.set(t,u.add(r.key))}}class LT{constructor(){this.ls=new Nn(vi.fs),this.ds=new Nn(vi._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new vi(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Ke(new rn([])),r=new vi(t,e),s=new vi(t,e+1),u=[];return this.ds.forEachInRange([r,s],l=>{this.gs(l),u.push(l.key)}),u}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Ke(new rn([])),r=new vi(t,e),s=new vi(t,e+1);let u=Vt();return this.ds.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new vi(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Ke.comparator(e.key,t.key)||Nt(e.Es,t.Es)}static _s(e,t){return Nt(e.Es,t.Es)||Ke.comparator(e.key,t.key)}}class BN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Nn(vi.fs)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.As;this.As++;const l=new Jh(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new vi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Ps(t+1),u=s<0?0:s;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),s=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.vs(l.Es);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Nt);return t.forEach(s=>{const u=new vi(s,0),l=new vi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.Es)})}),ie.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new vi(new Ke(u),0);let m=new Nn(Nt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.Es)),!0)},l),ie.resolve(this.bs(m))}bs(e){const t=[];return e.forEach(r=>{const s=this.vs(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){lt(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,s=>{const u=new vi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new vi(t,0),s=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ie.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jN{constructor(e){this.Ss=e,this.docs=new Dn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Pn.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=es();const l=t.path,m=new Ke(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:x}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||f0(jh(x),r)<=0||(s.has(x.key)||Zl(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,r,s){rt()}Ds(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $N(this)}getSize(e){return ie.resolve(this.size)}}class $N extends iM{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.rs.addEntry(e,s)):this.rs.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class HN{constructor(e){this.persistence=e,this.Cs=new lu(t=>ql(t),Wl),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.xs=0,this.Ns=new LT,this.targetCount=0,this.ks=wg.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),ie.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new wg(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.$n(t),ie.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Cs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Cs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ie.waitFor(u).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ns.containsKey(t))}}class VT{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Oi(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new HN(this),this.indexManager=new xN,this.remoteDocumentCache=new jN(r=>this.referenceDelegate.Bs(r)),this.serializer=new $y(t),this.Ls=new VN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new BN(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new GN(this.Os.next());return this.referenceDelegate.qs(),r(s).next(u=>this.referenceDelegate.Us(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ks(e,t){return ie.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class GN extends tg{constructor(e){super(),this.currentSequenceNumber=e}}class UD{constructor(e){this.persistence=e,this.Gs=new LT,this.Qs=null}static js(e){return new UD(e)}get zs(){if(this.Qs)return this.Qs;throw rt()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(s=>this.zs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.zs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.zs,r=>{const s=Ke.fromPath(r);return this.Ws(e,s).next(u=>{u||t.removeEntry(s,ft.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return ie.or([()=>ie.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class zN{constructor(e){this.serializer=e}$(e,t,r,s){const u=new ng("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jI,{unique:!0}),m.createObjectStore("documentMutations"),lM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ie.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),lM(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jI,{unique:!0});const x=w.store("mutations"),N=b.map(B=>x.put(B));return ie.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Js(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(u)))),r<7&&s>=7&&(l=l.next(()=>this.Xs(u))),r<8&&s>=8&&(l=l.next(()=>this.Zs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ti(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:zI});w.createIndex("collectionPathOverlayIndex",qI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",ag,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:$I});w.createIndex("documentKeyIndex",HI),w.createIndex("collectionGroupIndex",uT)}(e)).next(()=>this.ei(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.ni(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:lT}).createIndex("sequenceNumberIndex",dT,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:_x}).createIndex("documentKeyIndex",wx,{unique:!1})}(e))),l}Ys(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=FD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Js(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ie.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ie.forEach(m,w=>{lt(w.userId===u.userId);const b=pu(this.serializer,w);return Qx(e,u.userId,b).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new rn(l),b=[0,mi(w)];u.push(t.get(b).next(x=>x?ie.resolve():t.put({targetId:0,path:mi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:Gh});const r=t.store("collectionParents"),s=new FT,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:mi(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new rn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const x=So(m);return u(x.popLast())}))}ti(e){const t=e.store("targets");return t.X((r,s)=>{const u=td(s),l=Vx(this.serializer,u);return t.put(l)})}ei(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ke(rn.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(x))}).next(()=>ie.waitFor(s))}ni(e,t){const r=t.store("mutations"),s=sM(this.serializer),u=new VT(UD.js,this.serializer.le);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let x=null!==(b=m.get(w.userId))&&void 0!==b?b:Vt();pu(this.serializer,w).keys().forEach(N=>x=x.add(N)),m.set(w.userId,x)}),ie.forEach(m,(w,b)=>{const x=new Rr(b),N=ND.fe(this.serializer,x),B=u.getIndexManager(x),Z=LD.fe(x,this.serializer,B,u.referenceDelegate);return new cM(s,Z,N,B).recalculateAndSaveOverlaysForDocumentKeys(new w0(t,Oi.ct),w).next()})})}}function lM(n){n.createObjectStore("targetDocuments",{keyPath:cT}).createIndex("documentTargetsIndex",ki,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",GI,{unique:!0}),n.createObjectStore("targetGlobal")}const UT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BT{constructor(e,t,r,s,u,l,m,w,b,x,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=l,this.document=m,this.ii=b,this.ri=x,this.oi=N,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=B=>Promise.resolve(),!BT.D())throw new Ae(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ON(this,s),this.fi=t+"main",this.serializer=new $y(w),this.di=new qs(this.fi,this.oi,new zN(this.serializer)),this.Fs=new RN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sM(this.serializer),this.Ls=new IN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===x&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,UT);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Oi(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var r=(0,ve.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(bc(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return W0(e).get("owner").next(t=>ie.resolve(this.Ri(t)))}vi(e){return jD(e).delete(this.clientId)}Pi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=jr(r,"clientMetadata");return s.j().next(u=>{const l=e.Vi(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ie.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Si(r.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?ie.resolve(!0):W0(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,UT);return!1}}return!(!this.networkEnabled||!this.inForeground)||jD(e).j().next(r=>void 0===this.Vi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const l=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new w0(t,Oi.ct);return e.Ei(r).next(()=>e.vi(r))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(r=>this.bi(r.updateTimeMs,t)&&!this.Di(r.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>jD(e).j().next(t=>this.Vi(t,18e5).map(r=>r.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return LD.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MN(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return ND.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.oi)?hT:14===l?_0:13===l?KI:12===l?v0:11===l?WI:void rt();var l;let m;return this.di.runTransaction(e,s,u,w=>(m=new w0(w,this.Os?this.Os.next():Oi.ct),"readwrite-primary"===t?this.Ii(m).next(b=>!!b||this.Ti(m)).next(b=>{if(!b)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Ae(ce.FAILED_PRECONDITION,LI);return r(m)}).next(b=>this.Ai(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return W0(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ce.FAILED_PRECONDITION,UT)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return W0(e).put("owner",t)}static D(){return qs.D()}Ei(e){const t=W0(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}bi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,zt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W0(n){return jr(n,"owner")}function jD(n){return jr(n,"clientMetadata")}function jT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $T{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=s}static Bi(e,t){let r=Vt(),s=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new $T(e,t.fromCache,r,s)}}class dM{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ui(e,t).next(u=>u||this.Ki(e,t,s,r)).next(u=>u||this.Gi(e,t))}Ui(e,t){if(R0(t))return ie.resolve(null);let r=Li(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Py(t,null,"F"),r=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Vt(...u);return this.qi.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Qi(t,m);return this.ji(t,b,l,w.readTime)?this.Ui(e,Py(t,null,"F")):this.zi(e,b,t,w)}))})))}Ki(e,t,r,s){return R0(t)||s.isEqual(ft.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(u=>{const l=this.Qi(t,u);return this.ji(t,l,r,s)?this.Gi(e,t):(c0()<=ws.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Oy(t)),this.zi(e,l,t,vy(s,-1)))})}Qi(e,t){let r=new Nn(uD(e));return t.forEach((s,u)=>{Zl(e,u)&&(r=r.add(u))}),r}ji(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Gi(e,t){return c0()<=ws.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Oy(t)),this.qi.getDocumentsMatchingQuery(e,t,Ds.min())}zi(e,t,r,s){return this.qi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class qN{constructor(e,t,r,s){this.persistence=e,this.Wi=t,this.serializer=s,this.Hi=new Dn(Nt),this.Ji=new lu(u=>ql(u),Wl),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cM(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function hM(n,e,t,r){return new qN(n,e,t,r)}function fM(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,ve.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Vt();for(const b of s){l.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}return t.localDocuments.getDocuments(r,w).next(b=>({tr:b,removedBatchIds:l,addedBatchIds:m}))})})}),HT.apply(this,arguments)}function WN(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Xi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const x=w.batch,N=x.keys();let B=ie.resolve();return N.forEach(Z=>{B=B.next(()=>b.getEntry(m,Z)).next(Ee=>{const Re=w.docVersions.get(Z);lt(null!==Re),Ee.version.compareTo(Re)<0&&(x.applyToRemoteDocument(Ee,w),Ee.isValidDocument()&&(Ee.setReadTime(w.commitVersion),b.addEntry(Ee)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Vt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function pM(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function KN(n,e){const t=Ye(n),r=e.snapshotVersion;let s=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Xi.newChangeBuffer({trackRemovals:!0});s=t.Hi;const m=[];e.targetChanges.forEach((x,N)=>{const B=s.get(N);if(!B)return;m.push(t.Fs.removeMatchingKeys(u,x.removedDocuments,N).next(()=>t.Fs.addMatchingKeys(u,x.addedDocuments,N)));let Z=B.withSequenceNumber(u.currentSequenceNumber);var Ee,Re,Le;null!==e.targetMismatches.get(N)?Z=Z.withResumeToken(or.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):x.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(x.resumeToken,r)),s=s.insert(N,Z),Re=Z,Le=x,(0===(Ee=B).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-Ee.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.Fs.updateTargetData(u,Z))});let w=es(),b=Vt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))}),m.push(gM(u,l,e.documentUpdates).next(x=>{w=x.er,b=x.nr})),!r.isEqual(ft.min())){const x=t.Fs.getLastRemoteSnapshotVersion(u).next(N=>t.Fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(x)}return ie.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Hi=s,u))}function gM(n,e,t){let r=Vt(),s=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(ft.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{er:l,nr:s}})}function ZN(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qy(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Fs.getTargetData(r,e).next(u=>u?(s=u,ie.resolve(s)):t.Fs.allocateTargetId(r).next(l=>(s=new Mo(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Hi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}function Wy(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,ve.Z)(function*(n,e,t){const r=Ye(n),s=r.Hi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!bc(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(s.target)}),GT.apply(this,arguments)}function $D(n,e,t){const r=Ye(n);let s=ft.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const x=Ye(m),N=x.Ji.get(b);return void 0!==N?ie.resolve(x.Hi.get(N)):x.Fs.getTargetData(w,b)}(r,l,Li(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Wi.getDocumentsMatchingQuery(l,e,t?s:ft.min(),t?u:Vt())).next(m=>(vM(r,ha(e),m),{documents:m,sr:u})))}function mM(n,e){const t=Ye(n),r=Ye(t.Fs),s=t.Hi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.he(u,e).next(l=>l?l.target:null))}function yM(n,e){const t=Ye(n),r=t.Yi.get(e)||ft.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Xi.getAllFromCollectionGroup(s,e,vy(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(vM(t,e,s),s))}function vM(n,e,t){let r=n.Yi.get(e)||ft.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Yi.set(e,r)}function zT(){return zT=(0,ve.Z)(function*(n,e,t,r){const s=Ye(n);let u=Vt(),l=es();for(const b of t){const x=e.ir(b.metadata.name);b.document&&(u=u.add(x));const N=e.rr(b);N.setReadTime(e.ur(b.metadata.readTime)),l=l.insert(x,N)}const m=s.Xi.newChangeBuffer({trackRemovals:!0}),w=yield qy(s,(b=r,Li(Mc(rn.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>gM(b,m,l).next(x=>(m.apply(b),x)).next(x=>s.Fs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Fs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,x.er,x.nr)).next(()=>x.er)))}),zT.apply(this,arguments)}function QN(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,ve.Z)(function*(n,e,t=Vt()){const r=yield qy(n,Li(MT(e.bundledQuery))),s=Ye(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Er(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ls.saveNamedQuery(u,e);const m=r.withResumeToken(or.EMPTY_BYTE_STRING,l);return s.Hi=s.Hi.insert(m.targetId,m),s.Fs.updateTargetData(u,m).next(()=>s.Fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Fs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ls.saveNamedQuery(u,e))})}),qT.apply(this,arguments)}function _M(n,e){return`firestore_clients_${n}_${e}`}function wM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function WT(n,e){return`firestore_targets_${n}_${e}`}class HD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static cr(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ae(s.error.code,s.error.message))),l?new HD(e,t,s.state,u):(Xn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static cr(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ae(r.error.code,r.error.message))),u?new K0(e,r.state,s):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=ky();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=UI(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new GD(e,u):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KT{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KT(t.clientId,t.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZT{constructor(){this.activeTargetIds=ky()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YT{constructor(e,t,r,s,u){this.window=e,this.si=t,this.persistenceKey=r,this.dr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Dn(Nt),this.started=!1,this.gr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.yr=_M(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new ZT),this.Ir=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Mi();for(const s of t){if(s===e.dr)continue;const u=e.getItem(_M(e.persistenceKey,s));if(u){const l=GD.cr(s,u);l&&(e.mr=e.mr.insert(l.clientId,l))}}e.vr();const r=e.storage.getItem(e.Ar);if(r){const s=e.Pr(r);s&&e.br(s)}for(const s of e.gr)e.wr(s);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,r){this.Sr(e,t,r),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(WT(this.persistenceKey,e));if(r){const s=K0.cr(e,r);s&&(t=s.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(WT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Nr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Dr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.yr)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ir.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.$r(s,null)}{const s=t.Fr(r.key,r.newValue);if(s)return t.$r(s.clientId,s)}}else if(t.Tr.test(r.key)){if(null!==r.newValue){const s=t.Br(r.key,r.newValue);if(s)return t.Lr(s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.qr(r.key,r.newValue);if(s)return t.Ur(s)}}else if(r.key===t.Ar){if(null!==r.newValue){const s=t.Pr(r.newValue);if(s)return t.br(s)}}else if(r.key===t.pr){const s=function(u){let l=Oi.ct;if(null!=u)try{const m=JSON.parse(u);lt("number"==typeof m),l=m}catch(m){Xn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Oi.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Kr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Gr(u)))}}else t.gr.push(r)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,r){const s=new HD(this.currentUser,e,t,r),u=wM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.ar())}Dr(e){const t=wM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,r){const s=WT(this.persistenceKey,e),u=new K0(e,t,r);this.setItem(s,u.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const r=this.Or(e);return GD.cr(r,t)}Br(e,t){const r=this.Tr.exec(e),s=Number(r[1]);return HD.cr(new Rr(void 0!==r[2]?r[2]:null),s,t)}qr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return K0.cr(s,t)}Pr(e){return KT.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const r=t?this.mr.insert(e,t):this.mr.remove(e),s=this.Vr(this.mr),u=this.Vr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.zr(l,m).then(()=>{this.mr=r})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=ky();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class EM{constructor(){this.Wr=new ZT,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new ZT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class JN{Jr(e){}shutdown(){}}class IM{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zD=null;function QT(){return null===zD?zD=268435456+Math.round(2147483648*Math.random()):zD++,"0x"+zD.toString(16)}const XN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e1{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const ns="WebChannelConnection";class t1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,s,u){const l=QT(),m=this.Io(e,t);Pe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.To(w,s,u),this.Eo(e,m,w,r).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Co("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}Ao(e,t,r,s,u,l){return this.po(e,t,r,s,u)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}Io(e,t){return`${this.wo}/v1/${t}:${XN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,s){const u=QT();return new Promise((l,m)=>{const w=new OI;w.setWithCredentials(!0),w.listenOnce(NI.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case RI.NO_ERROR:const x=w.getResponseJson();Pe(ns,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),l(x);break;case RI.TIMEOUT:Pe(ns,`RPC '${e}' ${u} timed out`),m(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case RI.HTTP_ERROR:const N=w.getStatus();if(Pe(ns,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let B=w.getResponseJson();Array.isArray(B)&&(B=B[0]);const Z=B?.error;if(Z&&Z.status&&Z.message){const Ee=function(Re){const Le=Re.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Le)>=0?Le:ce.UNKNOWN}(Z.status);m(new Ae(Ee,Z.message))}else m(new Ae(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Pe(ns,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(s);Pe(ns,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const s=QT(),u=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=MI(),m=Yb(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new o0({})),this.To(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const b=u.join("");Pe(ns,`Creating RPC '${e}' stream ${s}: ${b}`,w);const x=l.createWebChannel(b,w);let N=!1,B=!1;const Z=new e1({io:Re=>{B?Pe(ns,`Not sending because RPC '${e}' stream ${s} is closed:`,Re):(N||(Pe(ns,`Opening RPC '${e}' stream ${s} transport.`),x.open(),N=!0),Pe(ns,`RPC '${e}' stream ${s} sending:`,Re),x.send(Re))},ro:()=>x.close()}),Ee=(Re,Le,pt)=>{Re.listen(Le,xt=>{try{pt(xt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return Ee(x,gy.EventType.OPEN,()=>{B||Pe(ns,`RPC '${e}' stream ${s} transport opened.`)}),Ee(x,gy.EventType.CLOSE,()=>{B||(B=!0,Pe(ns,`RPC '${e}' stream ${s} transport closed`),Z.fo())}),Ee(x,gy.EventType.ERROR,Re=>{B||(B=!0,Co(ns,`RPC '${e}' stream ${s} transport errored:`,Re),Z.fo(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))}),Ee(x,gy.EventType.MESSAGE,Re=>{var Le;if(!B){const pt=Re.data[0];lt(!!pt);const xt=pt,_t=xt.error||(null===(Le=xt[0])||void 0===Le?void 0:Le.error);if(_t){Pe(ns,`RPC '${e}' stream ${s} received error:`,_t);const jt=_t.status;let Gt=function(Ss){const ff=ur[Ss];if(void 0!==ff)return ED(ff)}(jt),un=_t.message;void 0===Gt&&(Gt=ce.INTERNAL,un="Unknown error status: "+jt+" with message "+_t.message),B=!0,Z.fo(new Ae(Gt,un)),x.close()}else Pe(ns,`RPC '${e}' stream ${s} received:`,pt),Z._o(pt)}}),Ee(m,s0.STAT_EVENT,Re=>{Re.stat===PI.PROXY?Pe(ns,`RPC '${e}' stream ${s} detected buffering proxy`):Re.stat===PI.NOPROXY&&Pe(ns,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{Z.lo()},0),Z}}function DM(){return typeof window<"u"?window:null}function qD(){return typeof document<"u"?document:null}function Z0(n){return new Fx(n,!0)}class JT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=s,this.bo=u,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class CM{constructor(e,t,r,s,u,l,m,w){this.si=e,this.Mo=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new JT(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,ve.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,ve.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.$o===t&&this.Xo(r,s)},r=>{e(()=>{const s=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(s)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(s=>{r(()=>this.Zo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,ve.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n1 extends CM{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function I(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:rt(),s=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(lt(void 0===b||"string"==typeof b),or.fromBase64String(b||"")):(lt(void 0===b||b instanceof Uint8Array),or.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ce.UNKNOWN:ED(w.code);return new Ae(b,w.message||"")}(l);t=new TD(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=du(n,r.document.name),u=Er(r.document.updateTime),l=r.document.createTime?Er(r.document.createTime):ft.min(),m=new wr({mapValue:{fields:r.document.fields}}),w=Pn.newFoundDocument(s,u,l,m);t=new ef(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=du(n,r.document),u=r.readTime?Er(r.readTime):ft.min(),l=Pn.newNoDocument(s,u);t=new ef([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=du(n,r.document);t=new ef([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new Nx(s,u);t=new bD(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ft.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?ft.min():u.readTime?Er(u.readTime):ft.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=a(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=Sy(m)?{documents:k(s,m)}:{query:H(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=MD(s,u.resumeToken);const w=xD(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(ft.min())>0){l.readTime=yg(s,u.snapshotVersion.toTimestamp());const w=xD(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function Ie(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=a(this.serializer),t.removeTarget=e,this.zo(t)}}class r1 extends CM{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function R(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(r,s){let u=Er(r.updateTime?r.updateTime:s);return u.isEqual(ft.min())&&(u=Er(s)),new Mx(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.uu(r,t)}return lt(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=a(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>C(this.serializer,r))};this.zo(t)}}class i1 extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.hu=!1}lu(){if(this.hu)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.po(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ce.UNKNOWN,s.toString())})}Ao(e,t,r,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Ao(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ce.UNKNOWN,u.toString())})}terminate(){this.hu=!0}}class o1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Xn(t),this.wu=!1):Pe("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class a1{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=u,this.vu.Jr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var w;af(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ve.Z)(function*(b){const x=Ye(b);x.Au.add(4),yield Ky(x),x.Pu.set("Unknown"),x.Au.delete(4),yield Y0(x)}),function(b){return w.apply(this,arguments)})(l))}))}),this.Pu=new o1(r,s)}}function Y0(n){return eS.apply(this,arguments)}function eS(){return eS=(0,ve.Z)(function*(n){if(af(n))for(const e of n.Ru)yield e(!0)}),eS.apply(this,arguments)}function Ky(n){return tS.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),tS.apply(this,arguments)}function WD(n,e){const t=Ye(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),iS(t)?rS(t):Yy(t).Uo()&&nS(t,e))}function Q0(n,e){const t=Ye(n),r=Yy(t);t.Eu.delete(e),r.Uo()&&bM(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():af(t)&&t.Pu.set("Unknown"))}function nS(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yy(n).nu(e)}function bM(n,e){n.bu.Lt(e),Yy(n).su(e)}function rS(n){n.bu=new Px({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),Yy(n).start(),n.Pu.mu()}function iS(n){return af(n)&&!Yy(n).qo()&&n.Eu.size>0}function af(n){return 0===Ye(n).Au.size}function TM(n){n.bu=void 0}function u1(n){return sS.apply(this,arguments)}function sS(){return sS=(0,ve.Z)(function*(n){n.Eu.forEach((e,t)=>{nS(n,e)})}),sS.apply(this,arguments)}function c1(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,ve.Z)(function*(n,e){TM(n),iS(n)?(n.Pu.pu(e),rS(n)):n.Pu.set("Unknown")}),oS.apply(this,arguments)}function l1(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=(0,ve.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof TD&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Eu.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Eu.delete(m),s.bu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KD(n,r)}else if(e instanceof ef?n.bu.Wt(e):e instanceof bD?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(ft.min()))try{const r=yield pM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.bu.ue(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.Eu.get(w);b&&s.Eu.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=s.Eu.get(m);if(!b)return;s.Eu.set(m,b.withResumeToken(or.EMPTY_BYTE_STRING,b.snapshotVersion)),bM(s,m);const x=new Mo(b.target,m,w,b.sequenceNumber);nS(s,x)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield KD(n,r)}var r}),aS.apply(this,arguments)}function KD(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,ve.Z)(function*(n,e,t){if(!bc(e))throw e;n.Au.add(1),yield Ky(n),n.Pu.set("Offline"),t||(t=()=>pM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield Y0(n)}))}),uS.apply(this,arguments)}function SM(n,e){return e().catch(t=>KD(n,t,e))}function Zy(n){return cS.apply(this,arguments)}function cS(){return cS=(0,ve.Z)(function*(n){const e=Ye(n),t=uf(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;d1(e);)try{const s=yield ZN(e.localStore,r);if(null===s){0===e.Tu.length&&t.Qo();break}r=s.batchId,h1(e,s)}catch(s){yield KD(e,s)}AM(e)&&xM(e)}),cS.apply(this,arguments)}function d1(n){return af(n)&&n.Tu.length<10}function h1(n,e){n.Tu.push(e);const t=uf(n);t.Uo()&&t.ru&&t.ou(e.mutations)}function AM(n){return af(n)&&!uf(n).qo()&&n.Tu.length>0}function xM(n){uf(n).start()}function f1(n){return lS.apply(this,arguments)}function lS(){return lS=(0,ve.Z)(function*(n){uf(n).au()}),lS.apply(this,arguments)}function p1(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n){const e=uf(n);for(const t of n.Tu)e.ou(t.mutations)}),dS.apply(this,arguments)}function g1(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,ve.Z)(function*(n,e,t){const r=n.Tu.shift(),s=vD.from(r,e,t);yield SM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Zy(n)}),hS.apply(this,arguments)}function m1(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,ve.Z)(function*(n,e){var t;e&&uf(n).ru&&(yield(t=(0,ve.Z)(function*(r,s){if(wD(u=s.code)&&u!==ce.ABORTED){const l=r.Tu.shift();uf(r).Go(),yield SM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Zy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),AM(n)&&xM(n)}),fS.apply(this,arguments)}function MM(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,ve.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=af(t);t.Au.add(3),yield Ky(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield Y0(t)}),pS.apply(this,arguments)}function gS(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,ve.Z)(function*(n,e){const t=Ye(n);e?(t.Au.delete(2),yield Y0(t)):e||(t.Au.add(2),yield Ky(t),t.Pu.set("Unknown"))}),mS.apply(this,arguments)}function Yy(n){return n.Vu||(n.Vu=function(e,t,r){const s=Ye(e);return s.lu(),new n1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{oo:u1.bind(null,n),co:c1.bind(null,n),eu:l1.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Vu.Go(),iS(n)?rS(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),TM(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}function uf(n){return n.Su||(n.Su=function(e,t,r){const s=Ye(e);return s.lu(),new r1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{oo:f1.bind(null,n),co:m1.bind(null,n),cu:p1.bind(null,n),uu:g1.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Go(),yield Zy(n)):(yield n.Su.stop(),n.Tu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Tu.length} pending writes`),n.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Su}class yS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new yS(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qy(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),bc(n))return new Ae(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Jy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Zh(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new Jy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RM{constructor(){this.Du=new Dn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):rt():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xy{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Xy(e,t,Jy.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class y1{constructor(){this.xu=void 0,this.listeners=[]}}class v1{constructor(){this.queries=new lu(e=>cu(e),Kl),this.onlineState="Unknown",this.Nu=new Set}}function vS(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,ve.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new y1),s)try{u.xu=yield t.onListen(r)}catch(l){const m=Qy(l,`Initialization of query '${Oy(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.ku(t.onlineState),u.xu&&e.Mu(u.xu)&&IS(t)}),_S.apply(this,arguments)}function wS(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,ve.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),ES.apply(this,arguments)}function _1(n,e){const t=Ye(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Mu(s)&&(r=!0);l.xu=s}}r&&IS(t)}function w1(n,e,t){const r=Ye(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function IS(n){n.Nu.forEach(e=>{e.next()})}class DS{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Xy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=Xy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class E1{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class NM{constructor(e){this.serializer=e}ir(e){return du(this.serializer,e)}rr(e){return e.metadata.exists?p(this.serializer,e.document,!1):Pn.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Er(e)}}class I1{constructor(e,t,r){this.Qu=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PM(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const r=rn.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,r=new NM(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.ir(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Vt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function YN(n,e,t,r){return zT.apply(this,arguments)}(e.localStore,new NM(e.serializer),e.documents,e.Qu.id),r=e.zu(e.documents);for(const s of e.queries)yield QN(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function PM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OM{constructor(e){this.key=e}}class kM{constructor(e){this.key=e}}class FM{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Vt(),this.mutatedKeys=Vt(),this.Zu=uD(e),this.tc=new Jy(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new RM,s=t?t.tc:this.tc;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((x,N)=>{const B=s.get(x),Z=Zl(this.query,N)?N:null,Ee=!!B&&this.mutatedKeys.has(B.key),Re=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Le=!1;B&&Z?B.data.isEqual(Z.data)?Ee!==Re&&(r.track({type:3,doc:Z}),Le=!0):this.ic(B,Z)||(r.track({type:2,doc:Z}),Le=!0,(w&&this.Zu(Z,w)>0||b&&this.Zu(Z,b)<0)&&(m=!0)):!B&&Z?(r.track({type:0,doc:Z}),Le=!0):B&&!Z&&(r.track({type:1,doc:B}),Le=!0,(w||b)&&(m=!0)),Le&&(Z?(l=l.add(Z),u=Re?u.add(x):u.delete(x)):(l=l.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const x="F"===this.query.limitType?l.last():l.first();l=l.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{tc:l,sc:r,ji:m,mutatedKeys:u}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const u=e.sc.Cu();u.sort((b,x)=>function(N,B){const Z=Ee=>{switch(Ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return Z(N)-Z(B)}(b.type,x.type)||this.Zu(b.doc,x.doc)),this.rc(r);const l=t?this.oc():[],m=0===this.Xu.size&&this.current?1:0,w=m!==this.Yu;return this.Yu=m,0!==u.length||w?{snapshot:new Xy(this.query,e.tc,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:l}:{uc:l}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new RM,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Vt(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new kM(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new OM(r))}),t}ac(e){this.Ju=e.sr,this.Xu=Vt();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return Xy.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class D1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class C1{constructor(e){this.key=e,this.lc=!1}}class b1{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.fc={},this.dc=new lu(m=>cu(m),Kl),this._c=new Map,this.wc=new Set,this.mc=new Dn(Ke.comparator),this.gc=new Map,this.yc=new LT,this.Ic={},this.Tc=new Map,this.Ec=wg.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function T1(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,ve.Z)(function*(n,e){const t=WS(n);let r,s;const u=t.dc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.hc();else{const l=yield qy(t.localStore,Li(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield bS(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&WD(t.remoteStore,l)}return s}),CS.apply(this,arguments)}function bS(n,e,t,r,s){return TS.apply(this,arguments)}function TS(){return TS=(0,ve.Z)(function*(n,e,t,r,s){n.Rc=(N,B,Z)=>{return(Ee=(0,ve.Z)(function*(Re,Le,pt,xt){let _t=Le.view.nc(pt);_t.ji&&(_t=yield $D(Re.localStore,Le.query,!1).then(({documents:un})=>Le.view.nc(un,_t)));const jt=xt&&xt.targetChanges.get(Le.targetId),Gt=Le.view.applyChanges(_t,Re.isPrimaryClient,jt);return FS(Re,Le.targetId,Gt.uc),Gt.snapshot}),function(Re,Le,pt,xt){return Ee.apply(this,arguments)})(n,N,B,Z);var Ee};const u=yield $D(n.localStore,e,!0),l=new FM(e,u.sr),m=l.nc(u.documents),w=Xh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);FS(n,t,b.uc);const x=new D1(e,t,l);return n.dc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),TS.apply(this,arguments)}function S1(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,ve.Z)(function*(n,e){const t=Ye(n),r=t.dc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!Kl(u,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Q0(t.remoteStore,r.targetId),ev(t,r.targetId)}).catch(To))):(ev(t,r.targetId),yield Wy(t.localStore,r.targetId,!0))}),SS.apply(this,arguments)}function AS(){return AS=(0,ve.Z)(function*(n,e,t){const r=KS(n);try{const s=yield function(u,l){const m=Ye(u),w=Vn.now(),b=l.reduce((B,Z)=>B.add(Z.key),Vt());let x,N;return m.persistence.runTransaction("Locally write mutations","readwrite",B=>{let Z=es(),Ee=Vt();return m.Xi.getEntries(B,b).next(Re=>{Z=Re,Z.forEach((Le,pt)=>{pt.isValidDocument()||(Ee=Ee.add(Le))})}).next(()=>m.localDocuments.getOverlayedDocuments(B,Z)).next(Re=>{x=Re;const Le=[];for(const pt of l){const xt=TT(pt,x.get(pt.key).overlayedDocument);null!=xt&&Le.push(new fa(pt.key,xt,yT(xt.value.mapValue),zn.exists(!0)))}return m.mutationQueue.addMutationBatch(B,w,Le,l)}).next(Re=>{N=Re;const Le=Re.applyToLocalDocumentSet(x,Ee);return m.documentOverlayCache.saveOverlays(B,Re.batchId,Le)})}).then(()=>({batchId:N.batchId,changes:DT(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Ic[u.currentUser.toKey()];w||(w=new Dn(Nt)),w=w.insert(l,m),u.Ic[u.currentUser.toKey()]=w}(r,s.batchId,t),yield nd(r,s.changes),yield Zy(r.remoteStore)}catch(s){const u=Qy(s,"Failed to persist write");t.reject(u)}}),AS.apply(this,arguments)}function LM(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,ve.Z)(function*(n,e){const t=Ye(n);try{const r=yield KN(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.gc.get(u);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.lc=!0:s.modifiedDocuments.size>0?lt(l.lc):s.removedDocuments.size>0&&(lt(l.lc),l.lc=!1))}),yield nd(t,r,e)}catch(r){yield To(r)}}),xS.apply(this,arguments)}function VM(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.dc.forEach((u,l)=>{const m=l.view.ku(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ye(u);m.onlineState=l;let w=!1;m.queries.forEach((b,x)=>{for(const N of x.listeners)N.ku(l)&&(w=!0)}),w&&IS(m)}(r.eventManager,e),s.length&&r.fc.eu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function x1(n,e,t){return MS.apply(this,arguments)}function MS(){return MS=(0,ve.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.gc.get(e),u=s&&s.key;if(u){let l=new Dn(Ke.comparator);l=l.insert(u,Pn.newNoDocument(u,ft.min()));const m=Vt().add(u),w=new By(ft.min(),new Map,new Dn(Nt),l,m);yield LM(r,w),r.mc=r.mc.remove(u),r.gc.delete(e),LS(r)}else yield Wy(r.localStore,e,!1).then(()=>ev(r,e,t)).catch(To)}),MS.apply(this,arguments)}function M1(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,ve.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const s=yield WN(t.localStore,e);kS(t,r,null),OS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,s)}catch(s){yield To(s)}}),RS.apply(this,arguments)}function R1(n,e,t){return NS.apply(this,arguments)}function NS(){return NS=(0,ve.Z)(function*(n,e,t){const r=Ye(n);try{const s=yield function(u,l){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(x=>(lt(null!==x),b=x.keys(),m.mutationQueue.removeMutationBatch(w,x))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);kS(r,e,t),OS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,s)}catch(s){yield To(s)}}),NS.apply(this,arguments)}function PS(){return PS=(0,ve.Z)(function*(n,e){const t=Ye(n);af(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Tc.get(r)||[];s.push(e),t.Tc.set(r,s)}catch(r){const s=Qy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),PS.apply(this,arguments)}function OS(n,e){(n.Tc.get(e)||[]).forEach(t=>{t.resolve()}),n.Tc.delete(e)}function kS(n,e,t){const r=Ye(n);let s=r.Ic[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Ic[r.currentUser.toKey()]=s}}function ev(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||UM(n,r)})}function UM(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(Q0(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),LS(n))}function FS(n,e,t){for(const r of t)r instanceof OM?(n.yc.addReference(r.key,e),P1(n,r)):r instanceof kM?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||UM(n,r.key)):rt()}function P1(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.wc.add(r),LS(n))}function LS(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Ke(rn.fromString(e)),r=n.Ec.next();n.gc.set(r,new C1(t)),n.mc=n.mc.insert(t,r),WD(n.remoteStore,new Mo(Li(Mc(t.path)),r,"TargetPurposeLimboResolution",Oi.ct))}}function nd(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,ve.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[],l=[];var m;r.dc.isEmpty()||(r.dc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const x=$T.Bi(w.targetId,b);u.push(x)}}))}),yield Promise.all(l),r.fc.eu(s),yield(m=(0,ve.Z)(function*(w,b){const x=Ye(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ie.forEach(b,B=>ie.forEach(B.$i,Z=>x.persistence.referenceDelegate.addReference(N,B.targetId,Z)).next(()=>ie.forEach(B.Fi,Z=>x.persistence.referenceDelegate.removeReference(N,B.targetId,Z)))))}catch(N){if(!bc(N))throw N;Pe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const B=N.targetId;if(!N.fromCache){const Z=x.Hi.get(B),Re=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);x.Hi=x.Hi.insert(B,Re)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),VS.apply(this,arguments)}function O1(n,e){return US.apply(this,arguments)}function US(){return US=(0,ve.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield fM(t.localStore,e);t.currentUser=e,(s=t).Tc.forEach(l=>{l.forEach(m=>{m.reject(new Ae(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.tr)}var s}),US.apply(this,arguments)}function k1(n,e){const t=Ye(n),r=t.gc.get(e);if(r&&r.lc)return Vt().add(r.key);{let s=Vt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.dc.get(l);s=s.unionWith(m.view.ec)}return s}}function F1(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ve.Z)(function*(n,e){const t=Ye(n),r=yield $D(t.localStore,e.query,!0),s=e.view.ac(r);return t.isPrimaryClient&&FS(t,e.targetId,s.uc),s}),BS.apply(this,arguments)}function L1(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,ve.Z)(function*(n,e){const t=Ye(n);return yM(t.localStore,e).then(r=>nd(t,r))}),jS.apply(this,arguments)}function V1(n,e,t,r){return $S.apply(this,arguments)}function $S(){return $S=(0,ve.Z)(function*(n,e,t,r){const s=Ye(n),u=yield function(l,m){const w=Ye(l),b=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.Vn(x,m).next(N=>N?w.localDocuments.getDocuments(x,N):ie.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Zy(s.remoteStore):"acknowledged"===t||"rejected"===t?(kS(s,e,r||null),OS(s,e),m=e,Ye(Ye(s.localStore).mutationQueue).Dn(m)):rt(),yield nd(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),$S.apply(this,arguments)}function HS(){return HS=(0,ve.Z)(function*(n,e){const t=Ye(n);if(WS(t),KS(t),!0===e&&!0!==t.Ac){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield BM(t,r.toArray());t.Ac=!0,yield gS(t.remoteStore,!0);for(const u of s)WD(t.remoteStore,u)}else if(!1===e&&!1!==t.Ac){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(ev(t,l),Wy(t.localStore,l,!0))),Q0(t.remoteStore,l)}),yield s,yield BM(t,r),function(u){const l=Ye(u);l.gc.forEach((m,w)=>{Q0(l.remoteStore,w)}),l.yc.Is(),l.gc=new Map,l.mc=new Dn(Ke.comparator)}(t),t.Ac=!1,yield gS(t.remoteStore,!1)}}),HS.apply(this,arguments)}function BM(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,ve.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield qy(r.localStore,Li(w[0]));for(const b of w){const x=r.dc.get(b),N=yield F1(r,x);N.snapshot&&u.push(N.snapshot)}}else{const b=yield mM(r.localStore,l);m=yield qy(r.localStore,b),yield bS(r,jM(b),l,!1,m.resumeToken)}s.push(m)}return r.fc.eu(u),s}),GS.apply(this,arguments)}function jM(n){return aD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function B1(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Mi()}function j1(n,e,t,r){return zS.apply(this,arguments)}function zS(){return zS=(0,ve.Z)(function*(n,e,t,r){const s=Ye(n);if(s.Ac)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield yM(s.localStore,ha(u[0])),m=By.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,or.EMPTY_BYTE_STRING);yield nd(s,l,m);break}case"rejected":yield Wy(s.localStore,e,!0),ev(s,e,r);break;default:rt()}}),zS.apply(this,arguments)}function $1(n,e,t){return qS.apply(this,arguments)}function qS(){return qS=(0,ve.Z)(function*(n,e,t){const r=WS(n);if(r.Ac){for(const s of e){if(r._c.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield mM(r.localStore,s),l=yield qy(r.localStore,u);yield bS(r,jM(u),l.targetId,!1,l.resumeToken),WD(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Wy(r.localStore,s,!1).then(()=>{Q0(r.remoteStore,s),ev(r,s)}).catch(To))}}),qS.apply(this,arguments)}function WS(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x1.bind(null,e),e.fc.eu=_1.bind(null,e.eventManager),e.fc.vc=w1.bind(null,e.eventManager),e}function KS(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R1.bind(null,e),e}class J0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=Z0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hM(this.persistence,new dM,e.initialUser,this.serializer)}createPersistence(e){return new VT(UD.js,this.serializer)}createSharedClientState(e){return new EM}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ZS extends J0{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield KS(r.bc.syncEngine),yield Zy(r.bc.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hM(this.persistence,new dM,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new m0(t,this.persistence);return new VI(e.asyncQueue,r)}createPersistence(e){const t=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new BT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DM(),qD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new EM}}class $M extends ZS{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const s=r.bc.syncEngine;r.sharedClientState instanceof YT&&(r.sharedClientState.syncEngine={Qr:V1.bind(null,s),jr:j1.bind(null,s),zr:$1.bind(null,s),Mi:B1.bind(null,s),Gr:L1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var u=(0,ve.Z)(function*(l){yield function U1(n,e){return HS.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=DM();if(!YT.D(t))throw new Ae(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tv{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>VM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=O1.bind(null,r.syncEngine),yield gS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new v1}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),r=new t1(e.databaseInfo);return new i1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>VM(this.syncEngine,m,0),l=IM.D()?new IM:new JN,new a1(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const x=new b1(r,s,u,l,m,w);return b&&(x.Ac=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ye(t);Pe("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield Ky(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HM(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class z1{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(r=>{r&&r.Gu()?this.metadata.resolve(r.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ku)}`))},r=>this.metadata.reject(r))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const r=e.Cc.decode(t),s=Number(r);isNaN(s)&&e.kc(`length string (${r}) is not valid number`);const u=yield e.Mc(s);return new E1(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Mc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const r=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class q1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ve.Z)(function*(u,l){const m=Ye(u),w=a(m.serializer)+"/documents",b={documents:l.map(Z=>jy(m.serializer,Z))},x=yield m.Ao("BatchGetDocuments",w,b,l.length),N=new Map;x.forEach(Z=>{const Ee=function v(n,e){return"found"in e?function(t,r){lt(!!r.found);const s=du(t,r.found.name),u=Er(r.found.updateTime),l=r.found.createTime?Er(r.found.createTime):ft.min(),m=new wr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){lt(!!r.missing),lt(!!r.readTime);const s=du(t,r.missing),u=Er(r.readTime);return Pn.newNoDocument(s,u)}(n,e):rt()}(m.serializer,Z);N.set(Ee.key.toString(),Ee)});const B=[];return l.forEach(Z=>{const Ee=N.get(Z.toString());lt(!!Ee),B.push(Ee)}),B}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ke.fromPath(s);e.mutations.push(new gg(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(s,u){const l=Ye(s),m=a(l.serializer)+"/documents",w={writes:u.map(b=>C(l.serializer,b))};yield l.po("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?zn.exists(!1):zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new Ae(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class W1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Fc=r.maxAttempts,this.Lo=new JT(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,ve.Z)(function*(){const t=new q1(e.datastore),r=e.Lc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.qc(u)}))}).catch(s=>{e.qc(s)})}))}Lc(e){try{const t=this.updateFunction(e);return!ig(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wD(t)}return!1}}class K1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Rr.UNAUTHENTICATED,this.clientId=l0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Qy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function YD(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ve.Z)(function*(u){r.isEqual(u)||(yield fM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YS.apply(this,arguments)}function QS(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XS(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>MM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>MM(e.remoteStore,u)),n._onlineComponents=e}),JS.apply(this,arguments)}function GM(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XS(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield YD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!GM(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),yield YD(n,new J0)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield YD(n,new J0);return n._offlineComponents}),eA.apply(this,arguments)}function QD(n){return tA.apply(this,arguments)}function tA(){return tA=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield QS(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield QS(n,new tv))),n._onlineComponents}),tA.apply(this,arguments)}function zM(n){return XS(n).then(e=>e.persistence)}function JD(n){return XS(n).then(e=>e.localStore)}function qM(n){return QD(n).then(e=>e.remoteStore)}function nA(n){return QD(n).then(e=>e.syncEngine)}function nv(n){return rA.apply(this,arguments)}function rA(){return rA=(0,ve.Z)(function*(n){const e=yield QD(n),t=e.eventManager;return t.onListen=T1.bind(null,e.syncEngine),t.onUnlisten=S1.bind(null,e.syncEngine),t}),rA.apply(this,arguments)}function KM(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,l,m,w){const b=new ZD({next:N=>{u.enqueueAndForget(()=>wS(s,x));const B=N.docs.has(l);!B&&N.fromCache?w.reject(new Ae(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new DS(Mc(l.path),b,{includeMetadataChanges:!0,Uu:!0});return vS(s,x)}(yield nv(n),n.asyncQueue,e,t,r)})),r.promise}function ZM(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(s,u,l,m,w){const b=new ZD({next:N=>{u.enqueueAndForget(()=>wS(s,x)),N.fromCache&&"server"===m.source?w.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new DS(l,b,{includeMetadataChanges:!0,Uu:!0});return vS(s,x)}(yield nv(n),n.asyncQueue,e,t,r)})),r.promise}const YM=new Map;function iA(n,e,t){if(!t)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QM(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JM(n){if(!Ke.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XM(n){if(Ke.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XD(n);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eR(n,e){if(e<=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class X0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Jb;switch(t.type){case"firstParty":return new nT(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YM.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),YM.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class Oc extends Vi{constructor(e,t,r){super(e,t,Mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ke(e))}withConverter(e){return new Oc(this.firestore,e,this._path)}}function rR(n,e,...t){if(n=(0,zt.m9)(n),iA("collection","path",e),n instanceof X0){const r=rn.fromString(e,...t);return XM(r),new Oc(n,null,r)}{if(!(n instanceof qn||n instanceof Oc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return XM(r),new Oc(n.firestore,null,r)}}function eC(n,e,...t){if(n=(0,zt.m9)(n),1===arguments.length&&(e=l0.A()),iA("doc","path",e),n instanceof X0){const r=rn.fromString(e,...t);return JM(r),new qn(n,null,new Ke(r))}{if(!(n instanceof qn||n instanceof Oc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return JM(r),new qn(n.firestore,n instanceof Oc?n.converter:null,new Ke(r))}}function iR(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),(n instanceof qn||n instanceof Oc)&&(e instanceof qn||e instanceof Oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sA(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),n instanceof Vi&&e instanceof Vi&&n.firestore===e.firestore&&Kl(n._query,e._query)&&n.converter===e.converter}class iP{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new JT(this,"async_queue_retry"),this.Yc=()=>{const t=qD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=qD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=qD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Nr;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!bc(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,Xn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const s=yS.createAndSchedule(this,e,t,r,u=>this.ea(u));return this.jc.push(s),s}Xc(){this.zc&&rt()}verifyOperationInProgress(){}na(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function oA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class sP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends X0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new iP,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||sR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sR(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JI(n._databaseId,m,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var m,b;n._firestoreClient=new K1(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=s.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function oR(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield YD(n,t),yield QS(n,e),r.resolve()}catch(s){const u=s;if(!GM(u))throw u;Co("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function aR(n){if(n._initialized||n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kc(or.fromBase64String(e))}catch(t){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kc(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ig{constructor(e){this._methodName=e}}class tC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const mP=/^__.*__$/;class yP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ws(e,this.data,t,this.fieldTransforms)}}class uR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class nC{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.oa(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new nC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ca({path:r,ha:!1});return s.la(e),s}fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ca({path:r,ha:!1});return s.oa(),s}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return sC(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(cR(this.ua)&&mP.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Z0(e)}ga(e,t,r,s=!1){return new nC({ua:e,methodName:t,ma:r,path:er.emptyPath(),ha:!1,wa:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dg(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new vP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rC(n,e,t,r,s,u={}){const l=n.ga(u.merge||u.mergeFields?2:0,e,t,s);lA("Data must be an object, but it was:",l,r);const m=hR(r,l);let w,b;if(u.merge)w=new Pr(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const B=nw(e,N,t);if(!l.contains(B))throw new Ae(ce.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);pR(x,B)||x.push(B)}w=new Pr(x),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new yP(new wr(m),w,b)}class tw extends Ig{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tw}}function lR(n,e,t){return new nC({ua:3,ma:e.settings.ma,methodName:n._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class aA extends Ig{_toFieldTransform(e){return new fg(e.path,new Ql)}isEqual(e){return e instanceof aA}}class _P extends Ig{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.ya.map(u=>Cg(u,t)),s=new Jl(r);return new fg(e.path,s)}isEqual(e){return this===e}}class wP extends Ig{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.ya.map(u=>Cg(u,t)),s=new Qh(r);return new fg(e.path,s)}isEqual(e){return this===e}}class EP extends Ig{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new Xl(e.serializer,hg(e.serializer,this.pa));return new fg(e.path,t)}isEqual(e){return this===e}}function uA(n,e,t,r){const s=n.ga(1,e,t);lA("Data must be an object, but it was:",s,r);const u=[],l=wr.empty();su(r,(w,b)=>{const x=iC(e,w,t);b=(0,zt.m9)(b);const N=s.fa(x);if(b instanceof tw)u.push(x);else{const B=Cg(b,N);null!=B&&(u.push(x),l.set(x,B))}});const m=new Pr(u);return new uR(l,m,s.fieldTransforms)}function cA(n,e,t,r,s,u){const l=n.ga(1,e,t),m=[nw(e,r,t)],w=[s];if(u.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<u.length;B+=2)m.push(nw(e,u[B])),w.push(u[B+1]);const b=[],x=wr.empty();for(let B=m.length-1;B>=0;--B)if(!pR(b,m[B])){const Z=m[B];let Ee=w[B];Ee=(0,zt.m9)(Ee);const Re=l.fa(Z);if(Ee instanceof tw)b.push(Z);else{const Le=Cg(Ee,Re);null!=Le&&(b.push(Z),x.set(Z,Le))}}const N=new Pr(b);return new uR(x,N,l.fieldTransforms)}function dR(n,e,t,r=!1){return Cg(t,n.ga(r?4:3,e))}function Cg(n,e){if(fR(n=(0,zt.m9)(n)))return lA("Unsupported field value:",e,n),hR(n,e);if(n instanceof Ig)return function(t,r){if(!cR(r.ua))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Cg(l,r.da(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hg(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Vn.fromDate(t);return{timestampValue:yg(r.serializer,s)}}if(t instanceof Vn){const s=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yg(r.serializer,s)}}if(t instanceof tC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kc)return{bytesValue:MD(r.serializer,t._byteString)};if(t instanceof qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RD(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${XD(t)}`)}(n,e)}function hR(n,e){const t={};return E0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):su(n,(r,s)=>{const u=Cg(s,e.aa(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function fR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof tC||n instanceof kc||n instanceof qn||n instanceof Ig)}function lA(n,e,t){if(!fR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function nw(n,e,t){if((e=(0,zt.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return iC(n,e);throw sC("Field path arguments must be of type string or ",n,!1,void 0,t)}const IP=new RegExp("[~\\*/\\[\\]]");function iC(n,e,t){if(e.search(IP)>=0)throw sC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw sC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sC(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Ae(ce.INVALID_ARGUMENT,m+n+w)}function pR(n,e){return n.some(t=>t.isEqual(e))}class rw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DP extends rw{data(){return super.data()}}function oC(n,e){return"string"==typeof e?iC(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}function gR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dA{}class iw extends dA{}function cf(n,e,...t){let r=[];e instanceof dA&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof rv).length,l=s.filter(m=>m instanceof sw).length;if(u>1||u>0&&l>0)throw new Ae(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class sw extends iw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sw(e,t,r)}_apply(e){const t=this._parse(e);return _R(e._query,t),new Vi(e.firestore,e.converter,Ny(e._query,t))}_parse(e){const t=Dg(e.firestore);return function(s,u,l,m,w,b,x){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){vR(x,b);const B=[];for(const Z of x)B.push(yR(m,s,Z));N={arrayValue:{values:B}}}else N=yR(m,s,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||vR(x,b),N=dR(l,"where",x,"in"===b||"not-in"===b);return Wt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class rv extends dA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)_R(u,m),u=Ny(u,m)}(e._query,t),new Vi(e.firestore,e.converter,Ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hA extends iw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hA(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new lg(s,u);return function(m,w){if(null===xy(m)){const b=My(m);null!==b&&wR(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new uu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class aC extends iw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new aC(e,t,r)}_apply(e){return new Vi(e.firestore,e.converter,Py(e._query,this._limit,this._limitType))}}class uC extends iw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uC(e,t,r)}_apply(e){const t=mR(e,this.type,this._docOrFields,this._inclusive);return new Vi(e.firestore,e.converter,(s=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class cC extends iw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cC(e,t,r)}_apply(e){const t=mR(e,this.type,this._docOrFields,this._inclusive);return new Vi(e.firestore,e.converter,(s=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function mR(n,e,t,r){if(t[0]=(0,zt.m9)(t[0]),t[0]instanceof rw)return function(s,u,l,m,w){if(!m)throw new Ae(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const x of Rc(s))if(x.field.isKeyField())b.push(zl(u,m.key));else{const N=m.data.field(x.field);if(Iy(N))throw new Ae(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const B=x.field.canonicalString();throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ao(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Dg(n.firestore);return function(u,l,m,w,b,x){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ae(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let Z=0;Z<b.length;Z++){const Ee=b[Z];if(N[Z].field.isKeyField()){if("string"!=typeof Ee)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Ee}`);if(!Ry(u)&&-1!==Ee.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Ee}' contains a slash.`);const Re=u.path.child(rn.fromString(Ee));if(!Ke.isDocumentKey(Re))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Le=new Ke(Re);B.push(zl(l,Le))}else{const Re=dR(m,w,Ee);B.push(Re)}}return new Ao(B,x)}(n._query,n.firestore._databaseId,s,e,t,r)}}function yR(n,e,t){if("string"==typeof(t=(0,zt.m9)(t))){if(""===t)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ry(e)&&-1!==t.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ke.isDocumentKey(r))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zl(n,new Ke(r))}if(t instanceof qn)return zl(n,t._key);throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XD(t)}.`)}function vR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _R(n,e){if(e.isInequality()){const r=My(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=xy(n);null!==u&&wR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wR(n,e,t){if(!t.isEqual(e))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fA{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return su(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tC(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qh(e));default:return null}}convertTimestamp(e){const t=Tc(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);lt(Pc(r));const s=new Sc(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return s.isEqual(t)||Xn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class NP extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends rw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ow extends id{data(e={}){return super.data(e)}}class lf{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ow(this._firestore,this._userDataWriter,r.key,r,new bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:OP(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function IR(n,e){return n instanceof id&&e instanceof id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lf&&e instanceof lf&&n._firestore===e._firestore&&sA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class df extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function DR(n,e,t){n=tn(n,qn);const r=tn(n.firestore,Wn),s=lC(n.converter,e,t);return iv(r,[rC(Dg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,zn.none())])}function CR(n,e,t,...r){n=tn(n,qn);const s=tn(n.firestore,Wn),u=Dg(s);let l;return l="string"==typeof(e=(0,zt.m9)(e))||e instanceof rd?cA(u,"updateDoc",n._key,e,t,r):uA(u,"updateDoc",n._key,e),iv(s,[l.toMutation(n._key,zn.exists(!0))])}function bR(n,...e){var t,r,s;n=(0,zt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||oA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(oA(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,b,x;if(n instanceof qn)b=tn(n.firestore,Wn),x=Mc(n._key.path),w={next:N=>{e[l]&&e[l](pA(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=tn(n,Vi);b=tn(N.firestore,Wn),x=N._query;const B=new df(b);w={next:Z=>{e[l]&&e[l](new lf(b,B,N,Z))},error:e[l+1],complete:e[l+2]},gR(n._query)}return function(N,B,Z,Ee){const Re=new ZD(Ee),Le=new DS(B,Re,Z);return N.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return vS(yield nv(N),Le)})),()=>{Re.Sc(),N.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return wS(yield nv(N),Le)}))}}(Or(b),x,m,w)}function iv(n,e){return function(t,r){const s=new Nr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function A1(n,e,t){return AS.apply(this,arguments)}(yield nA(t),r,s)})),s.promise}(Or(n),e)}function pA(n,e,t){const r=t.docs.get(e._key),s=new df(n);return new id(n,s,e._key,r,new bg(t.hasPendingWrites,t.fromCache),e.converter)}const JP={maxAttempts:5};class TR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dg(e)}set(e,t,r){this._verifyNotCommitted();const s=hf(e,this._firestore),u=lC(s.converter,t,r),l=rC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,zn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=hf(e,this._firestore);let l;return l="string"==typeof(t=(0,zt.m9)(t))||t instanceof rd?cA(this._dataReader,"WriteBatch.update",u._key,t,r,s):uA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hf(e,this._firestore);return this._mutations=this._mutations.concat(new Nc(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(n,e){if((n=(0,zt.m9)(n)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class XP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dg(e)}get(e){const t=hf(e,this._firestore),r=new NP(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return rt();const u=s[0];if(u.isFoundDocument())return new rw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new rw(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const s=hf(e,this._firestore),u=lC(s.converter,t,r),l=rC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=hf(e,this._firestore);let l;return l="string"==typeof(t=(0,zt.m9)(t))||t instanceof rd?cA(this._dataReader,"Transaction.update",u._key,t,r,s):uA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=hf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hf(e,this._firestore),r=new df(this._firestore);return super.get(e).then(s=>new id(this._firestore,r,t._key,s._document,new bg(!1,!1),t.converter))}}function gA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function AR(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function xR(){if(!function QI(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){jl=Hs.SDK_VERSION,(0,Hs._registerComponent)(new tu.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Wn(new eT(t.getProvider("auth-internal")),new rT(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Hs.registerVersion)(u0,"3.11.0",n),(0,Hs.registerVersion)(u0,"3.11.0","esm2017")}();class aw{constructor(e){this._delegate=e}static fromBase64String(e){return xR(),new aw(kc.fromBase64String(e))}static fromUint8Array(e){return AR(),new aw(kc.fromUint8Array(e))}toBase64(){return xR(),this._delegate.toBase64()}toUint8Array(){return AR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mA(n){return function uO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cO{enableIndexedDbPersistence(e,t){return function aP(n,e){aR(n=tn(n,Wn));const t=Or(n);if(t._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new tv;return oR(t,s,new ZS(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function uP(n){aR(n=tn(n,Wn));const e=Or(n);if(e._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new tv;return oR(e,r,new $M(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cP(n){if(n._initialized&&!n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!qs.D())return Promise.resolve();const s=r+"main";yield qs.delete(s)}),function(r){return t.apply(this,arguments)})(jT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class MR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nR(n,e,t,r={}){var s;const u=(n=tn(n,X0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Co("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Rr.MOCK_USER;else{l=(0,zt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Rr(w)}n._authCredentials=new Xb(new kI(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function dP(n){return function Z1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zM(n),t=yield qM(n);return e.setNetworkEnabled(!0),function(r){const s=Ye(r);return s.Au.delete(0),Y0(s)}(t)}))}(Or(n=tn(n,Wn)))}(this._delegate)}disableNetwork(){return function hP(n){return function Y1(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zM(n),t=yield qM(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(s){const u=Ye(s);u.Au.add(0),yield Ky(u),u.Pu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Or(n=tn(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lP(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function N1(n,e){return PS.apply(this,arguments)}(yield nA(e),t)})),t.promise}(Or(n=tn(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function HP(n,e){return function X1(n,e){const t=new ZD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield nv(n),s=t,Ye(r).Nu.add(s),void s.next();var r,s})),()=>{t.Sc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield nv(n),s=t,void Ye(r).Nu.delete(s);var r,s}))}}(Or(n=tn(n,Wn)),oA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sv(this,rR(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,eC(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function rP(n,e){if(n=tn(n,X0),iA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,(t=e,new uu(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function eO(n,e,t){n=tn(n,Wn);const r=Object.assign(Object.assign({},JP),t);return function(s){if(s.maxAttempts<1)throw new Ae(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Nr;return s.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const w=yield function WM(n){return QD(n).then(e=>e.datastore)}(s);new W1(s.asyncQueue,w,l,u,m).run()})),m.promise}(Or(n),s=>e(new XP(n,s)),r)}(this._delegate,t=>e(new RR(this,t)))}batch(){return Or(this._delegate),new NR(new TR(this._delegate,e=>iv(this._delegate,e)))}loadBundle(e){return function fP(n,e){const t=Or(n=tn(n,Wn)),r=new sP;return function eP(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?B0().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return HM(w,b);if(w instanceof ArrayBuffer)return HM(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new z1(w,l);var w}(t,Z0(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function H1(n,e,t){const r=Ye(n);var s;(s=(0,ve.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(B,Z){const Ee=Ye(B),Re=Er(Z.createTime);return Ee.persistence.runTransaction("hasNewerBundle","readonly",Le=>Ee.Ls.getBundleMetadata(Le,Z.id)).then(Le=>!!Le&&Le.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(B=w).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);m._updateProgress(PM(w));const b=new I1(w,u.localStore,l.serializer);let x=yield l.Pc();for(;x;){const B=yield b.ju(x);B&&m._updateProgress(B),x=yield l.Pc()}const N=yield b.complete();return yield nd(u,N.Hu,void 0),yield function(B,Z){const Ee=Ye(B);return Ee.persistence.runTransaction("Save bundle","readwrite",Re=>Ee.Ls.saveBundleMetadata(Re,Z))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Wu)}catch(w){return Co("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var B}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield nA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function pP(n,e){return function tP(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const s=Ye(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ls.getNamedQuery(u,r))}(yield JD(n),e)}))}(Or(n=tn(n,Wn)),e).then(t=>t?new Vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class dC extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new aw(new kc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class RR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dC(e)}get(e){const t=Sg(e);return this._delegate.get(t).then(r=>new uw(this._firestore,new id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Sg(e);return r?(gA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}}class NR{constructor(e){this._delegate=e}set(e,t,r){const s=Sg(e);return r?(gA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ow(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Tg(e,new dC(e),t),s.set(t,u)),u}}Tg.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new qn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new pa(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sv(this.firestore,rR(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,zt.m9)(e))instanceof qn&&iR(this._delegate,e)}set(e,t){t=gA("DocumentReference.set",t);try{return t?DR(this._delegate,e,t):DR(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?CR(this._delegate,e):CR(this._delegate,e,t,...r)}catch(s){throw bs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function jP(n){return iv(tn(n.firestore,Wn),[new Nc(n._key,zn.none())])}(this._delegate)}onSnapshot(...e){const t=PR(e),r=OR(e,s=>new uw(this.firestore,new id(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return bR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function FP(n){n=tn(n,qn);const e=tn(n.firestore,Wn),t=Or(e),r=new df(e);return function Q1(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,l){try{const m=yield function(w,b){const x=Ye(w);return x.persistence.runTransaction("read document","readonly",N=>x.localDocuments.getDocument(N,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ae(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Qy(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new id(e,r,n._key,s,new bg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function LP(n){n=tn(n,qn);const e=tn(n.firestore,Wn);return KM(Or(e),n._key,{source:"server"}).then(t=>pA(e,n,t))}(this._delegate):function kP(n){n=tn(n,qn);const e=tn(n.firestore,Wn);return KM(Or(e),n._key).then(t=>pA(e,n,t))}(this._delegate),t.then(r=>new uw(this.firestore,new id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function PR(n){for(const e of n)if("object"==typeof e&&!mA(e))return e;return{}}function OR(n,e){var t,r;let s;return s=mA(n[0])?n[0]:mA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class uw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IR(this._delegate,e._delegate)}}class cw extends uw{data(e){const t=this._delegate.data(e);return function yx(n,e){n||rt()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dC(e)}where(e,t,r){try{return new Ts(this.firestore,cf(this._delegate,function CP(n,e,t){const r=e,s=oC("where",n);return sw._create(s,r,t)}(e,t,r)))}catch(s){throw bs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,cf(this._delegate,function bP(n,e="asc"){const t=e,r=oC("orderBy",n);return hA._create(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,cf(this._delegate,function TP(n){return eR("limit",n),aC._create("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,cf(this._delegate,function SP(n){return eR("limitToLast",n),aC._create("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,cf(this._delegate,function AP(...n){return uC._create("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,cf(this._delegate,function xP(...n){return uC._create("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,cf(this._delegate,function MP(...n){return cC._create("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,cf(this._delegate,function RP(...n){return cC._create("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return sA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function UP(n){n=tn(n,Vi);const e=tn(n.firestore,Wn),t=Or(e),r=new df(e);return function J1(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(s,u,l){try{const m=yield $D(s,u,!0),w=new FM(u,m.sr),b=w.nc(m.documents),x=w.applyChanges(b,!1);l.resolve(x.snapshot)}catch(m){const w=Qy(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield JD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new lf(e,r,n,s))}(this._delegate):"server"===e?.source?function BP(n){n=tn(n,Vi);const e=tn(n.firestore,Wn),t=Or(e),r=new df(e);return ZM(t,n._query,{source:"server"}).then(s=>new lf(e,r,n,s))}(this._delegate):function VP(n){n=tn(n,Vi);const e=tn(n.firestore,Wn),t=Or(e),r=new df(e);return gR(n._query),ZM(t,n._query).then(s=>new lf(e,r,n,s))}(this._delegate),t.then(r=>new yA(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=PR(e),r=OR(e,s=>new yA(this.firestore,new lf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return bR(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}class dO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cw(this._firestore,r))})}isEqual(e){return IR(this._delegate,e._delegate)}}class sv extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?eC(this._delegate):eC(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function $P(n,e){const t=tn(n.firestore,Wn),r=eC(n),s=lC(n.converter,e);return iv(t,[rC(Dg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return iR(this._delegate,e._delegate)}withConverter(e){return new sv(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Sg(n){return tn(n,qn)}class vA{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new vA(er.keyField().canonicalString())}isEqual(e){return(e=(0,zt.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nO(){return new aA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ag(e)}static delete(){const e=function tO(){return new tw("deleteField")}();return e._methodName="FieldValue.delete",new Ag(e)}static arrayUnion(...e){const t=function rO(...n){return new _P("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ag(t)}static arrayRemove(...e){const t=function iO(...n){return new wP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ag(t)}static increment(e){const t=function sO(n){return new EP("increment",n)}(e);return t._methodName="FieldValue.increment",new Ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hO={Firestore:MR,GeoPoint:tC,Timestamp:Vn,Blob:aw,Transaction:RR,WriteBatch:NR,DocumentReference:pa,DocumentSnapshot:uw,Query:Ts,QueryDocumentSnapshot:cw,QuerySnapshot:yA,CollectionReference:sv,FieldPath:vA,FieldValue:Ag,setLogLevel:function lO(n){!function Qb(n){Cc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function pO(n){(function fO(n,e){n.INTERNAL.registerComponent(new tu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},hO)))})(n,(e,t)=>new MR(e,t,new cO)),n.registerVersion("@firebase/firestore-compat","0.3.8")}(_h.Z);var gO=F(6451),hC=F(5363),mO=F(6063);class yO extends _.x{constructor(e=1/0,t=1/0,r=mO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var vO=F(3099);function kR(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,vO.B)({connector:()=>new yO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function FR(n,e){return(0,uc.m)(e)?Xt(()=>n,e):Xt(()=>n)}var _A=F(9468);F(259);const EA=new Map,VR={activated:!1,tokenObservers:[]},DO={initialized:!1,enabled:!1};function Ir(n){return EA.get(n)||Object.assign({},VR)}function pC(){return DO}class xO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new zt.BH,yield function MO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ui=new zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DA(n){if(!Ir(n).activated)throw Ui.create("use-before-activation",{appName:n.name})}function yC(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw Ui.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw Ui.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw Ui.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}}),bA.apply(this,arguments)}function BR(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const lw="firebase-app-check-store";let vC=null;function $R(){return vC||(vC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Ui.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(lw,{keyPath:"compositeKey"})}}catch(t){e(Ui.create("storage-open",{originalErrorMessage:t?.message}))}}),vC)}function TA(){return TA=(0,ve.Z)(function*(n,e){const r=(yield $R()).transaction(lw,"readwrite"),u=r.objectStore(lw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(Ui.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),TA.apply(this,arguments)}const dw=new ws.Yd("@firebase/app-check");function xA(n,e){return(0,zt.hl)()?function LO(n,e){return function HR(n,e){return TA.apply(this,arguments)}(function zR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{dw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RA(){return pC().enabled}function NA(){return PA.apply(this,arguments)}function PA(){return PA=(0,ve.Z)(function*(){const n=pC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PA.apply(this,arguments)}const HO={error:"UNKNOWN_ERROR"};function GO(n){return zt.US.encodeString(JSON.stringify(n),!1)}function _C(n){return OA.apply(this,arguments)}function OA(){return OA=(0,ve.Z)(function*(n,e=!1){const t=n.app;DA(t);const r=Ir(t);let u,s=r.token;if(s&&!ov(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(ov(w)?s=w:yield xA(t,void 0))}if(!e&&s&&ov(s))return{token:s.token};let m,l=!1;if(RA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yC(BR(t,yield NA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield xA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Ir(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?dw.warn(w.message):dw.error(w),u=w}return s?u?m=ov(s)?{token:s.token,internalError:u}:KR(u):(m={token:s.token},r.token=s,yield xA(t,s)):m=KR(u),l&&WR(t,m),m}),OA.apply(this,arguments)}function LA(n,e){const t=Ir(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qR(n){const{app:e}=n,t=Ir(e);let r=t.tokenRefresher;r||(r=function qO(n){const{app:e}=n;return new xO((0,ve.Z)(function*(){let r;if(r=Ir(e).token?yield _C(n,!0):yield _C(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WR(n,e){const t=Ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ov(n){return n.expireTimeMillis-Date.now()>0}function KR(n){return{token:GO(HO),error:n}}class WO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ir(this.app);for(const t of e)LA(this.app,t.next);return Promise.resolve()}}const nN="app-check-internal";!function ak(){(0,Hs._registerComponent)(new tu.wA("app-check",n=>function KO(n,e){return new WO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nN).initialize()})),(0,Hs._registerComponent)(new tu.wA(nN,n=>function ZO(n){return{getToken:e=>_C(n,e),addTokenListener:e=>function FA(n,e,t,r){const{app:s}=n,u=Ir(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ov(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),qR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>qR(n))}(n,"INTERNAL",e),removeTokenListener:e=>LA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hs.registerVersion)("@firebase/app-check","0.7.0")}();class jA{constructor(){return(0,on.vb)("app-check")}}typeof window<"u"&&window;var hk=F(9260);const iN=new g.OlP("angularfire2.auth.use-emulator"),sN=new g.OlP("angularfire2.auth.settings"),oN=new g.OlP("angularfire2.auth.tenant-id"),aN=new g.OlP("angularfire2.auth.langugage-code"),uN=new g.OlP("angularfire2.auth.use-device-language"),cN=new g.OlP("angularfire.auth.persistence"),lN=(n,e,t,r,s,u,l,m)=>(0,_s.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,x]of Object.entries(l))w.settings[b]=x;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let dN=(()=>{class n{constructor(t,r,s,u,l,m,w,b,x,N,B,Z){const Ee=new _.x,Re=f(void 0).pipe((0,hC.Q)(l.outsideAngular),Xt(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,3042)))),(0,At.U)(()=>(0,_s.on)(t,u,r)),(0,At.U)(Le=>lN(Le,u,m,b,x,N,w,B)),kR({bufferSize:1,refCount:!1}));if(Iu(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=f(null);else{Re.pipe(Wa()).subscribe();const pt=Re.pipe(Xt(jt=>jt.getRedirectResult().then(Gt=>Gt,()=>null)),on.iC,kR({bufferSize:1,refCount:!1})),xt=Re.pipe(Xt(jt=>new Zr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(un=>Gt.next(un),un=>Gt.error(un),()=>Gt.complete()))})))),_t=Re.pipe(Xt(jt=>new Zr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(un=>Gt.next(un),un=>Gt.error(un),()=>Gt.complete()))}))));this.authState=pt.pipe(FR(xt),(0,_A.R)(l.outsideAngular),(0,hC.Q)(l.insideAngular)),this.user=pt.pipe(FR(_t),(0,_A.R)(l.outsideAngular),(0,hC.Q)(l.insideAngular)),this.idToken=this.user.pipe(Xt(jt=>jt?(0,fn.D)(jt.getIdToken()):f(null))),this.idTokenResult=this.user.pipe(Xt(jt=>jt?(0,fn.D)(jt.getIdTokenResult()):f(null))),this.credential=(0,gO.T)(pt,Ee,this.authState.pipe(ms(jt=>!jt))).pipe((0,At.U)(jt=>jt?.user?jt:null),(0,_A.R)(l.outsideAngular),(0,hC.Q)(l.insideAngular))}return(0,_s.pX)(this,Re,u,{spy:{apply:(Le,pt,xt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&xt.then(_t=>Ee.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_s.Dh),g.LFG(_s.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(on.HU),g.LFG(iN,8),g.LFG(sN,8),g.LFG(oN,8),g.LFG(aN,8),g.LFG(uN,8),g.LFG(cN,8),g.LFG(jA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function hN(n,e){return function pk(n,e=Dp.z){return new Zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function HA(n,e){return hN(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function EC(n,e){return HA(n,e).pipe(El(void 0),eu(),(0,At.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(x=>x.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(x=>x.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function fN(n,e,t){return EC(n,t).pipe(sh((r,s)=>function mk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Rm(n,e=W.y){return n=n??$s,(0,Ar.e)((t,r)=>{let s,u=!0;t.subscribe((0,Jn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,At.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function GA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function pN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=EC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(El(void 0),eu(),ms(([r,s])=>s.length>0||!r),(0,At.U)(([r,s])=>s),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(sh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pN(e);return fN(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new mN(this.ref.doc(e),this.afs)}}class mN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=_N(r,t);return new gN(s,u,this.afs)}snapshotChanges(){return function gk(n,e){return hN(n,e).pipe(El(void 0),eu(),(0,At.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(on.iC)}}class vk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EC(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ms(t=>t.length>0),on.iC):EC(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(sh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pN(e);return fN(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),on.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(on.iC)}}const yN=new g.OlP("angularfire2.enableFirestorePersistence"),vN=new g.OlP("angularfire2.firestore.persistenceSettings"),_k=new g.OlP("angularfire2.firestore.settings"),wk=new g.OlP("angularfire2.firestore.use-emulator");function _N(n,e=(t=>t)){return{query:e(n),ref:n}}let wN=(()=>{class n{constructor(t,r,s,u,l,m,w,b,x,N,B,Z,Ee,Re,Le,pt,xt){this.schedulers=w;const _t=(0,_s.on)(t,m,r),jt=x;N&&lN(_t,m,B,Ee,Re,Le,Z,pt),[this.firestore,this.persistenceEnabled$]=(0,_s.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const Gt=m.runOutsideAngular(()=>_t.firestore());if(u&&Gt.settings(u),jt&&Gt.useEmulator(...jt),s&&!Iu(l)){const un=()=>{try{return(0,fn.D)(Gt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Ss){return typeof console<"u"&&console.warn(Ss),f(!1)}};return[Gt,m.runOutsideAngular(un)]}return[Gt,f(!1)]},[u,jt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=_N(s,r),m=this.schedulers.ngZone.run(()=>u);return new gN(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new vk(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new mN(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_s.Dh),g.LFG(_s.xv,8),g.LFG(yN,8),g.LFG(_k,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(on.HU),g.LFG(vN,8),g.LFG(wk,8),g.LFG(dN,8),g.LFG(iN,8),g.LFG(sN,8),g.LFG(oN,8),g.LFG(aN,8),g.LFG(uN,8),g.LFG(cN,8),g.LFG(jA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ek=(()=>{class n{constructor(){hk.Z.registerVersion("angularfire",on.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yN,useValue:!0},{provide:vN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[wN]}),n})(),Ik=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("items")}addItem(t){this.firestoreCollection.add({item:t})}deleteItem(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dk(n,e){1&n&&g._UZ(0,"i",18)}function Ck(n,e){1&n&&g._UZ(0,"i",19)}function bk(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",12)(1,"span")(2,"span"),g._uU(3),g.qZA(),g._UZ(4,"br"),g.TgZ(5,"span",13),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.onDelete(u.id))}),g._UZ(6,"i",14),g.qZA(),g.TgZ(7,"span",15),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.copyMessage(u.item,u.id))}),g.YNc(8,Dk,1,0,"i",16),g.YNc(9,Ck,1,0,"i",17),g.qZA()()()}if(2&n){const t=e.$implicit,r=g.oxw();g.xp6(3),g.Oqu(t.item),g.xp6(5),g.Q6J("ngIf",!r.copied||t.id!=r.copiedId),g.xp6(1),g.Q6J("ngIf",r.copied&&t.id==r.copiedId)}}let Tk=(()=>{class n{constructor(t){this.clipboardService=t,this.items=[],this.value="",this.copied=!1,this.copiedId=-1}ngOnInit(){this.clipboardService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{console.log(t),this.items=t})}onClick(t){t.value&&(this.clipboardService.addItem(t.value),t.value="")}copyMessage(t,r){const s=document.createElement("textarea");s.style.position="fixed",s.style.left="0",s.style.top="0",s.style.opacity="0",s.value=t,document.body.appendChild(s),s.focus(),s.select(),document.execCommand("copy"),document.body.removeChild(s),this.copied=!0,this.copiedId=r,setTimeout(()=>{this.copied=!1,this.copiedId=-1},1e3)}onDelete(t){this.clipboardService.deleteItem(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ik))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-display"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","w-70","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Ctrl+Enter to add and Enter for nextline",1,"form-control","border-0","py-3","shadow-none",3,"keyup.control.enter"],["itemInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"float-end","text-secondary","mx-3",3,"click"],["class","fa fa-clipboard","aria-hidden","true",4,"ngIf"],["class","fa-solid fa-check fa-fade fa-lg",4,"ngIf"],["aria-hidden","true",1,"fa","fa-clipboard"],[1,"fa-solid","fa-check","fa-fade","fa-lg"]],template:function(t,r){if(1&t){const s=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),g._uU(3,"CLIPBOARD"),g.qZA()(),g.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6)(8,"input",7,8),g.NdJ("keyup.control.enter",function(){g.CHM(s);const l=g.MAs(9);return g.KtG(r.onClick(l))}),g.qZA(),g.TgZ(10,"button",9),g.NdJ("click",function(){g.CHM(s);const l=g.MAs(9);return g.KtG(r.onClick(l))}),g._UZ(11,"i",10),g.qZA()()(),g.YNc(12,bk,10,3,"li",11),g.qZA()()()}2&t&&(g.xp6(12),g.Q6J("ngForOf",r.items))},dependencies:[pn,pr],styles:[".list-group-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),Sk=(()=>{class n{constructor(){this.title="neurolab-angular",this.item="",this.items=[""]}handleSend(){this.items.push(this.item),console.log(this.items),this.item=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:46,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],[1,"text-dark"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["id","offcanvasDarkNavbarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-dark"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"],["role","search",1,"d-flex","mt-3"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-success"],[1,"container","bg-dark"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),g._uU(3,"Clipboard"),g.qZA(),g.TgZ(4,"p",3),g._uU(5,"Hey sini"),g.qZA(),g.TgZ(6,"button",4),g._UZ(7,"span",5),g.qZA(),g.TgZ(8,"div",6)(9,"div",7)(10,"h5",8),g._uU(11,"Dark offcanvas"),g.qZA(),g._UZ(12,"button",9),g.qZA(),g.TgZ(13,"div",10)(14,"ul",11)(15,"li",12)(16,"a",13),g._uU(17,"Home"),g.qZA()(),g.TgZ(18,"li",12)(19,"a",14),g._uU(20,"Link"),g.qZA()(),g.TgZ(21,"li",15)(22,"a",16),g._uU(23," Dropdown "),g.qZA(),g.TgZ(24,"ul",17)(25,"li")(26,"a",18),g._uU(27,"Action"),g.qZA()(),g.TgZ(28,"li")(29,"a",18),g._uU(30,"Another action"),g.qZA()(),g.TgZ(31,"li"),g._UZ(32,"hr",19),g.qZA(),g.TgZ(33,"li")(34,"a",18),g._uU(35,"Something else here"),g.qZA()()()()(),g.TgZ(36,"form",20),g._UZ(37,"input",21),g.TgZ(38,"button",22),g._uU(39,"Search"),g.qZA()()()()()(),g._UZ(40,"br"),g.TgZ(41,"div",23)(42,"div",24)(43,"div",25),g._UZ(44,"app-display"),g.qZA()()(),g._UZ(45,"router-outlet"))},dependencies:[Kw,ec,Wu,ea,Tk]}),n})();const EN_firebaseConfig={apiKey:"AIzaSyArn2t9NttTtqfvbl8viRTQC-QNC-CpVXc",authDomain:"clipboard-1f32d.firebaseapp.com",projectId:"clipboard-1f32d",storageBucket:"clipboard-1f32d.appspot.com",messagingSenderId:"657075504019",appId:"1:657075504019:web:808152ef483455581a1e66"};let Ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Sk]}),n.\u0275inj=g.cJS({imports:[Pd,aa,Ev,_s.hO.initializeApp(EN_firebaseConfig),Ek]}),n})();(0,g.G48)(),Xs().bootstrapModule(Ak).catch(n=>console.error(n))},9751:(dt,Se,F)=>{F.d(Se,{y:()=>_e});var g=F(2961),J=F(727),O=F(8822),oe=F(9635),se=F(2416),he=F(576),le=F(2806);let _e=(()=>{class q{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const De=new q;return De.source=this,De.operator=xe,De}subscribe(xe,De,it){const ge=function $(q){return q&&q instanceof g.Lv||function j(q){return q&&(0,he.m)(q.next)&&(0,he.m)(q.error)&&(0,he.m)(q.complete)}(q)&&(0,J.Nn)(q)}(xe)?xe:new g.Hp(xe,De,it);return(0,le.x)(()=>{const{operator:ye,source:ut}=this;ge.add(ye?ye.call(ge,ut):ut?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(xe){try{return this._subscribe(xe)}catch(De){xe.error(De)}}forEach(xe,De){return new(De=pe(De))((it,ge)=>{const ye=new g.Hp({next:ut=>{try{xe(ut)}catch(gt){ge(gt),ye.unsubscribe()}},error:ge,complete:it});this.subscribe(ye)})}_subscribe(xe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(xe)}[O.L](){return this}pipe(...xe){return(0,oe.U)(xe)(this)}toPromise(xe){return new(xe=pe(xe))((De,it)=>{let ge;this.subscribe(ye=>ge=ye,ye=>it(ye),()=>De(ge))})}}return q.create=$e=>new q($e),q})();function pe(q){var $e;return null!==($e=q??se.v.Promise)&&void 0!==$e?$e:Promise}},7579:(dt,Se,F)=>{F.d(Se,{x:()=>le});var g=F(9751),J=F(727);const oe=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),he=F(2806);let le=(()=>{class pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new _e(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:$e,observers:xe}=this;return q||$e?J.Lc:(this.currentObservers=null,xe.push($),new J.w0(()=>{this.currentObservers=null,(0,se.P)(xe,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:$e,isStopped:xe}=this;q?$.error($e):xe&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return pe.create=(j,$)=>new _e(j,$),pe})();class _e extends le{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,j)}error(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==q?q:J.Lc}}},2961:(dt,Se,F)=>{F.d(Se,{Hp:()=>it,Lv:()=>q});var g=F(576),J=F(727),O=F(2416),oe=F(7849);function se(){}const he=pe("C",void 0,void 0);function pe(Oe,we,me){return{kind:Oe,value:we,error:me}}var j=F(3410),$=F(2806);class q extends J.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,J.Nn)(we)&&we.add(this)):this.destination=gt}static create(we,me,Ge){return new it(we,me,Ge)}next(we){this.isStopped?ut(function _e(Oe){return pe("N",Oe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ut(function le(Oe){return pe("E",void 0,Oe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ut(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function xe(Oe,we){return $e.call(Oe,we)}class De{constructor(we){this.partialObserver=we}next(we){const{partialObserver:me}=this;if(me.next)try{me.next(we)}catch(Ge){ge(Ge)}}error(we){const{partialObserver:me}=this;if(me.error)try{me.error(we)}catch(Ge){ge(Ge)}else ge(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(me){ge(me)}}}class it extends q{constructor(we,me,Ge){let Be;if(super(),(0,g.m)(we)||!we)Be={next:we??void 0,error:me??void 0,complete:Ge??void 0};else{let nt;this&&O.v.useDeprecatedNextContext?(nt=Object.create(we),nt.unsubscribe=()=>this.unsubscribe(),Be={next:we.next&&xe(we.next,nt),error:we.error&&xe(we.error,nt),complete:we.complete&&xe(we.complete,nt)}):Be=we}this.destination=new De(Be)}}function ge(Oe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Oe):(0,oe.h)(Oe)}function ut(Oe,we){const{onStoppedNotification:me}=O.v;me&&j.z.setTimeout(()=>me(Oe,we))}const gt={closed:!0,next:se,error:function ye(Oe){throw Oe},complete:se}},727:(dt,Se,F)=>{F.d(Se,{Lc:()=>he,w0:()=>se,Nn:()=>le});var g=F(576);const O=(0,F(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,$e)=>`${$e+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=F(8737);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const xe of $)xe.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,g.m)(q))try{q()}catch(xe){j=xe instanceof O?xe.errors:[xe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const xe of $e)try{_e(xe)}catch(De){j=j??[],De instanceof O?j=[...j,...De.errors]:j.push(De)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)_e(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,oe.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,oe.P)($,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const he=se.EMPTY;function le(pe){return pe instanceof se||pe&&"closed"in pe&&(0,g.m)(pe.remove)&&(0,g.m)(pe.add)&&(0,g.m)(pe.unsubscribe)}function _e(pe){(0,g.m)(pe)?pe():pe.unsubscribe()}},2416:(dt,Se,F)=>{F.d(Se,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Se,F)=>{F.d(Se,{E:()=>J});const J=new(F(9751).y)(se=>se.complete())},8996:(dt,Se,F)=>{F.d(Se,{D:()=>we});var g=F(8421),J=F(5363),O=F(9468),he=F(9751),_e=F(2202),pe=F(576),j=F(9672);function q(me,Ge){if(!me)throw new Error("Iterable cannot be null");return new he.y(Be=>{(0,j.f)(Be,Ge,()=>{const nt=me[Symbol.asyncIterator]();(0,j.f)(Be,Ge,()=>{nt.next().then(te=>{te.done?Be.complete():Be.next(te.value)})},0,!0)})})}var $e=F(3670),xe=F(8239),De=F(1144),it=F(6495),ge=F(2206),ye=F(4532),ut=F(3260);function we(me,Ge){return Ge?function Oe(me,Ge){if(null!=me){if((0,$e.c)(me))return function oe(me,Ge){return(0,g.Xf)(me).pipe((0,O.R)(Ge),(0,J.Q)(Ge))}(me,Ge);if((0,De.z)(me))return function le(me,Ge){return new he.y(Be=>{let nt=0;return Ge.schedule(function(){nt===me.length?Be.complete():(Be.next(me[nt++]),Be.closed||this.schedule())})})}(me,Ge);if((0,xe.t)(me))return function se(me,Ge){return(0,g.Xf)(me).pipe((0,O.R)(Ge),(0,J.Q)(Ge))}(me,Ge);if((0,ge.D)(me))return q(me,Ge);if((0,it.T)(me))return function $(me,Ge){return new he.y(Be=>{let nt;return(0,j.f)(Be,Ge,()=>{nt=me[_e.h](),(0,j.f)(Be,Ge,()=>{let te,ne;try{({value:te,done:ne}=nt.next())}catch(X){return void Be.error(X)}ne?Be.complete():Be.next(te)},0,!0)}),()=>(0,pe.m)(nt?.return)&&nt.return()})}(me,Ge);if((0,ut.L)(me))return function gt(me,Ge){return q((0,ut.Q)(me),Ge)}(me,Ge)}throw(0,ye.z)(me)}(me,Ge):(0,g.Xf)(me)}},8421:(dt,Se,F)=>{F.d(Se,{Xf:()=>$e});var g=F(655),J=F(1144),O=F(8239),oe=F(9751),se=F(3670),he=F(2206),le=F(4532),_e=F(6495),pe=F(3260),j=F(576),$=F(7849),q=F(8822);function $e(Oe){if(Oe instanceof oe.y)return Oe;if(null!=Oe){if((0,se.c)(Oe))return function xe(Oe){return new oe.y(we=>{const me=Oe[q.L]();if((0,j.m)(me.subscribe))return me.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Oe);if((0,J.z)(Oe))return function De(Oe){return new oe.y(we=>{for(let me=0;me<Oe.length&&!we.closed;me++)we.next(Oe[me]);we.complete()})}(Oe);if((0,O.t)(Oe))return function it(Oe){return new oe.y(we=>{Oe.then(me=>{we.closed||(we.next(me),we.complete())},me=>we.error(me)).then(null,$.h)})}(Oe);if((0,he.D)(Oe))return ye(Oe);if((0,_e.T)(Oe))return function ge(Oe){return new oe.y(we=>{for(const me of Oe)if(we.next(me),we.closed)return;we.complete()})}(Oe);if((0,pe.L)(Oe))return function ut(Oe){return ye((0,pe.Q)(Oe))}(Oe)}throw(0,le.z)(Oe)}function ye(Oe){return new oe.y(we=>{(function gt(Oe,we){var me,Ge,Be,nt;return(0,g.mG)(this,void 0,void 0,function*(){try{for(me=(0,g.KL)(Oe);!(Ge=yield me.next()).done;)if(we.next(Ge.value),we.closed)return}catch(te){Be={error:te}}finally{try{Ge&&!Ge.done&&(nt=me.return)&&(yield nt.call(me))}finally{if(Be)throw Be.error}}we.complete()})})(Oe,we).catch(me=>we.error(me))})}},6451:(dt,Se,F)=>{F.d(Se,{T:()=>he});var g=F(8189),J=F(8421),O=F(515),oe=F(7669),se=F(8996);function he(...le){const _e=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),j=le;return j.length?1===j.length?(0,J.Xf)(j[0]):(0,g.J)(pe)((0,se.D)(j,_e)):O.E}},5403:(dt,Se,F)=>{F.d(Se,{x:()=>J});var g=F(2961);function J(oe,se,he,le,_e){return new O(oe,se,he,le,_e)}class O extends g.Lv{constructor(se,he,le,_e,pe,j){super(se),this.onFinalize=pe,this.shouldUnsubscribe=j,this._next=he?function($){try{he($)}catch(q){se.error(q)}}:super._next,this._error=_e?function($){try{_e($)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(dt,Se,F)=>{F.d(Se,{U:()=>O});var g=F(4482),J=F(5403);function O(oe,se){return(0,g.e)((he,le)=>{let _e=0;he.subscribe((0,J.x)(le,pe=>{le.next(oe.call(se,pe,_e++))}))})}},8189:(dt,Se,F)=>{F.d(Se,{J:()=>O});var g=F(5577),J=F(4671);function O(oe=1/0){return(0,g.z)(J.y,oe)}},5577:(dt,Se,F)=>{F.d(Se,{z:()=>_e});var g=F(4004),J=F(8421),O=F(4482),oe=F(9672),se=F(5403),le=F(576);function _e(pe,j,$=1/0){return(0,le.m)(j)?_e((q,$e)=>(0,g.U)((xe,De)=>j(q,xe,$e,De))((0,J.Xf)(pe(q,$e))),$):("number"==typeof j&&($=j),(0,O.e)((q,$e)=>function he(pe,j,$,q,$e,xe,De,it){const ge=[];let ye=0,ut=0,gt=!1;const Oe=()=>{gt&&!ge.length&&!ye&&j.complete()},we=Ge=>ye<q?me(Ge):ge.push(Ge),me=Ge=>{xe&&j.next(Ge),ye++;let Be=!1;(0,J.Xf)($(Ge,ut++)).subscribe((0,se.x)(j,nt=>{$e?.(nt),xe?we(nt):j.next(nt)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ye--;ge.length&&ye<q;){const nt=ge.shift();De?(0,oe.f)(j,De,()=>me(nt)):me(nt)}Oe()}catch(nt){j.error(nt)}}))};return pe.subscribe((0,se.x)(j,we,()=>{gt=!0,Oe()})),()=>{it?.()}}(q,$e,pe,$)))}},5363:(dt,Se,F)=>{F.d(Se,{Q:()=>oe});var g=F(9672),J=F(4482),O=F(5403);function oe(se,he=0){return(0,J.e)((le,_e)=>{le.subscribe((0,O.x)(_e,pe=>(0,g.f)(_e,se,()=>_e.next(pe),he),()=>(0,g.f)(_e,se,()=>_e.complete(),he),pe=>(0,g.f)(_e,se,()=>_e.error(pe),he)))})}},3099:(dt,Se,F)=>{F.d(Se,{B:()=>se});var g=F(8421),J=F(7579),O=F(2961),oe=F(4482);function se(le={}){const{connector:_e=(()=>new J.x),resetOnError:pe=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=le;return q=>{let $e,xe,De,it=0,ge=!1,ye=!1;const ut=()=>{xe?.unsubscribe(),xe=void 0},gt=()=>{ut(),$e=De=void 0,ge=ye=!1},Oe=()=>{const we=$e;gt(),we?.unsubscribe()};return(0,oe.e)((we,me)=>{it++,!ye&&!ge&&ut();const Ge=De=De??_e();me.add(()=>{it--,0===it&&!ye&&!ge&&(xe=he(Oe,$))}),Ge.subscribe(me),!$e&&it>0&&($e=new O.Hp({next:Be=>Ge.next(Be),error:Be=>{ye=!0,ut(),xe=he(gt,pe,Be),Ge.error(Be)},complete:()=>{ge=!0,ut(),xe=he(gt,j),Ge.complete()}}),(0,g.Xf)(we).subscribe($e))})(q)}}function he(le,_e,...pe){if(!0===_e)return void le();if(!1===_e)return;const j=new O.Hp({next:()=>{j.unsubscribe(),le()}});return _e(...pe).subscribe(j)}},9468:(dt,Se,F)=>{F.d(Se,{R:()=>J});var g=F(4482);function J(O,oe=0){return(0,g.e)((se,he)=>{he.add(O.schedule(()=>se.subscribe(he),oe))})}},8505:(dt,Se,F)=>{F.d(Se,{b:()=>se});var g=F(576),J=F(4482),O=F(5403),oe=F(4671);function se(he,le,_e){const pe=(0,g.m)(he)||le||_e?{next:he,error:le,complete:_e}:he;return pe?(0,J.e)((j,$)=>{var q;null===(q=pe.subscribe)||void 0===q||q.call(pe);let $e=!0;j.subscribe((0,O.x)($,xe=>{var De;null===(De=pe.next)||void 0===De||De.call(pe,xe),$.next(xe)},()=>{var xe;$e=!1,null===(xe=pe.complete)||void 0===xe||xe.call(pe),$.complete()},xe=>{var De;$e=!1,null===(De=pe.error)||void 0===De||De.call(pe,xe),$.error(xe)},()=>{var xe,De;$e&&(null===(xe=pe.unsubscribe)||void 0===xe||xe.call(pe)),null===(De=pe.finalize)||void 0===De||De.call(pe)}))}):oe.y}},4408:(dt,Se,F)=>{F.d(Se,{o:()=>se});var g=F(727);class J extends g.w0{constructor(le,_e){super()}schedule(le,_e=0){return this}}const O={setInterval(he,le,..._e){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(he,le,..._e):setInterval(he,le,..._e)},clearInterval(he){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(he)},delegate:void 0};var oe=F(8737);class se extends J{constructor(le,_e){super(le,_e),this.scheduler=le,this.work=_e,this.pending=!1}schedule(le,_e=0){var pe;if(this.closed)return this;this.state=le;const j=this.id,$=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId($,j,_e)),this.pending=!0,this.delay=_e,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId($,this.id,_e),this}requestAsyncId(le,_e,pe=0){return O.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,_e,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return _e;null!=_e&&O.clearInterval(_e)}execute(le,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,_e);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,_e){let j,pe=!1;try{this.work(le)}catch($){pe=!0,j=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:le,scheduler:_e}=this,{actions:pe}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(_e,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Se,F)=>{F.d(Se,{v:()=>O});var g=F(6063);class J{constructor(se,he=J.now){this.schedulerActionCtor=se,this.now=he}schedule(se,he=0,le){return new this.schedulerActionCtor(this,se).schedule(le,he)}}J.now=g.l.now;class O extends J{constructor(se,he=J.now){super(se,he),this.actions=[],this._active=!1}flush(se){const{actions:he}=this;if(this._active)return void he.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=he.shift());if(this._active=!1,le){for(;se=he.shift();)se.unsubscribe();throw le}}}},4986:(dt,Se,F)=>{F.d(Se,{z:()=>O});var g=F(4408);const O=new(F(7565).v)(g.o)},6063:(dt,Se,F)=>{F.d(Se,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(dt,Se,F)=>{F.d(Se,{z:()=>g});const g={setTimeout(J,O,...oe){const{delegate:se}=g;return se?.setTimeout?se.setTimeout(J,O,...oe):setTimeout(J,O,...oe)},clearTimeout(J){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(dt,Se,F)=>{F.d(Se,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Se,F)=>{F.d(Se,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Se,F)=>{F.d(Se,{_6:()=>he,jO:()=>oe,yG:()=>se});var g=F(576);function O(le){return le[le.length-1]}function oe(le){return(0,g.m)(O(le))?le.pop():void 0}function se(le){return function J(le){return le&&(0,g.m)(le.schedule)}(O(le))?le.pop():void 0}function he(le,_e){return"number"==typeof O(le)?le.pop():_e}},8737:(dt,Se,F)=>{function g(J,O){if(J){const oe=J.indexOf(O);0<=oe&&J.splice(oe,1)}}F.d(Se,{P:()=>g})},3888:(dt,Se,F)=>{function g(J){const oe=J(se=>{Error.call(se),se.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}F.d(Se,{d:()=>g})},2806:(dt,Se,F)=>{F.d(Se,{O:()=>oe,x:()=>O});var g=F(2416);let J=null;function O(se){if(g.v.useDeprecatedSynchronousErrorHandling){const he=!J;if(he&&(J={errorThrown:!1,error:null}),se(),he){const{errorThrown:le,error:_e}=J;if(J=null,le)throw _e}}else se()}function oe(se){g.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=se)}},9672:(dt,Se,F)=>{function g(J,O,oe,se=0,he=!1){const le=O.schedule(function(){oe(),he?J.add(this.schedule(null,se)):this.unsubscribe()},se);if(J.add(le),!he)return le}F.d(Se,{f:()=>g})},4671:(dt,Se,F)=>{function g(J){return J}F.d(Se,{y:()=>g})},1144:(dt,Se,F)=>{F.d(Se,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(dt,Se,F)=>{F.d(Se,{D:()=>J});var g=F(576);function J(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(dt,Se,F)=>{function g(J){return"function"==typeof J}F.d(Se,{m:()=>g})},3670:(dt,Se,F)=>{F.d(Se,{c:()=>O});var g=F(8822),J=F(576);function O(oe){return(0,J.m)(oe[g.L])}},6495:(dt,Se,F)=>{F.d(Se,{T:()=>O});var g=F(2202),J=F(576);function O(oe){return(0,J.m)(oe?.[g.h])}},8239:(dt,Se,F)=>{F.d(Se,{t:()=>J});var g=F(576);function J(O){return(0,g.m)(O?.then)}},3260:(dt,Se,F)=>{F.d(Se,{L:()=>oe,Q:()=>O});var g=F(655),J=F(576);function O(se){return(0,g.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:_e,done:pe}=yield(0,g.qq)(le.read());if(pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(_e)}}finally{le.releaseLock()}})}function oe(se){return(0,J.m)(se?.getReader)}},4482:(dt,Se,F)=>{F.d(Se,{A:()=>J,e:()=>O});var g=F(576);function J(oe){return(0,g.m)(oe?.lift)}function O(oe){return se=>{if(J(se))return se.lift(function(he){try{return oe(he,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(dt,Se,F)=>{F.d(Se,{U:()=>O,z:()=>J});var g=F(4671);function J(...oe){return O(oe)}function O(oe){return 0===oe.length?g.y:1===oe.length?oe[0]:function(he){return oe.reduce((le,_e)=>_e(le),he)}}},7849:(dt,Se,F)=>{F.d(Se,{h:()=>O});var g=F(2416),J=F(3410);function O(oe){J.z.setTimeout(()=>{const{onUnhandledError:se}=g.v;if(!se)throw oe;se(oe)})}},4532:(dt,Se,F)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>g})},655:(dt,Se,F)=>{function oe(ne,X){var fe={};for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&X.indexOf(ae)<0&&(fe[ae]=ne[ae]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(ae=Object.getOwnPropertySymbols(ne);We<ae.length;We++)X.indexOf(ae[We])<0&&Object.prototype.propertyIsEnumerable.call(ne,ae[We])&&(fe[ae[We]]=ne[ae[We]])}return fe}function _e(ne,X,fe,ae){return new(fe||(fe=Promise))(function(Ve,Pt){function qt(tr){try{Ze(ae.next(tr))}catch(Bi){Pt(Bi)}}function Jt(tr){try{Ze(ae.throw(tr))}catch(Bi){Pt(Bi)}}function Ze(tr){tr.done?Ve(tr.value):function We(Ve){return Ve instanceof fe?Ve:new fe(function(Pt){Pt(Ve)})}(tr.value).then(qt,Jt)}Ze((ae=ae.apply(ne,X||[])).next())})}function ge(ne){return this instanceof ge?(this.v=ne,this):new ge(ne)}function ye(ne,X,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,ae=fe.apply(ne,X||[]),Ve=[];return We={},Pt("next"),Pt("throw"),Pt("return"),We[Symbol.asyncIterator]=function(){return this},We;function Pt(Ct){ae[Ct]&&(We[Ct]=function(yt){return new Promise(function(On,bn){Ve.push([Ct,yt,On,bn])>1||qt(Ct,yt)})})}function qt(Ct,yt){try{!function Jt(Ct){Ct.value instanceof ge?Promise.resolve(Ct.value.v).then(Ze,tr):Bi(Ve[0][2],Ct)}(ae[Ct](yt))}catch(On){Bi(Ve[0][3],On)}}function Ze(Ct){qt("next",Ct)}function tr(Ct){qt("throw",Ct)}function Bi(Ct,yt){Ct(yt),Ve.shift(),Ve.length&&qt(Ve[0][0],Ve[0][1])}}function gt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,X=ne[Symbol.asyncIterator];return X?X.call(ne):(ne=function q(ne){var X="function"==typeof Symbol&&Symbol.iterator,fe=X&&ne[X],ae=0;if(fe)return fe.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ae>=ne.length&&(ne=void 0),{value:ne&&ne[ae++],done:!ne}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(Ve){fe[Ve]=ne[Ve]&&function(Pt){return new Promise(function(qt,Jt){!function We(Ve,Pt,qt,Jt){Promise.resolve(Jt).then(function(Ze){Ve({value:Ze,done:qt})},Pt)}(qt,Jt,(Pt=ne[Ve](Pt)).done,Pt.value)})}}}F.d(Se,{FC:()=>ye,KL:()=>gt,_T:()=>oe,mG:()=>_e,qq:()=>ge})},4650:(dt,Se,F)=>{F.d(Se,{$8M:()=>Wo,$Z:()=>nb,AFp:()=>T0,AaK:()=>_e,CHM:()=>Gc,CRH:()=>y0,CZH:()=>Ao,CqO:()=>d_,D6c:()=>AT,EJc:()=>tD,EpF:()=>Ap,F4k:()=>Lm,FYo:()=>nh,FiY:()=>Ls,G48:()=>fD,GfV:()=>rh,Gpc:()=>$,JOm:()=>mo,KtG:()=>zc,LFG:()=>Rn,LSH:()=>Bg,Lbi:()=>Wt,Lck:()=>Yb,MAs:()=>xr,MMx:()=>o0,NdJ:()=>h_,OlP:()=>gn,Oqu:()=>Zm,PXZ:()=>IT,Q6J:()=>ua,QGY:()=>Gs,QP$:()=>wt,Qsj:()=>_v,R0b:()=>Fi,RDi:()=>Fg,Rgc:()=>jh,SBq:()=>ra,Sil:()=>ET,Suo:()=>og,TTD:()=>ui,TgZ:()=>Ih,X6Q:()=>Jl,XFs:()=>ot,Xpm:()=>An,Xts:()=>jf,Y36:()=>Al,YKP:()=>MI,YNc:()=>ni,Yjl:()=>z,Yz7:()=>yt,Z0I:()=>ii,ZZ4:()=>ed,_Bn:()=>r0,_UZ:()=>Br,_Vd:()=>na,_c5:()=>SD,_uU:()=>R_,aQg:()=>ef,c2e:()=>M0,cJS:()=>bn,cg1:()=>ey,dDg:()=>Li,dqk:()=>cn,eFA:()=>xo,ekj:()=>Mp,eoX:()=>Ny,f3M:()=>oo,g9A:()=>x0,h0i:()=>Do,hGG:()=>AD,iGM:()=>So,ifc:()=>ht,ip1:()=>Pn,jDz:()=>OI,kL8:()=>oI,lG2:()=>L,lqb:()=>Ji,lri:()=>Ry,n5z:()=>Qt,oAB:()=>Hr,oxw:()=>p_,q4F:()=>ei,qLn:()=>Te,qOj:()=>c_,qZA:()=>Sp,rWj:()=>Rc,sBO:()=>pD,sIi:()=>Ip,s_b:()=>To,soG:()=>Kh,tb:()=>wn,tp0:()=>ao,uIk:()=>_s,vHH:()=>De,vpe:()=>la,wAp:()=>Et,xp6:()=>Pw,z2F:()=>hg,zSh:()=>nc,zs3:()=>Qa});var g=F(7579),J=F(727),O=F(9751),oe=F(6451),se=F(3099);function he(i){for(let o in i)if(i[o]===he)return o;throw Error("Could not find renamed property on target object.")}function le(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function _e(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(_e).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=he({__forward_ref__:he});function $(i){return i.__forward_ref__=$,i.toString=function(){return _e(this())},i}function q(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class De extends Error{constructor(o,a){super(function it(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i,o){throw new De(-201,!1)}function Jt(i,o){null==i&&function Ze(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function bn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dr(i){return si(i,$i)||si(i,ma)}function ii(i){return null!==Dr(i)}function si(i,o){return i.hasOwnProperty(o)?i[o]:null}function ji(i){return i&&(i.hasOwnProperty(_i)||i.hasOwnProperty(No))?i[_i]:null}const $i=he({\u0275prov:he}),_i=he({\u0275inj:he}),ma=he({ngInjectableDef:he}),No=he({ngInjectorDef:he});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let kr;function Fr(i){const o=kr;return kr=i,o}function Po(i,o,a){const c=Dr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ot.Optional?null:void 0!==o?o:void we(_e(i))}function Kn(i){return{toString:i}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),ht=(()=>{return(i=ht||(ht={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ht;var i})();const cn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$n={},vt=[],cr=he({\u0275cmp:he}),sn=he({\u0275dir:he}),Oo=he({\u0275pipe:he}),Zt=he({\u0275mod:he}),Zn=he({\u0275fac:he}),lr=he({__NG_ELEMENT_ID__:he});let Ei=0;function An(i){return Kn(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||vt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ht.Emulated,id:"c"+Ei++,styles:i.styles||vt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,v=i.features;return d.inputs=V(i.inputs,c),d.outputs=V(i.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Gi).filter(kn):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(He).filter(kn):null,d})}function Gi(i){return ue(i)||Y(i)}function kn(i){return null!==i}function Hr(i){return Kn(()=>({type:i.type,bootstrap:i.bootstrap||vt,declarations:i.declarations||vt,imports:i.imports||vt,exports:i.exports||vt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function V(i,o){if(null==i)return $n;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const L=An;function z(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function ue(i){return i[cr]||null}function Y(i){return i[sn]||null}function He(i){return i[Oo]||null}function wt(i){const o=ue(i)||Y(i)||He(i);return null!==o&&o.standalone}function Mt(i,o){const a=i[Zt]||null;if(!a&&!0===o)throw new Error(`Type ${_e(i)} does not have '\u0275mod' property.`);return a}function Yn(i){return Array.isArray(i)&&"object"==typeof i[1]}function Vr(i){return Array.isArray(i)&&!0===i[1]}function Fo(i){return 0!=(8&i.flags)}function yu(i){return 2==(2&i.flags)}function rs(i){return 1==(1&i.flags)}function Di(i){return null!==i.template}function Lo(i){return 0!=(256&i[2])}function is(i,o){return i.hasOwnProperty(Zn)?i[Zn]:null}class vf{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ui(){return gd}function gd(i){return i.type.prototype.ngOnChanges&&(i.setInput=jc),va}function va(){const i=_f(this),o=i?.current;if(o){const a=i.previous;if(a===$n)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function jc(i,o,a,c){const d=_f(i)||function $c(i,o){return i[wu]=o}(i,{previous:$n,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[a],C=v[I];p[I]=new vf(C&&C.currentValue,o,v===$n),i[c]=o}ui.ngInherit=!0;const wu="__ngSimpleChanges__";function _f(i){return i[wu]||null}function Fn(i){for(;Array.isArray(i);)i=i[0];return i}function ci(i,o){return Fn(o[i])}function zr(i,o){return Fn(o[i.index])}function bu(i,o){return i.data[o]}function $t(i,o){const a=o[i];return Yn(a)?a:a[0]}function os(i){return 64==(64&i[2])}function qr(i,o){return null==o?null:i[o]}function _a(i){i[18]=0}function gr(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:Kc(null),bindingsEnabled:!0};function wa(){return St.bindingsEnabled}function be(){return St.lFrame.lView}function Lt(){return St.lFrame.tView}function Gc(i){return St.lFrame.contextLView=i,i[8]}function zc(i){return St.lFrame.contextLView=null,i}function xn(){let i=Tu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Tu(){return St.lFrame.currentTNode}function Wr(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function Ia(){return St.lFrame.isParent}function as(){return St.lFrame.bindingIndex++}function Ng(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Id(o)}function Id(i){St.lFrame.currentDirectiveIndex=i}function Df(){return St.lFrame.currentQueryIndex}function Ti(i){St.lFrame.currentQueryIndex=i}function Mu(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Ca(i,o,a){if(a&ot.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&ot.Host||(d=Mu(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const c=St.lFrame=ba();return c.currentTNode=o,c.lView=i,!0}function Wc(i){const o=ba(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function ba(){const i=St.lFrame,o=null===i?null:i.child;return null===o?Kc(i):o}function Kc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ta(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dd=Ta;function Ys(){const i=Ta();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ht(){return St.lFrame.selectedIndex}function qi(i){St.lFrame.selectedIndex=i}function In(){const i=St.lFrame;return bu(i.tView,i.selectedIndex)}function cs(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:R}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function $o(i,o,a){Ms(i,o,3,a)}function Wi(i,o,a,c){(3&i[2])===a&&Ms(i,o,a,c)}function Nu(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Ms(i,o,a,c){const p=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&i[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(i[18]+=65536),(I<p||-1==p)&&(Pu(i,a,o,C),i[18]=(4294901760&i[18])+C+2),C++}function Pu(i,o,a,c){const d=a[c]<0,p=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Qs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Go(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,p)}else{const p=d,v=a[++c];Sd(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),c++}}return c}function bf(i){return 3===i||4===i||6===i}function Sd(i){return 64===i.charCodeAt(0)}function zo(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ad(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Ad(i,o,a,c,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const I=i[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<i.length;){const I=i[p];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function Jc(i){return-1!==i}function Aa(i){return 32767&i}function Js(i,o){let a=function xd(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Md=!0;function Rs(i){const o=Md;return Md=i,o}let ku=0;const ls={};function Ma(i,o){const a=Ps(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,Xc(c.data,i),Xc(o,null),Xc(c.blueprint,null));const d=Xs(i,o),p=i.injectorIndex;if(Jc(d)){const v=Aa(d),I=Js(d,o),C=I[1].data;for(let S=0;S<8;S++)o[p+S]=I[v+S]|C[v+S]}return o[p+8]=d,p}function Xc(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ps(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Xs(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Vu(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function qo(i,o,a){!function Nd(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(lr)&&(c=a[lr]),null==c&&(c=a[lr]=ku++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Fu(i,o,a){if(a&ot.Optional||void 0!==i)return i;we()}function Pd(i,o,a,c){if(a&ot.Optional&&void 0===c&&(c=null),0==(a&(ot.Self|ot.Host))){const d=i[9],p=Fr(void 0);try{return d?d.get(o,c,a&ot.Optional):Po(o,c,a&ot.Optional)}finally{Fr(p)}}return Fu(c,0,a)}function Od(i,o,a,c=ot.Default,d){if(null!==i){if(1024&o[2]){const v=function nl(i,o,a,c,d){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=Lu(p,v,a,c|ot.Self,ls);if(I!==ls)return I;let C=p.parent;if(!C){const S=v[21];if(S){const R=S.get(a,ls,c);if(R!==ls)return R}C=Vu(v),v=v[15]}p=C}return d}(i,o,a,c,ls);if(v!==ls)return v}const p=Lu(i,o,a,c,ls);if(p!==ls)return p}return Pd(o,a,c,d)}function Lu(i,o,a,c,d){const p=function eo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(lr)?i[lr]:void 0;return"number"==typeof o?o>=0?255&o:Sf:o}(a);if("function"==typeof p){if(!Ca(o,i,c))return c&ot.Host?Fu(d,0,c):Pd(o,a,c,d);try{const v=p(c);if(null!=v||c&ot.Optional)return v;we()}finally{Dd()}}else if("number"==typeof p){let v=null,I=Ps(i,o),C=-1,S=c&ot.Host?o[16][6]:null;for((-1===I||c&ot.SkipSelf)&&(C=-1===I?Xs(i,o):o[I+8],-1!==C&&el(c,!1)?(v=o[1],I=Aa(C),o=Js(C,o)):I=-1);-1!==I;){const R=o[1];if(Tf(p,I,R.data)){const k=av(I,o,a,v,c,S);if(k!==ls)return k}C=o[I+8],-1!==C&&el(c,o[1].data[I+8]===S)&&Tf(p,I,o)?(v=R,I=Aa(C),o=Js(C,o)):I=-1}}return d}function av(i,o,a,c,d,p){const v=o[1],I=v.data[i+8],R=ds(I,v,a,null==c?yu(I)&&Md:c!=v&&0!=(3&I.type),d&ot.Host&&p===I);return null!==R?Na(o,v,R,I):ls}function ds(i,o,a,c,d){const p=i.providerIndexes,v=o.data,I=1048575&p,C=i.directiveStart,R=p>>20,H=d?I+R:i.directiveEnd;for(let Q=c?I:I+R;Q<H;Q++){const Ie=v[Q];if(Q<C&&a===Ie||Q>=C&&Ie.type===a)return Q}if(d){const Q=v[C];if(Q&&Di(Q)&&Q.type===a)return C}return null}function Na(i,o,a,c){let d=i[a];const p=o.data;if(function Sa(i){return i instanceof Qs}(d)){const v=d;v.resolving&&function ut(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new De(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ye(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(p[a]));const I=Rs(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Fr(v.injectImpl):null;Ca(i,c,ot.Default);try{d=i[a]=v.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function jo(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=gd(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==C&&Fr(C),Rs(I),v.resolving=!1,Dd()}}return d}function Tf(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function el(i,o){return!(i&ot.Self||i&ot.Host&&o)}class Os{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Od(this._tNode,this._lView,o,c,a)}}function Sf(){return new Os(xn(),be())}function Qt(i){return Kn(()=>{const o=i.prototype.constructor,a=o[Zn]||tl(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[Zn]||tl(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function tl(i){return $e(i)?()=>{const o=tl(q(i));return o&&o()}:is(i)}function Vu(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Wo(i){return function Ra(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(bf(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(xn(),i)}const Mn="__parameters__";function no(i,o,a){return Kn(()=>{const c=function Pa(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(C,S,R){const k=C.hasOwnProperty(Mn)?C[Mn]:Object.defineProperty(C,Mn,{value:[]})[Mn];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class gn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qn(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),Qn(c,o)):o!==i&&o.push(c)}return o}function Ki(i,o){i.forEach(a=>Array.isArray(a)?Ki(a,o):o(a))}function ka(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Bu(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Ur(i,o,a){let c=io(i,o);return c>=0?i[1|c]=a:(c=~c,function At(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Fa(i,o){const a=io(i,o);if(a>=0)return i[1|a]}function io(i,o){return function Ai(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),v=i[p<<a];if(o===v)return p<<a;v>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const mn={},yr="__NG_DI_FLAG__",Tr="ngTempTokenPath",al=/\n/gm,Yo="__source";let ks;function vr(i){const o=ks;return ks=i,o}function $u(i,o=ot.Default){if(void 0===ks)throw new De(-203,!1);return null===ks?Po(i,void 0,o):ks.get(i,o&ot.Optional?null:void 0,o)}function Rn(i,o=ot.Default){return(function wi(){return kr}()||$u)(q(i),o)}function oo(i,o=ot.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Rn(i,o)}function cl(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new De(900,!1);let d,p=ot.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Hu(I);"number"==typeof C?-1===C?d=I.token:p|=C:d=I}o.push(Rn(d,p))}else o.push(Rn(c))}return o}function Fs(i,o){return i[yr]=o,i.prototype[yr]=o,i}function Hu(i){return i[yr]}const Ls=Fs(no("Optional"),8),ao=Fs(no("SkipSelf"),4);let Yu;function Fg(i){Yu=i}class fl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function D(i){return i instanceof fl?i.changingThisBreaksApplicationSecurity:i}const Ln=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function Bg(i){const o=function ec(){const i=be();return i&&i[12]}();return o?o.sanitize(rr.URL,i)||"":function A(i,o){const a=function P(i){return i instanceof fl&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?D(i):function xi(i){return(i=String(i)).match(Ln)?i:"unsafe:"+i}(ge(i))}const jf=new gn("ENVIRONMENT_INITIALIZER"),$f=new gn("INJECTOR",-1),$g=new gn("INJECTOR_DEF_TYPES");class Hg{get(o,a=mn){if(a===mn){const c=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw c.name="NullInjectorError",c}return a}}function Yd(...i){return{\u0275providers:Gg(0,i)}}function Gg(i,...o){const a=[],c=new Set;let d;return Ki(o,p=>{const v=p;vl(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Hf(d,a),a}function Hf(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ki(d,p=>{o.push(p)})}}function vl(i,o,a,c){if(!(i=q(i)))return!1;let d=null,p=ji(i);const v=!p&&ue(i);if(p||v){if(v&&!v.standalone)return!1;d=i}else{const C=i.ngModule;if(p=ji(C),!p)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)vl(S,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let S;c.add(d);try{Ki(p.imports,R=>{vl(R,o,a,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&Hf(S,o)}if(!I){const S=is(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:vt},{provide:$g,useValue:d,multi:!0},{provide:jf,useValue:()=>Rn(d),multi:!0})}const C=p.providers;null==C||I||Ki(C,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const zg=he({provide:String,useValue:he});function zf(i){return null!==i&&"object"==typeof i&&zg in i}function ho(i){return"function"==typeof i}const nc=new gn("Set Injector scope."),Qd={},qf={};let Jd;function Xd(){return void 0===Jd&&(Jd=new Hg),Jd}class Ji{}class Wg extends Ji{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yf(o,v=>this.processProvider(v)),this.records.set($f,rc(void 0,this)),d.has("environment")&&this.records.set(Ji,rc(void 0,this));const p=this.records.get(nc);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get($g.multi,vt,ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=vr(this),c=Fr(void 0);try{return o()}finally{vr(a),Fr(c)}}get(o,a=mn,c=ot.Default){this.assertNotDestroyed();const d=vr(this),p=Fr(void 0);try{if(!(c&ot.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function Zg(i){return"function"==typeof i||"object"==typeof i&&i instanceof gn}(o)&&Dr(o);I=C&&this.injectableDefInScope(C)?rc(_l(o),Qd):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ot.Self?Xd():this.parent).get(o,a=c&ot.Optional&&a===mn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Tr]=v[Tr]||[]).unshift(_e(o)),d)throw v;return function Gu(i,o,a,c){const d=i[Tr];throw o[Yo]&&d.unshift(o[Yo]),i.message=function zu(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=_e(o);if(Array.isArray(o))d=o.map(_e).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):_e(I)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(al,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Tr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Fr(p),vr(d)}}resolveInjectorInitializers(){const o=vr(this),a=Fr(void 0);try{const c=this.get(jf.multi,vt,ot.Self);for(const d of c)d()}finally{vr(o),Fr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(_e(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let a=ho(o=q(o))?o:q(o&&o.provide);const c=function Wf(i){return zf(i)?rc(void 0,i.useValue):rc(Kg(i),Qd)}(o);if(ho(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=rc(void 0,Qd,!0),d.factory=()=>cl(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Qd&&(a.value=qf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Zf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function _l(i){const o=Dr(i),a=null!==o?o.factory:is(i);if(null!==a)return a;if(i instanceof gn)throw new De(204,!1);if(i instanceof Function)return function yv(i){const o=i.length;if(o>0)throw function Zi(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new De(204,!1);const a=function Ro(i){const o=i&&(i[$i]||i[ma]);if(o){const a=function ga(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new De(204,!1)}function Kg(i,o,a){let c;if(ho(i)){const d=q(i);return is(d)||_l(d)}if(zf(i))c=()=>q(i.useValue);else if(function qg(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...cl(i.deps||[]));else if(function tc(i){return!(!i||!i.useExisting)}(i))c=()=>Rn(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function Kf(i){return!!i.deps}(i))return is(d)||_l(d);c=()=>new d(...cl(i.deps))}return c}function rc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function eh(i){return!!i.\u0275providers}function Yf(i,o){for(const a of i)Array.isArray(a)?Yf(a,o):eh(a)?Yf(a.\u0275providers,o):o(a)}class Qf{}class vv{resolveComponentFactory(o){throw function ir(i){const o=Error(`No component factory found for ${_e(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let na=(()=>{class i{}return i.NULL=new vv,i})();function Jf(){return sc(xn(),be())}function sc(i,o){return new ra(zr(i,o))}let ra=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Jf,i})();function Qg(i){return i instanceof ra?i.nativeElement:i}class nh{}let _v=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Jg(){const i=be(),a=$t(xn().index,i);return(Yn(a)?a:i)[11]}(),i})(),wv=(()=>{class i{}return i.\u0275prov=yt({token:i,providedIn:"root",factory:()=>null}),i})();class rh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const ei=new rh("14.2.7"),oc={};function W(i){return i.ngOriginalError}class Te{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&W(o);for(;a&&W(a);)a=W(a);return a||null}}const uc=new Map;let cc=0;const ms="__ngContext__";function vn(i,o){Yn(o)?(i[ms]=o[20],function np(i){uc.set(i[20],i)}(o)):i[ms]=o}function ys(i){return i instanceof Function?i():i}var mo=(()=>((mo=mo||{})[mo.Important=1]="Important",mo[mo.DashCase=2]="DashCase",mo))();function Ew(i,o){return undefined(i,o)}function ip(i){const o=i[3];return Vr(o)?o[3]:o}function tm(i){return Av(i[13])}function Sv(i){return Av(i[4])}function Av(i){for(;null!==i&&!Vr(i);)i=i[4];return i}function Il(i,o,a,c,d){if(null!=c){let p,v=!1;Vr(c)?p=c:Yn(c)&&(v=!0,c=c[0]);const I=Fn(c);0===i&&null!==a?null==d?Mv(o,a,I):hc(o,a,I,d||null,!0):1===i&&null!==a?hc(o,a,I,d||null,!0):2===i?function UC(i,o,a){const c=bl(i,o);c&&function LC(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=p&&function lp(i,o,a,c,d){const p=a[7];p!==Fn(a)&&Il(o,i,c,p,d);for(let I=10;I<a.length;I++){const C=a[I];cp(C[1],C,i,o,c,p)}}(o,i,p,a,d)}}function Bt(i,o,a){return i.createElement(o,a)}function Cw(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,gr(d,-1)),a.splice(c,1)}function ah(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&Cw(d,c),o>0&&(i[a-1][4]=c[4]);const p=Bu(i,10+o);!function op(i,o){cp(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function uh(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&cp(i,o,a,3,null,null),function kC(i){let o=i[13];if(!o)return rm(i[1],i);for(;o;){let a=null;if(Yn(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)Yn(o)&&rm(o[1],o),o=o[3];null===o&&(o=i),Yn(o)&&rm(o[1],o),a=o&&o[4]}o=a}}(o)}}function rm(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function FC(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Qs)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],C=p[v+1];try{C.call(I)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function im(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],I="function"==typeof v?v(o):Fn(o[v]),C=c[d=a[p+2]],S=a[p+3];"boolean"==typeof S?I.removeEventListener(a[p],C,S):S>=0?c[d=S]():c[d=-S].unsubscribe(),p+=2}else{const v=c[d=a[p+1]];a[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Vr(o[3])){a!==o[3]&&Cw(a,o);const c=o[19];null!==c&&c.detachView(i)}!function wl(i){uc.delete(i[20])}(o)}}function sm(i,o,a){return function ap(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===ht.None||d===ht.Emulated)return null}return zr(c,a)}(i,o.parent,a)}function hc(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Mv(i,o,a){i.appendChild(o,a)}function bw(i,o,a,c,d){null!==c?hc(i,o,a,c,d):Mv(i,o,a)}function bl(i,o){return i.parentNode(o)}let Aw=function Sw(i,o,a){return 40&i.type?zr(i,a):null};function Tl(i,o,a,c){const d=sm(i,c,o),p=o[11],I=function Tw(i,o,a){return Aw(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)bw(p,d,a[C],I,!1);else bw(p,d,a,I,!1)}function am(i,o){if(null!==o){const a=o.type;if(3&a)return zr(o,i);if(4&a)return up(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return am(i,c);{const d=i[o.index];return Vr(d)?up(-1,d):Fn(d)}}if(32&a)return Ew(o,i)()||Fn(i[o.index]);{const c=fc(i,o);return null!==c?Array.isArray(c)?c[0]:am(ip(i[16]),c):am(i,o.next)}}return null}function fc(i,o){return null!==o?i[16][6].projection[o.projection]:null}function up(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return am(c,d)}return o[7]}function Nv(i,o,a,c,d,p,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&vn(Fn(I),c),a.flags|=4),64!=(64&a.flags))if(8&C)Nv(i,o,a.child,c,d,p,!1),Il(o,i,d,I,p);else if(32&C){const S=Ew(a,c);let R;for(;R=S();)Il(o,i,d,R,p);Il(o,i,d,I,p)}else 16&C?ch(i,o,c,a,d,p):Il(o,i,d,I,p);a=v?a.projectionNext:a.next}}function cp(i,o,a,c,d,p){Nv(a,c,i.firstChild,o,d,p,!1)}function ch(i,o,a,c,d,p){const v=a[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Il(o,i,d,C[S],p);else Nv(i,o,C,v[3],d,p,!0)}function Pv(i,o,a){i.setAttribute(o,"style",a)}function um(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Ov(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const xw="ng-template";function jC(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Ov(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function kv(i){return 4===i.type&&i.value!==xw}function $C(i,o,a){return o===(4!==i.type||a?i.value:xw)}function Fv(i,o,a){let c=4;const d=i.attrs||[],p=function Mw(i){for(let o=0;o<i.length;o++)if(bf(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!$C(i,C,a)||""===C&&1===o.length){if(Ni(c))return!1;v=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==i.attrs){if(!jC(i.attrs,S,a)){if(Ni(c))return!1;v=!0}continue}const k=HC(8&c?"class":C,d,kv(i),a);if(-1===k){if(Ni(c))return!1;v=!0;continue}if(""!==S){let H;H=k>p?"":d[k+1].toLowerCase();const Q=8&c?H:null;if(Q&&-1!==Ov(Q,S,0)||2&c&&S!==H){if(Ni(c))return!1;v=!0}}}}else{if(!v&&!Ni(c)&&!Ni(C))return!1;if(v&&Ni(C))continue;v=!1,c=C|1&c}}return Ni(c)||v}function Ni(i){return 0==(1&i)}function HC(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function Rw(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function cm(i,o,a=!1){for(let c=0;c<o.length;c++)if(Fv(i,o[c],a))return!0;return!1}function lm(i,o){return i?":not("+o.trim()+")":o}function Sl(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ni(v)&&(o+=lm(p,d),d=""),c=v,p=p||!Ni(c);a++}return""!==d&&(o+=lm(p,d)),o}const Ft={};function Pw(i){Ow(Lt(),be(),Ht()+i,!1)}function Ow(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&$o(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Wi(o,p,0,a)}qi(a)}function Vw(i,o=null,a=null,c){const d=Lv(i,o,a,c);return d.resolveInjectorInitializers(),d}function Lv(i,o=null,a=null,c,d=new Set){const p=[a||vt,Yd(i)];return c=c||("object"==typeof i?void 0:_e(i)),new Wg(p,o||Xd(),c||null,d)}let Qa=(()=>{class i{static create(a,c){if(Array.isArray(a))return Vw({name:""},c,a,"");{const d=a.name??"";return Vw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=mn,i.NULL=new Hg,i.\u0275prov=yt({token:i,providedIn:"any",factory:()=>Rn($f)}),i.__NG_ELEMENT_ID__=-1,i})();function Al(i,o=ot.Default){const a=be();return null===a?Rn(i,o):Od(xn(),a,q(i),o)}function nb(){throw new Error("invalid")}function Hv(i,o){return i<<17|o<<2}function ia(i){return i>>17&32767}function Gv(i){return 2|i}function Ja(i){return(131068&i)>>2}function hp(i,o){return-131069&i|o<<2}function pm(i){return 1|i}function _p(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];Ti(d),v.contentQueries(2,o[p],p)}}}function Ml(i,o,a,c,d,p,v,I,C,S,R){const k=o.blueprint.slice();return k[0]=d,k[2]=76|c,(null!==R||i&&1024&i[2])&&(k[2]|=1024),_a(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=I||i&&i[11],k[12]=C||i&&i[12]||null,k[9]=S||i&&i[9]||null,k[6]=p,k[20]=function fo(){return cc++}(),k[21]=R,k[16]=2==o.type?i[16]:k,k}function Xa(i,o,a,c,d){let p=i.data[o];if(null===p)p=function vm(i,o,a,c,d){const p=Tu(),v=Ia(),C=i.data[o]=function hb(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==p&&(v?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(i,o,a,c,d),function Ed(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const v=function Bo(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Wr(p,!0),p}function sa(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function _m(i,o,a){Wc(o);try{const c=i.viewQuery;null!==c&&o_(1,c,a);const d=i.template;null!==d&&oE(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&_p(i,o),i.staticViewQueries&&o_(2,i.viewQuery,a);const p=i.components;null!==p&&function sE(i,o){for(let a=0;a<o.length;a++)Ib(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,Ys()}}function wm(i,o,a,c){const d=o[2];if(128!=(128&d)){Wc(o);try{_a(o),function Kr(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&oE(i,o,a,2,c);const v=3==(3&d);if(v){const S=i.preOrderCheckHooks;null!==S&&$o(o,S,null)}else{const S=i.preOrderHooks;null!==S&&Wi(o,S,0,null),Nu(o,0)}if(function Eb(i){for(let o=tm(i);null!==o;o=Sv(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(512&d[2])&&gr(p,1),d[2]|=512}}}(o),function wb(i){for(let o=tm(i);null!==o;o=Sv(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];os(c)&&wm(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&_p(i,o),v){const S=i.contentCheckHooks;null!==S&&$o(o,S)}else{const S=i.contentHooks;null!==S&&Wi(o,S,1),Nu(o,1)}!function cb(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)qi(~d);else{const p=d,v=a[++c],I=a[++c];Ng(v,p),I(2,o[p])}}}finally{qi(-1)}}(i,o);const I=i.components;null!==I&&function iE(i,o){for(let a=0;a<o.length;a++)Cm(i,o[a])}(o,I);const C=i.viewQuery;if(null!==C&&o_(2,C,c),v){const S=i.viewCheckHooks;null!==S&&$o(o,S)}else{const S=i.viewHooks;null!==S&&Wi(o,S,2),Nu(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,gr(o[3],-1))}finally{Ys()}}}function oE(i,o,a,c,d){const p=Ht(),v=2&c;try{qi(-1),v&&o.length>22&&Ow(i,o,22,!1),a(c,d)}finally{qi(p)}}function Qv(i,o,a){!wa()||(function mb(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ma(a,o),vn(c,o);const v=a.initialInputs;for(let I=d;I<p;I++){const C=i.data[I],S=Di(C);S&&_b(o,a,C);const R=Na(o,i,I,a);vn(R,o),null!==v&&Im(0,I-d,R,C,0,v),S&&($t(a.index,o)[8]=R)}}(i,o,a,zr(a,o)),128==(128&a.flags)&&function yb(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,v=function xu(){return St.lFrame.currentDirectiveIndex}();try{qi(p);for(let I=c;I<d;I++){const C=i.data[I],S=o[I];Id(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&fE(C,S)}}finally{qi(-1),Id(v)}}(i,o,a))}function Jv(i,o,a=zr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function wp(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Xv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Xv(i,o,a,c,d,p,v,I,C,S){const R=22+c,k=R+d,H=function lb(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Ft);return a}(R,k),Q="function"==typeof S?S():S;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function uE(i,o,a,c){const d=Tm(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Sm(i).push(c,d.length-1))}function cE(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function e_(i,o){const c=o.directiveEnd,d=i.data,p=o.attrs,v=[];let I=null,C=null;for(let S=o.directiveStart;S<c;S++){const R=d[S],k=R.inputs,H=null===p||kv(o)?null:vE(k,p);v.push(H),I=cE(k,S,I),C=cE(R.outputs,S,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=C}function t_(i,o){const a=$t(o,i);16&a[2]||(a[2]|=32)}function n_(i,o,a,c){let d=!1;if(wa()){const p=function pE(i,o,a){const c=i.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];cm(a,v.selectors,!1)&&(d||(d=[]),qo(Ma(a,o),i,v.type),Di(v)?(Em(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===c?null:{"":-1};if(null!==p){d=!0,vb(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const k=p[R];k.providersResolver&&k.providersResolver(k)}let I=!1,C=!1,S=sa(i,o,p.length,null);for(let R=0;R<p.length;R++){const k=p[R];a.mergedAttrs=zo(a.mergedAttrs,k.hostAttrs),yE(i,a,o,S,k),mE(S,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const H=k.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!C&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),S++}e_(i,a)}v&&function gE(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new De(-301,!1);c.push(o[d],p)}}}(a,c,v)}return a.mergedAttrs=zo(a.mergedAttrs,a.attrs),d}function hE(i,o,a,c,d,p){const v=p.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const C=~o.index;(function gb(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=C&&I.push(C),I.push(c,d,v)}}function fE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Em(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function mE(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Di(o)&&(a[""]=i)}}function vb(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function yE(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=is(d.type)),v=new Qs(p,Di(d),Al);i.blueprint[c]=v,a[c]=v,hE(i,o,0,c,sa(i,a,d.hostVars,Ft),d)}function _b(i,o,a){const c=zr(o,i),d=wp(a),p=i[10],v=bm(i,Ml(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=v}function oa(i,o,a,c,d,p){const v=zr(i,o);!function r_(i,o,a,c,d,p,v){if(null==p)i.removeAttribute(o,d,a);else{const I=null==v?ge(p):v(p,c||"",d);i.setAttribute(o,d,I,a)}}(o[11],v,p,i.value,a,c,d)}function Im(i,o,a,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const S=v[C++],R=v[C++],k=v[C++];null!==I?c.setInput(a,k,S,R):a[R]=k}}}function vE(i,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function Dm(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function Cm(i,o){const a=$t(o,i);if(os(a)){const c=a[1];48&a[2]?wm(c,a,c.template,a[8]):a[5]>0&&i_(a)}}function i_(i){for(let c=tm(i);null!==c;c=Sv(c))for(let d=10;d<c.length;d++){const p=c[d];if(os(p))if(512&p[2]){const v=p[1];wm(v,p,v.template,p[8])}else p[5]>0&&i_(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=$t(a[c],i);os(d)&&d[5]>0&&i_(d)}}function Ib(i,o){const a=$t(o,i),c=a[1];(function Db(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),_m(c,a,a[8])}function bm(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function s_(i){for(;i;){i[2]|=32;const o=ip(i);if(Lo(i)&&!o)return i;i=o}return null}function Ep(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{wm(i,o,i.template,a)}catch(v){throw c&&EE(o,v),v}finally{d.end&&d.end()}}function o_(i,o,a){Ti(0),o(i,a)}function Tm(i){return i[7]||(i[7]=[])}function Sm(i){return i.cleanup||(i.cleanup=[])}function EE(i,o){const a=i[9],c=a?a.get(Te,null):null;c&&c.handleError(o)}function Am(i,o,a,c,d){for(let p=0;p<a.length;){const v=a[p++],I=a[p++],C=o[v],S=i.data[v];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function a_(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=pe(d,I):2==p&&(c=pe(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function xm(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(Fn(p)),Vr(p))for(let I=10;I<p.length;I++){const C=p[I],S=C[1].firstChild;null!==S&&xm(C[1],C,S,c)}const v=a.type;if(8&v)xm(i,o,a.child,c);else if(32&v){const I=Ew(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=fc(o,a);if(Array.isArray(I))c.push(...I);else{const C=ip(o[16]);xm(C[1],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Rl{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return xm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(ah(o,c),Bu(a,c))}this._attachedToViewContainer=!1}uh(this._lView[1],this._lView)}onDestroy(o){uE(this._lView[1],this._lView,null,o)}markForCheck(){s_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ep(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cl(i,o){cp(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class IE extends Rl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ep(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class mh extends na{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ue(o);return new Nl(a,this.ngModule)}}function bb(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class yh{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,oc,c);return d!==oc||a===oc?d:this.parentInjector.get(o,a,c)}}class Nl extends Qf{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function dm(i){return i.map(Sl).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return bb(this.componentDef.inputs)}get outputs(){return bb(this.componentDef.outputs)}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Ji?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new yh(o,p):o,I=v.get(nh,null);if(null===I)throw new De(407,!1);const C=v.get(wv,null),S=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=c?function db(i,o,a){return i.selectRootElement(o,a===ht.ShadowDom)}(S,c,this.componentDef.encapsulation):Bt(I.createRenderer(null,this.componentDef),R,function DE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),H=this.componentDef.onPush?288:272,Q=Xv(0,null,null,1,0,null,null,null,null,null),Ie=Ml(null,Q,null,H,null,null,I,S,C,v,null);let Fe,qe;Wc(Ie);try{const at=function Sb(i,o,a,c,d,p){const v=a[1];a[22]=i;const C=Xa(v,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(a_(C,S,!0),null!==i&&(Go(d,i,S),null!==C.classes&&um(d,i,C.classes),null!==C.styles&&Pv(d,i,C.styles)));const R=c.createRenderer(i,o),k=Ml(a,wp(o),null,o.onPush?32:16,a[22],C,c,R,p||null,null,null);return v.firstCreatePass&&(qo(Ma(C,a),v,o.type),Em(v,C),vb(C,a.length,1)),bm(a,k),a[22]=k}(k,this.componentDef,Ie,I,S);if(k)if(c)Go(S,k,["ng-version",ei.full]);else{const{attrs:Dt,classes:Ce}=function Nw(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!Ni(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Dt&&Go(S,k,Dt),Ce&&Ce.length>0&&um(S,k,Ce.join(" "))}if(qe=bu(Q,22),void 0!==a){const Dt=qe.projection=[];for(let Ce=0;Ce<this.ngContentSelectors.length;Ce++){const It=a[Ce];Dt.push(null!=It?Array.from(It):null)}}Fe=function Ab(i,o,a,c){const d=a[1],p=function dE(i,o,a){const c=xn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),yE(i,c,o,sa(i,o,1,null),a),e_(i,c));const d=Na(o,i,c.directiveStart,c);vn(d,o);const p=zr(c,o);return p&&vn(p,o),d}(d,a,o);if(i[8]=a[8]=p,null!==c)for(const I of c)I(p,o);if(o.contentQueries){const I=xn();o.contentQueries(1,p,I.directiveStart)}const v=xn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(qi(v.index),hE(a[1],v,0,v.directiveStart,v.directiveEnd,o),fE(o,p)),p}(at,this.componentDef,Ie,[xb]),_m(Q,Ie,null)}finally{Ys()}return new CE(this.componentType,Fe,sc(qe,Ie),Ie,qe)}}class CE extends class th{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new IE(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Am(p[1],p,d,o,a),t_(p,this._tNode.index)}}get injector(){return new Os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function xb(){const i=xn();cs(be()[1],i)}function c_(i){let o=function u_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Di(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=vh(i.inputs),v.declaredInputs=vh(i.declaredInputs),v.outputs=vh(i.outputs);const I=d.hostBindings;I&&Mb(i,I);const C=d.viewQuery,S=d.contentQueries;if(C&&lx(i,C),S&&TE(i,S),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),Di(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const I=p[v];I&&I.ngInherit&&I(i),I===c_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function cx(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=zo(d.hostAttrs,a=zo(a,d.hostAttrs))}}(c)}function vh(i){return i===$n?{}:i===vt?[]:i}function lx(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function TE(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function Mb(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let Mm=null;function Pl(){if(!Mm){const i=cn.Symbol;if(i&&i.iterator)Mm=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Mm=c)}}}return Mm}function Ip(i){return!!xE(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pl()in i)}function xE(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function on(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function _s(i,o,a,c){const d=be();return on(d,as(),o)&&(Lt(),oa(In(),d,i,o,a,c)),_s}function ni(i,o,a,c,d,p,v,I){const C=be(),S=Lt(),R=i+22,k=S.firstCreatePass?function Fb(i,o,a,c,d,p,v,I,C){const S=o.consts,R=Xa(o,i,4,v||null,qr(S,I));n_(o,a,R,qr(S,C)),cs(o,R);const k=R.tViews=Xv(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),k.queries=o.queries.embeddedTView(R)),R}(R,S,C,o,a,c,d,p,v):S.data[R];Wr(k,!1);const H=C[11].createComment("");Tl(S,C,H,k),vn(H,C),bm(C,C[R]=Dm(H,C,H,k)),rs(k)&&Qv(S,C,k),null!=v&&Jv(C,k,I)}function xr(i){return function Vo(i,o){return i[o]}(function _d(){return St.lFrame.contextLView}(),22+i)}function ua(i,o,a){const c=be();return on(c,as(),o)&&function Xi(i,o,a,c,d,p,v,I){const C=zr(o,a);let R,S=o.inputs;!I&&null!=S&&(R=S[c])?(Am(i,a,R,c,d),yu(o)&&t_(a,o.index)):3&o.type&&(c=function fb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,p.setProperty(C,c,d))}(Lt(),In(),c,i,o,c[11],a,!1),ua}function l_(i,o,a,c,d){const v=d?"class":"style";Am(i,a,o.inputs[v],v,c)}function Ih(i,o,a,c){const d=be(),p=Lt(),v=22+i,I=d[11],C=d[v]=Bt(I,o,function xs(){return St.lFrame.currentNamespace}()),S=p.firstCreatePass?function NE(i,o,a,c,d,p,v){const I=o.consts,S=Xa(o,i,2,d,qr(I,p));return n_(o,a,S,qr(I,v)),null!==S.attrs&&a_(S,S.attrs,!1),null!==S.mergedAttrs&&a_(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,p,d,0,o,a,c):p.data[v];Wr(S,!0);const R=S.mergedAttrs;null!==R&&Go(I,C,R);const k=S.classes;null!==k&&um(I,C,k);const H=S.styles;return null!==H&&Pv(I,C,H),64!=(64&S.flags)&&Tl(p,d,C,S),0===function Uo(){return St.lFrame.elementDepthCount}()&&vn(C,d),function yd(){St.lFrame.elementDepthCount++}(),rs(S)&&(Qv(p,d,S),function aE(i,o,a){if(Fo(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,S,d)),null!==c&&Jv(d,S),Ih}function Sp(){let i=xn();Ia()?function qc(){St.lFrame.isParent=!1}():(i=i.parent,Wr(i,!1));const o=i;!function vd(){St.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(cs(a,i),Fo(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Ho(i){return 0!=(16&i.flags)}(o)&&l_(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function bd(i){return 0!=(32&i.flags)}(o)&&l_(a,o,be(),o.stylesWithoutHost,!1),Sp}function Br(i,o,a,c){return Ih(i,o,a,c),Sp(),Br}function Ap(){return be()}function Gs(i){return!!i&&"function"==typeof i.then}function Lm(i){return!!i&&"function"==typeof i.subscribe}const d_=Lm;function h_(i,o,a,c){const d=be(),p=Lt(),v=xn();return function Vm(i,o,a,c,d,p,v,I){const C=rs(c),R=i.firstCreatePass&&Sm(i),k=o[8],H=Tm(o);let Q=!0;if(3&c.type||I){const qe=zr(c,o),at=I?I(qe):qe,Dt=H.length,Ce=I?an=>I(Fn(an[c.index])):c.index;let It=null;if(!I&&C&&(It=function PE(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===c){const I=o[7],C=d[p+2];return I.length>C?I[C]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=p,It.__ngLastListenerFn__=p,Q=!1;else{p=OE(c,o,k,p,!1);const an=a.listen(at,d,p);H.push(p,an),R&&R.push(d,Ce,Dt,Dt+1)}}else p=OE(c,o,k,p,!1);const Ie=c.outputs;let Fe;if(Q&&null!==Ie&&(Fe=Ie[d])){const qe=Fe.length;if(qe)for(let at=0;at<qe;at+=2){const jn=o[Fe[at]][Fe[at+1]].subscribe(p),Pc=H.length;H.push(p,jn),R&&R.push(d,c.index,Pc,-(Pc+1))}}}(p,d,d[11],v,i,o,0,c),h_}function f_(i,o,a,c){try{return!1!==a(c)}catch(d){return EE(i,d),!1}}function OE(i,o,a,c,d){return function p(v){if(v===Function)return c;s_(2&i.flags?$t(i.index,o):o);let C=f_(o,0,c,v),S=p.__ngNextListenerFn__;for(;S;)C=f_(o,0,S,v)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function p_(i=1){return function us(i){return(St.lFrame.contextLView=function Cf(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function w_(i,o,a,c,d){const p=i[a+1],v=null===o;let I=c?ia(p):Ja(p),C=!1;for(;0!==I&&(!1===C||v);){const R=i[I+1];UE(i[I],o)&&(C=!0,i[I+1]=c?pm(R):Gv(R)),I=c?ia(R):Ja(R)}C&&(i[a+1]=c?Gv(p):pm(p))}function UE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&io(i,o)>=0}function Mp(i,o){return function vo(i,o,a,c){const d=be(),p=Lt(),v=function li(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function zE(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[Ht()],v=function T_(i,o){return o>=i.expandoStartIndex}(i,a);(function M_(i,o){return 0!=(i.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function Vb(i,o,a,c){const d=function Da(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Sh(a=Rp(null,i,o,a,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=Rp(d,i,o,a,c),null===p){let C=function qE(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Ja(c))return i[ia(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=Rp(null,i,o,C[1],c),C=Sh(C,o.attrs,c),function S_(i,o,a,c){i[ia(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else p=function Ub(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Sh(c,i[p].hostAttrs,a);return Sh(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function $m(i,o,a,c,d,p){let v=p?o.classBindings:o.styleBindings,I=ia(v),C=Ja(v);i[c]=a;let R,S=!1;if(Array.isArray(a)){const k=a;R=k[1],(null===R||io(k,R)>0)&&(S=!0)}else R=a;if(d)if(0!==C){const H=ia(i[I+1]);i[c+1]=Hv(H,I),0!==H&&(i[H+1]=hp(i[H+1],c)),i[I+1]=function ib(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=Hv(I,0),0!==I&&(i[I+1]=hp(i[I+1],c)),I=c;else i[c+1]=Hv(C,0),0===I?I=c:i[C+1]=hp(i[C+1],c),C=c;S&&(i[c+1]=Gv(i[c+1])),w_(i,R,c,!0),w_(i,R,c,!1),function __(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&io(p,o)>=0&&(a[c+1]=pm(a[c+1]))}(o,R,i,c,p),v=Hv(I,C),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,c)}}(p,i,v,c),o!==Ft&&on(d,v,o)&&function Wm(i,o,a,c,d,p,v,I){if(!(3&o.type))return;const C=i.data,S=C[I+1];Km(function vs(i){return 1==(1&i)}(S)?x_(C,o,a,d,Ja(S),v):void 0)||(Km(p)||function fm(i){return 2==(2&i)}(S)&&(p=x_(C,null,a,d,I,v)),function lh(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:mo.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=mo.Important),i.setStyle(a,c,d,p))}}(c,v,ci(Ht(),a),d,p))}(p,p.data[Ht()],d,d[11],i,d[v+1]=function Pp(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=_e(D(i)))),i}(o,a),c,v)}(i,o,null,!0),Mp}function Rp(i,o,a,c,d){let p=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(p=o[I],c=Sh(c,p.hostAttrs,d),p!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Sh(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ur(i,v,!!a||o[++p]))}return void 0===i?null:i}function x_(i,o,a,c,d,p){const v=null===o;let I;for(;d>0;){const C=i[d],S=Array.isArray(C),R=S?C[1]:C,k=null===R;let H=a[d+1];H===Ft&&(H=k?vt:void 0);let Q=k?Fa(H,c):R===c?H:void 0;if(S&&!Km(Q)&&(Q=Fa(C,c)),Km(Q)&&(I=Q,v))return I;const Ie=i[d+1];d=v?ia(Ie):Ja(Ie)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(I=Fa(C,c))}return I}function Km(i){return void 0!==i}function R_(i,o=""){const a=be(),c=Lt(),d=i+22,p=c.firstCreatePass?Xa(c,d,1,o,null):c.data[d],v=a[d]=function nm(i,o){return i.createText(o)}(a[11],o);Tl(c,a,v,p),Wr(p,!1)}function Zm(i){return Ah("",i,""),Zm}function Ah(i,o,a){const c=be(),d=function _h(i,o,a,c){return on(i,as(),a)?o+ge(a)+c:Ft}(c,i,o,a);return d!==Ft&&function _c(i,o,a){const c=ci(o,i);!function sp(i,o,a){i.setValue(o,a)}(i[11],c,a)}(c,Ht(),d),Ah}const wo=void 0;var j_=["en",[["a","p"],["AM","PM"],wo],[["AM","PM"],wo,wo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wo,"{1} 'at' {0}",wo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Fl(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Mh={};function ey(i){const o=function ty(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ec(o);if(a)return a;const c=o.split("-")[0];if(a=Ec(c),a)return a;if("en"===c)return j_;throw new De(701,!1)}function oI(i){return ey(i)[Et.PluralCase]}function Ec(i){return i in Mh||(Mh[i]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[i]),Mh[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const nu="en-US";let uI=nu;function dy(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let p=0;p<i.length;p++)dy(i[p],o,a,c,d);else{const p=Lt(),v=be();let I=ho(i)?i:q(i.provide),C=Kg(i);const S=xn(),R=1048575&S.providerIndexes,k=S.directiveStart,H=S.providerIndexes>>20;if(ho(i)||!i.multi){const Q=new Qs(C,d,Al),Ie=Mr(I,o,d?R:R+H,k);-1===Ie?(qo(Ma(S,v),p,I),Io(p,i,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[Ie]=Q,v[Ie]=Q)}else{const Q=Mr(I,o,R+H,k),Ie=Mr(I,o,R,R+H),Fe=Q>=0&&a[Q],qe=Ie>=0&&a[Ie];if(d&&!qe||!d&&!Fe){qo(Ma(S,v),p,I);const at=function py(i,o,a,c,d){const p=new Qs(i,a,Al);return p.multi=[],p.index=o,p.componentProviders=0,Is(p,d,c&&!a),p}(d?fy:hy,a.length,d,c,C);!d&&qe&&(a[Ie].providerFactory=at),Io(p,i,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(at),v.push(at)}else Io(p,i,Q>-1?Q:Ie,Is(a[d?Ie:Q],C,!d&&c));!d&&c&&qe&&a[Ie].componentProviders++}}}function Io(i,o,a,c){const d=ho(o),p=function mv(i){return!!i.useClass}(o);if(d||p){const C=(p?q(o.useClass):o).prototype.ngOnDestroy;if(C){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[c,C]):S[R+1].push(c,C)}else S.push(a,C)}}}function Is(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Mr(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function hy(i,o,a,c){return Ul(this.multi,[])}function fy(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Na(a,a[1],this.providerFactory.index,c);p=I.slice(0,v),Ul(d,p);for(let C=v;C<I.length;C++)p.push(I[C])}else p=[],Ul(d,p);return p}function Ul(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function r0(i,o=[]){return a=>{a.providersResolver=(c,d)=>function n0(i,o,a){const c=Lt();if(c.firstCreatePass){const d=Di(i);dy(a,c.data,c.blueprint,d,!0),dy(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Do{}class MI{}function Yb(i,o){return new NI(i,o??null)}class NI extends Do{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mh(this);const c=Mt(o);this._bootstrapComponents=ys(c.bootstrap),this._r3Injector=Lv(o,a,[{provide:Do,useValue:this},{provide:na,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class s0 extends MI{constructor(o){super(),this.moduleType=o}create(o){return new NI(this.moduleType,o)}}class PI extends Do{constructor(o,a,c){super(),this.componentFactoryResolver=new mh(this),this.instance=null;const d=new Wg([...o,{provide:Do,useValue:this},{provide:na,useValue:this.componentFactoryResolver}],a||Xd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function o0(i,o,a=null){return new PI(i,o,a).injector}let gy=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Gg(0,a.type),d=c.length>0?o0([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=yt({token:i,providedIn:"environment",factory:()=>new i(Rn(Ji))}),i})();function OI(i){i.getStandaloneInjector=o=>o.get(gy).getOrCreateStandaloneInjector(i)}function Bh(i){return o=>{setTimeout(i,void 0,o)}}const la=class sT extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),p=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(p=Bh(p),d&&(d=Bh(d)),v&&(v=Bh(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof J.w0&&o.add(I),I}};function eg(){return this._results[Pl()]()}class vy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pl(),c=vy.prototype;c[a]||(c[a]=eg)}get changes(){return this._changes||(this._changes=new la)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=Qn(o);(this._changesDetected=!function Rf(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jh=(()=>{class i{}return i.__NG_ELEMENT_ID__=LI,i})();const Ds=jh,f0=class extends Ds{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=Ml(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),_m(c,d,o),new Rl(d)}};function LI(){return tg(xn(),be())}function tg(i,o){return 4&i.type?new f0(o,i,sc(i,o)):null}let To=(()=>{class i{}return i.__NG_ELEMENT_ID__=p0,i})();function p0(){return $h(xn(),be())}const ie=To,ng=class extends ie{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return sc(this._hostTNode,this._hostLView)}get injector(){return new Os(this._hostTNode,this._hostLView)}get parentInjector(){const o=Xs(this._hostTNode,this._hostLView);if(Jc(o)){const a=Js(o,this._hostLView),c=Aa(o);return new Os(a[1].data[c+8],a)}return new Os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=qs(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(o,a,c,d,p){const v=o&&!function Zr(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const k=a||{};I=k.index,c=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const C=v?o:new Nl(ue(o)),S=c||this.parentInjector;if(!p&&null==C.ngModule){const H=(v?S:this.parentInjector).get(Ji,null);H&&(p=H)}const R=C.create(S,d,void 0,p);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[1];if(function md(i){return Vr(i[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const k=c[3],H=new ng(k,k[6],k[3]);H.detach(H.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Dw(i,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],ka(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function xv(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(i),o[2]|=64}(d,c,v,p);const I=up(p,v),C=c[11],S=bl(C,v[7]);return null!==S&&function OC(i,o,a,c,d,p){c[0]=d,c[6]=o,cp(i,c,a,1,d,p)}(d,v[6],C,c,S,I),o.attachToViewContainerRef(),ka(g0(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=qs(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=ah(this._lContainer,a);c&&(Bu(g0(this._lContainer),a),uh(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=ah(this._lContainer,a);return c&&null!=Bu(g0(this._lContainer),a)?new Rl(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function qs(i){return i[8]}function g0(i){return i[8]||(i[8]=[])}function $h(i,o){let a;const c=o[i.index];if(Vr(c))a=c;else{let d;if(8&i.type)d=Fn(c);else{const p=o[11];d=p.createComment("");const v=zr(i,o);hc(p,bl(p,v),d,function VC(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=Dm(c,o,d,i),bm(o,a)}return new ng(a,i,o)}class _y{constructor(o){this.queryList=o,this.matches=null}clone(){return new _y(this.queryList)}setDirty(){this.queryList.setDirty()}}class rg{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new rg(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==GI(o,a).matches&&this.queries[a].setDirty()}}class VI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class m0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new m0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Oi{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Oi(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,ig(a,p)),this.matchTNodeWithReadOption(o,a,ds(a,o,p,!1,!1))}else c===jh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ds(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ra||d===To||d===jh&&4&a.type)this.addMatch(a.index,-2);else{const p=ds(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ig(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function UI(i,o,a,c){return-1===a?function sg(i,o){return 11&i.type?sc(i,o):4&i.type?tg(i,o):null}(o,i):-2===a?function mi(i,o,a){return a===ra?sc(o,i):a===jh?tg(o,i):a===To?$h(o,i):void 0}(i,o,c):Na(i,i[1],a,o)}function BI(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=i.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const S=v[C];I.push(S<0?null:UI(o,p[S],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function wy(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=BI(i,o,d,a);for(let I=0;I<p.length;I+=2){const C=p[I];if(C>0)c.push(v[I/2]);else{const S=p[I+1],R=o[-C];for(let k=10;k<R.length;k++){const H=R[k];H[17]===H[3]&&wy(H[1],H,S,c)}if(null!==R[9]){const k=R[9];for(let H=0;H<k.length;H++){const Q=k[H];wy(Q[1],Q,S,c)}}}}}return c}function So(i){const o=be(),a=Lt(),c=Df();Ti(c+1);const d=GI(a,c);if(i.dirty&&function Rg(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?wy(a,o,c,[]):BI(a,o,d,c);i.reset(p,Qg),i.notifyOnChanges()}return!0}return!1}function og(i,o,a,c){const d=Lt();if(d.firstCreatePass){const p=xn();(function HI(i,o,a){null===i.queries&&(i.queries=new m0),i.queries.track(new Oi(o,a))})(d,new VI(o,a,c),p.index),function uT(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function $I(i,o,a){const c=new vy(4==(4&a));uE(i,o,c,c.destroy),null===o[19]&&(o[19]=new rg),o[19].queries.push(new _y(c))}(d,be(),a)}function y0(){return function aT(i,o){return i[19].queries[o].queryList}(be(),Df())}function GI(i,o){return i.queries.getByIndex(o)}function wr(...i){}const Pn=new gn("Application Initializer");let Ao=(()=>{class i{constructor(a){this.appInits=a,this.resolve=wr,this.reject=wr,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Gs(p))a.push(p);else if(d_(p)){const v=new Promise((I,C)=>{p.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Rn(Pn,8))},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const T0=new gn("AppId",{providedIn:"root",factory:function S0(){return`${A0()}${A0()}${A0()}`}});function A0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const x0=new gn("Platform Initializer"),Wt=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wn=new gn("appBootstrapListener");let M0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Kh=new gn("LocaleId",{providedIn:"root",factory:()=>oo(Kh,ot.Optional|ot.SkipSelf)||function eD(){return typeof $localize<"u"&&$localize.locale||nu}()}),tD=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ET=(()=>{class i{compileModuleSync(a){return new s0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=ys(Mt(a).declarations).reduce((v,I)=>{const C=ue(I);return C&&v.push(new Nl(C)),v},[]);return new wT(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ql=(()=>Promise.resolve(0))();function Wl(i){typeof Zone>"u"?ql.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Fi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Sy(){let i=cn.requestAnimationFrame,o=cn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function aD(i){const o=()=>{!function uu(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(cn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Mc(i),i.isCheckStableRunning=!0,Ay(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Mc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,v,I)=>{try{return R0(i),a.invokeTask(d,p,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),xy(i)}},onInvoke:(a,c,d,p,v,I,C)=>{try{return R0(i),a.invoke(d,p,v,I,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),xy(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Mc(i),Ay(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fi.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Fi.isInAngularZone())throw new De(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,oD,wr,wr);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const oD={};function Ay(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Mc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function R0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function xy(i){i._nesting--,Ay(i)}class My{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const Ry=new gn(""),Rc=new gn("");let Kl,Li=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kl||(function Py(i){Kl=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fi.assertNotInAngularZone(),Wl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wl(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Rn(Fi),Rn(Ny),Rn(Rc))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})(),Ny=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Kl?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),cu=null;const Oy=new gn("AllowMultipleToken"),Zl=new gn("PlatformDestroyListeners");class IT{constructor(o,a){this.name=o,this.token=a}}function xo(i,o,a=[]){const c=`Platform: ${o}`,d=new gn(c);return(p=[])=>{let v=N0();if(!v||v.injector.get(Oy,!1)){const I=[...a,...p,{provide:d,useValue:!0}];i?i(I):function es(i){if(cu&&!cu.get(Oy,!1))throw new De(400,!1);cu=i;const o=i.get(Vt);(function Zh(i){const o=i.get(x0,null);o&&o.forEach(a=>a())})(i)}(function Yh(i=[],o){return Qa.create({name:o,providers:[{provide:nc,useValue:"platform"},{provide:Zl,useValue:new Set([()=>cu=null])},...i]})}(I,c))}return function lD(i){const o=N0();if(!o)throw new De(401,!1);return o}()}}function N0(){return cu?.get(Vt)??null}let Vt=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function ky(i,o){let a;return a="noop"===i?new My:("zone.js"===i?void 0:i)||new Fi(o),a}(c?.ngZone,function dD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Fi,useValue:d}];return d.run(()=>{const v=Qa.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(Te,null);if(!C)throw new De(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{Yl(this._modules,I),S.unsubscribe()})}),function P0(i,o,a){try{const c=a();return Gs(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(Ao);return S.runInitializers(),S.donePromise.then(()=>(function cI(i){Jt(i,"Expected localeId to be defined"),"string"==typeof i&&(uI=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Kh,nu)||nu),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=O0({},c);return function uD(i,o,a){const c=new s0(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(hg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new De(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Zl,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Rn(Qa))},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function O0(i,o){return Array.isArray(o)?o.reduce(O0,i):{...i,...o}}let hg=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Fi.assertNotInAngularZone(),Wl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Fi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(p,v.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Qf;if(!this._injector.get(Ao).done)throw!d&&wt(a),new De(405,false);let v;v=d?a:this._injector.get(na).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function lu(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Do),S=v.create(Qa.NULL,[],c||v.selector,I),R=S.location.nativeElement,k=S.injector.get(Ry,null);return k?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),Yl(this.components,S),k?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Yl(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wn,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Yl(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new De(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Rn(Fi),Rn(Ji),Rn(Te))},i.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Yl(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let k0=!0,Ql=!1;function Jl(){return Ql=!0,k0}function fD(){if(Ql)throw new Error("Cannot enable prod mode after platform setup.");k0=!1}let pD=(()=>{class i{}return i.__NG_ELEMENT_ID__=gD,i})();function gD(i){return function fg(i,o,a){if(yu(i)&&!a){const c=$t(i.index,o);return new Rl(c,c)}return 47&i.type?new Rl(o[16],o):null}(xn(),be(),16==(16&i))}class ur{constructor(){}supports(o){return Ip(o)}create(o){return new wD(o)}}const en=(i,o)=>o;class wD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||en}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<B0(c,d,p)?a:c,I=B0(v,d,p),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const S=I-d,R=C-d;if(S!=R){for(let H=0;H<S;H++){const Q=H<p.length?p[H]:p[H]=0,Ie=Q+H;R<=Ie&&Ie<S&&(p[H]=Q+1)}p[v.previousIndex]=R-S}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ip(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,I),c=!0),a=a._next}else d=0,function Pb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Pl()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new ED(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new mg),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mg),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ED{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class U0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class mg{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new U0,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function B0(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class ID{constructor(){}supports(o){return o instanceof Map||xE(o)}create(){return new DD}}class DD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||xE(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new CD(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class CD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uy(){return new ed([new ur])}let ed=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Uy()),deps:[[i,new ao,new Ls]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new De(901,!1)}}return i.\u0275prov=yt({token:i,providedIn:"root",factory:Uy}),i})();function Xh(){return new ef([new ID])}let ef=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Xh()),deps:[[i,new ao,new Ls]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new De(901,!1)}}return i.\u0275prov=yt({token:i,providedIn:"root",factory:Xh}),i})();const SD=xo(null,"core",[]);let AD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Rn(hg))},i.\u0275mod=Hr({type:i}),i.\u0275inj=bn({}),i})();function AT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(dt,Se,F)=>{F.d(Se,{Z:()=>De});var g=F(2090),J=F(4859),O=F(6881),oe=F(1877);class se{constructor(ge,ye){this._delegate=ge,this.firebase=ye,(0,O._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,ye=O._DEFAULT_ENTRY_NAME){var ut;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(ge);return!gt.isInitialized()&&"EXPLICIT"===(null===(ut=gt.getComponent())||void 0===ut?void 0:ut.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:ye})}_removeServiceInstance(ge,ye=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(ye)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function pe(){const it=function _e(it){const ge={},ye={__esModule:!0,initializeApp:function Oe(Be,nt={}){const te=O.initializeApp(Be,nt);if((0,g.r3)(ge,te.name))return ge[te.name];const ne=new it(te,ye);return ge[te.name]=ne,ne},app:gt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function me(Be){const nt=Be.name,te=nt.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const ne=(X=gt())=>{if("function"!=typeof X[te])throw le.create("invalid-app-argument",{appName:nt});return X[te]()};void 0!==Be.serviceProps&&(0,g.ZB)(ne,Be.serviceProps),ye[te]=ne,it.prototype[te]=function(...X){return this._getService.bind(this,nt).apply(this,Be.multipleInstances?X:[])}}return"PUBLIC"===Be.type?ye[te]:null},removeApp:function ut(Be){delete ge[Be]},useAsService:function Ge(Be,nt){return"serverAuth"===nt?null:nt},modularAPIs:O}};function gt(Be){if(!(0,g.r3)(ge,Be=Be||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Be});return ge[Be]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function we(){return Object.keys(ge).map(Be=>ge[Be])}}),gt.App=it,ye}(se);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(ye){(0,g.ZB)(it,ye)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),it}(),$=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=j;!function xe(it){(0,O.registerVersion)("@firebase/app-compat","0.2.9",it)}()},6881:(dt,Se,F)=>{F.r(Se),F.d(Se,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Oo,_DEFAULT_ENTRY_NAME:()=>oi,_addComponent:()=>tt,_addOrOverwriteComponent:()=>ht,_apps:()=>Cn,_clearComponents:()=>$n,_components:()=>Kt,_getProvider:()=>Hi,_registerComponent:()=>cn,_removeServiceInstance:()=>$r,deleteApp:()=>Ei,getApp:()=>Zn,getApps:()=>lr,initializeApp:()=>Zt,onLog:()=>Gi,registerVersion:()=>dr,setLogLevel:()=>kn});var g=F(5861),J=F(4859),O=F(1877),oe=F(2090);let he,le;const j=new WeakMap,$=new WeakMap,q=new WeakMap,$e=new WeakMap,xe=new WeakMap;let ge={get(re,ee,Me){if(re instanceof IDBTransaction){if("done"===ee)return $.get(re);if("objectStoreNames"===ee)return re.objectStoreNames||q.get(re);if("store"===ee)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Oe(re[ee])},set:(re,ee,Me)=>(re[ee]=Me,!0),has:(re,ee)=>re instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in re};function gt(re){return"function"==typeof re?function ut(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...ee){return re.apply(we(this),ee),Oe(j.get(this))}:function(...ee){return Oe(re.apply(we(this),ee))}:function(ee,...Me){const Ne=re.call(we(this),ee,...Me);return q.set(Ne,ee.sort?ee.sort():[ee]),Oe(Ne)}}(re):(re instanceof IDBTransaction&&function it(re){if($.has(re))return;const ee=new Promise((Me,Ne)=>{const mt=()=>{re.removeEventListener("complete",Rt),re.removeEventListener("error",Yt),re.removeEventListener("abort",Yt)},Rt=()=>{Me(),mt()},Yt=()=>{Ne(re.error||new DOMException("AbortError","AbortError")),mt()};re.addEventListener("complete",Rt),re.addEventListener("error",Yt),re.addEventListener("abort",Yt)});$.set(re,ee)}(re),((re,ee)=>ee.some(Me=>re instanceof Me))(re,function _e(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,ge):re)}function Oe(re){if(re instanceof IDBRequest)return function De(re){const ee=new Promise((Me,Ne)=>{const mt=()=>{re.removeEventListener("success",Rt),re.removeEventListener("error",Yt)},Rt=()=>{Me(Oe(re.result)),mt()},Yt=()=>{Ne(re.error),mt()};re.addEventListener("success",Rt),re.addEventListener("error",Yt)});return ee.then(Me=>{Me instanceof IDBCursor&&j.set(Me,re)}).catch(()=>{}),xe.set(ee,re),ee}(re);if($e.has(re))return $e.get(re);const ee=gt(re);return ee!==re&&($e.set(re,ee),xe.set(ee,re)),ee}const we=re=>xe.get(re),Be=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],te=new Map;function ne(re,ee){if(!(re instanceof IDBDatabase)||ee in re||"string"!=typeof ee)return;if(te.get(ee))return te.get(ee);const Me=ee.replace(/FromIndex$/,""),Ne=ee!==Me,mt=nt.includes(Me);if(!(Me in(Ne?IDBIndex:IDBObjectStore).prototype)||!mt&&!Be.includes(Me))return;const Rt=function(){var Yt=(0,g.Z)(function*(Tn,...Ut){const fr=this.transaction(Tn,mt?"readwrite":"readonly");let ai=fr.store;return Ne&&(ai=ai.index(Ut.shift())),(yield Promise.all([ai[Me](...Ut),mt&&fr.done]))[0]});return function(Ut){return Yt.apply(this,arguments)}}();return te.set(ee,Rt),Rt}!function ye(re){ge=re(ge)}(re=>({...re,get:(ee,Me,Ne)=>ne(ee,Me)||re.get(ee,Me,Ne),has:(ee,Me)=>!!ne(ee,Me)||re.has(ee,Me)}));class X{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function fe(re){return"VERSION"===re.getComponent()?.type}(Me)){const Ne=Me.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(Me=>Me).join(" ")}}const ae="@firebase/app",Ve=new O.Yd("@firebase/app"),oi="[DEFAULT]",Kn={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Cn=new Map,Kt=new Map;function tt(re,ee){try{re.container.addComponent(ee)}catch(Me){Ve.debug(`Component ${ee.name} failed to register with FirebaseApp ${re.name}`,Me)}}function ht(re,ee){re.container.addOrOverwriteComponent(ee)}function cn(re){const ee=re.name;if(Kt.has(ee))return Ve.debug(`There were multiple attempts to register component ${ee}.`),!1;Kt.set(ee,re);for(const Me of Cn.values())tt(Me,re);return!0}function Hi(re,ee){const Me=re.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),re.container.getProvider(ee)}function $r(re,ee,Me=oi){Hi(re,ee).clearInstance(Me)}function $n(){Kt.clear()}const cr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sn{constructor(ee,Me,Ne){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const Oo="9.21.0";function Zt(re,ee={}){let Me=re;"object"!=typeof ee&&(ee={name:ee});const Ne=Object.assign({name:oi,automaticDataCollectionEnabled:!1},ee),mt=Ne.name;if("string"!=typeof mt||!mt)throw cr.create("bad-app-name",{appName:String(mt)});if(Me||(Me=(0,oe.aH)()),!Me)throw cr.create("no-options");const Rt=Cn.get(mt);if(Rt){if((0,oe.vZ)(Me,Rt.options)&&(0,oe.vZ)(Ne,Rt.config))return Rt;throw cr.create("duplicate-app",{appName:mt})}const Yt=new J.H0(mt);for(const Ut of Kt.values())Yt.addComponent(Ut);const Tn=new sn(Me,Ne,Yt);return Cn.set(mt,Tn),Tn}function Zn(re=oi){const ee=Cn.get(re);if(!ee&&re===oi)return Zt();if(!ee)throw cr.create("no-app",{appName:re});return ee}function lr(){return Array.from(Cn.values())}function Ei(re){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(re){const ee=re.name;Cn.has(ee)&&(Cn.delete(ee),yield Promise.all(re.container.getProviders().map(Me=>Me.delete())),re.isDeleted=!0)})).apply(this,arguments)}function dr(re,ee,Me){var Ne;let mt=null!==(Ne=Kn[re])&&void 0!==Ne?Ne:re;Me&&(mt+=`-${Me}`);const Rt=mt.match(/\s|\//),Yt=ee.match(/\s|\//);if(Rt||Yt){const Tn=[`Unable to register library "${mt}" with version "${ee}":`];return Rt&&Tn.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),Rt&&Yt&&Tn.push("and"),Yt&&Tn.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void Ve.warn(Tn.join(" "))}cn(new J.wA(`${mt}-version`,()=>({library:mt,version:ee}),"VERSION"))}function Gi(re,ee){if(null!==re&&"function"!=typeof re)throw cr.create("invalid-log-argument");(0,O.Am)(re,ee)}function kn(re){(0,O.Ub)(re)}const V="firebase-heartbeat-store";let L=null;function z(){return L||(L=function me(re,ee,{blocked:Me,upgrade:Ne,blocking:mt,terminated:Rt}={}){const Yt=indexedDB.open(re,ee),Tn=Oe(Yt);return Ne&&Yt.addEventListener("upgradeneeded",Ut=>{Ne(Oe(Yt.result),Ut.oldVersion,Ut.newVersion,Oe(Yt.transaction),Ut)}),Me&&Yt.addEventListener("blocked",Ut=>Me(Ut.oldVersion,Ut.newVersion,Ut)),Tn.then(Ut=>{Rt&&Ut.addEventListener("close",()=>Rt()),mt&&Ut.addEventListener("versionchange",fr=>mt(fr.oldVersion,fr.newVersion,fr))}).catch(()=>{}),Tn}("firebase-heartbeat-database",1,{upgrade:(re,ee)=>{0===ee&&re.createObjectStore(V)}}).catch(re=>{throw cr.create("idb-open",{originalErrorMessage:re.message})})),L}function Y(){return(Y=(0,g.Z)(function*(re){try{return(yield z()).transaction(V).objectStore(V).get(Mt(re))}catch(ee){if(ee instanceof oe.ZR)Ve.warn(ee.message);else{const Me=cr.create("idb-get",{originalErrorMessage:ee?.message});Ve.warn(Me.message)}}})).apply(this,arguments)}function He(re,ee){return wt.apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(re,ee){try{const Ne=(yield z()).transaction(V,"readwrite");return yield Ne.objectStore(V).put(ee,Mt(re)),Ne.done}catch(Me){if(Me instanceof oe.ZR)Ve.warn(Me.message);else{const Ne=cr.create("idb-set",{originalErrorMessage:Me?.message});Ve.warn(Ne.message)}}})).apply(this,arguments)}function Mt(re){return`${re.name}!${re.options.appId}`}class st{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new hr(Me),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var ee=this;return(0,g.Z)(function*(){const Ne=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=ct();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==mt&&!ee._heartbeatsCache.heartbeats.some(Rt=>Rt.date===mt))return ee._heartbeatsCache.heartbeats.push({date:mt,agent:Ne}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Rt=>{const Yt=new Date(Rt.date).valueOf();return Date.now()-Yt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,g.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Me=ct(),{heartbeatsToSend:Ne,unsentEntries:mt}=function ln(re,ee=1024){const Me=[];let Ne=re.slice();for(const mt of re){const Rt=Me.find(Yt=>Yt.agent===mt.agent);if(Rt){if(Rt.dates.push(mt.date),dn(Me)>ee){Rt.dates.pop();break}}else if(Me.push({agent:mt.agent,dates:[mt.date]}),dn(Me)>ee){Me.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ne}}(ee._heartbeatsCache.heartbeats),Rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ne}));return ee._heartbeatsCache.lastSentHeartbeatDate=Me,mt.length>0?(ee._heartbeatsCache.heartbeats=mt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Rt})()}}function ct(){return(new Date).toISOString().substring(0,10)}class hr{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,g.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function ue(re){return Y.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Me=this;return(0,g.Z)(function*(){var Ne;if(yield Me._canUseIndexedDBPromise){const Rt=yield Me.read();return He(Me.app,{lastSentHeartbeatDate:null!==(Ne=ee.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Rt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Me=this;return(0,g.Z)(function*(){var Ne;if(yield Me._canUseIndexedDBPromise){const Rt=yield Me.read();return He(Me.app,{lastSentHeartbeatDate:null!==(Ne=ee.lastSentHeartbeatDate)&&void 0!==Ne?Ne:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...ee.heartbeats]})}})()}}function dn(re){return(0,oe.L)(JSON.stringify({version:2,heartbeats:re})).length}!function Ii(re){cn(new J.wA("platform-logger",ee=>new X(ee),"PRIVATE")),cn(new J.wA("heartbeat",ee=>new st(ee),"PRIVATE")),dr(ae,"0.9.9",re),dr(ae,"0.9.9","esm2017"),dr("fire-js","")}("")},4859:(dt,Se,F)=>{F.d(Se,{H0:()=>_e,wA:()=>O});var g=F(5861),J=F(2090);class O{constructor(j,$,q){this.name=j,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class se{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const q=new J.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:$});$e&&q.resolve($e)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const q=this.normalizeInstanceIdentifier(j?.identifier),$e=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(xe){if($e)return null;throw xe}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier($);try{const xe=this.getOrInitializeService({instanceIdentifier:$e});q.resolve(xe)}catch{}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[xe,De]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(xe)&&De.resolve($e);return $e}onInit(j,$){var q;const $e=this.normalizeInstanceIdentifier($),xe=null!==(q=this.onInitCallbacks.get($e))&&void 0!==q?q:new Set;xe.add(j),this.onInitCallbacks.set($e,xe);const De=this.instances.get($e);return De&&j(De,$e),()=>{xe.delete(j)}}invokeOnInitCallbacks(j,$){const q=this.onInitCallbacks.get($);if(q)for(const $e of q)try{$e(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let q=this.instances.get(j);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=j,pe===oe?void 0:pe),options:$}),this.instances.set(j,q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,q)}catch{}var pe;return q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new se(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Se,F)=>{F.d(Se,{Am:()=>pe,Ub:()=>_e,Yd:()=>le,in:()=>J});const g=[];var J=(()=>{return(j=J||(J={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",J;var j})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},oe=J.INFO,se={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},he=(j,$,...q)=>{if($<j.logLevel)return;const $e=(new Date).toISOString(),xe=se[$];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[xe](`[${$e}]  ${j.name}:`,...q)};class le{constructor($){this.name=$,this._logLevel=oe,this._logHandler=he,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in J))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...$),this._logHandler(this,J.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...$),this._logHandler(this,J.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,J.INFO,...$),this._logHandler(this,J.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,J.WARN,...$),this._logHandler(this,J.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...$),this._logHandler(this,J.ERROR,...$)}}function _e(j){g.forEach($=>{$.setLogLevel(j)})}function pe(j,$){for(const q of g){let $e=null;$&&$.level&&($e=O[$.level]),q.userLogHandler=null===j?null:(xe,De,...it)=>{const ge=it.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");De>=($e??xe.logLevel)&&j({level:J[De].toLowerCase(),message:ge,args:it,type:xe.name})}}}},259:(dt,Se,F)=>{F.d(Se,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=F(6881);(0,g.registerVersion)("firebase","9.21.0","app")},9260:(dt,Se,F)=>{F.d(Se,{Z:()=>g.Z});var g=F(3942);g.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(dt,Se,F)=>{F.r(Se);var g=F(5861),J=F(3942),O=F(2090),oe=F(6881),se=F(655),he=F(1877),le=F(4859);const De=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},it=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new he.Yd("@firebase/auth");function Oe(y,...h){ut.logLevel<=he.in.ERROR&&ut.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function we(y,...h){throw nt(y,...h)}function me(y,...h){return nt(y,...h)}function Ge(y,h,f){const _=Object.assign(Object.assign({},it()),{[h]:f});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Be(y,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&we(y,"argument-error"),Ge(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...h){if("string"!=typeof y){const f=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(f,..._)}return ge.create(y,...h)}function te(y,h,...f){if(!y)throw nt(h,...f)}function ne(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Oe(h),new Error(h)}function X(y,h){y||ne(h)}function fe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ae(){return"http:"===We()||"https:"===We()}function We(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class qt{constructor(h,f){this.shortDelay=h,this.longDelay=f,X(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ve(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ae()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jt(y,h){X(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Ze{static initialize(h,f,_){this.fetchImpl=h,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bi=new qt(3e4,6e4);function Ct(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function yt(y,h,f,_){return On.apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(y,h,f,_,T={}){return bn(y,T,(0,g.Z)(function*(){let M={},U={};_&&("GET"===h?U=_:M={body:JSON.stringify(_)});const W=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Te=yield y._getAdditionalHeaders();return Te["Content-Type"]="application/json",y.languageCode&&(Te["X-Firebase-Locale"]=y.languageCode),Ze.fetch()(Ro(y,y.config.apiHost,f,W),Object.assign({method:h,headers:Te,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function bn(y,h,f){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,h,f){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},tr),h);try{const T=new ga(y),M=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw ji(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const W=M.ok?U.errorMessage:U.error.message,[Te,Ue]=W.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Te)throw ji(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Te)throw ji(y,"email-already-in-use",U);if("USER_DISABLED"===Te)throw ji(y,"user-disabled",U);const Je=_[Te]||Te.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw Ge(y,Je,Ue);we(y,Je)}}catch(T){if(T instanceof O.ZR)throw T;we(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function ii(y,h,f,_){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h,f,_,T={}){const M=yield yt(y,h,f,_,T);return"mfaPendingCredential"in M&&we(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ro(y,h,f,_){const T=`${h}${f}?${_}`;return y.config.emulator?Jt(y.config,T):`${y.config.apiScheme}://${T}`}class ga{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(me(this.auth,"network-request-failed")),Bi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ji(y,h,f){const _={appName:y.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const T=me(y,h,_);return T.customData._tokenResponse=f,T}function _i(){return(_i=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ma(y,h){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ot(y,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function wi(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function oi(){return(oi=(0,g.Z)(function*(y,h=!1){const f=(0,O.m9)(y),_=yield f.getIdToken(h),T=Cn(_);te(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,U=M?.sign_in_provider;return{claims:T,token:_,authTime:wi(Kn(T.auth_time)),issuedAtTime:wi(Kn(T.iat)),expirationTime:wi(Kn(T.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Kn(y){return 1e3*Number(y)}function Cn(y){const[h,f,_]=y.split(".");if(void 0===h||void 0===f||void 0===_)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(f);return T?JSON.parse(T):(Oe("Failed to decode base64 JWT payload"),null)}catch(T){return Oe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function tt(y,h){return ht.apply(this,arguments)}function ht(){return(ht=(0,g.Z)(function*(y,h,f=!1){if(f)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&cn(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function cn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hi{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class $r{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $n(y){return vt.apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(y){var h;const f=y.auth,_=yield y.getIdToken(),T=yield tt(y,ot(f,{idToken:_}));te(T?.users.length,f,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const U=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?Zt(M.providerUserInfo):[],W=Oo(y.providerData,U),Je=!!y.isAnonymous&&!(y.email&&M.passwordHash||W?.length),et={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:W,metadata:new $r(M.createdAt,M.lastLoginAt),isAnonymous:Je};Object.assign(y,et)})).apply(this,arguments)}function sn(){return(sn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield $n(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Oo(y,h){return[...y.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}function Zt(y){return y.map(h=>{var{providerId:f}=h,_=(0,se._T)(h,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function lr(){return(lr=(0,g.Z)(function*(y,h){const f=yield bn(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,U=Ro(y,T,"/v1/token",`key=${M}`),W=yield y._getAdditionalHeaders();return W["Content-Type"]="application/x-www-form-urlencoded",Ze.fetch()(U,{method:"POST",headers:W,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(typeof h.idToken<"u","internal-error"),te(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Kt(y){const h=Cn(y);return te(h,"internal-error"),te(typeof h.exp<"u","internal-error"),te(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var _=this;return(0,g.Z)(function*(){return te(!_.accessToken||_.refreshToken,h,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var _=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:U}=yield function Zn(y,h){return lr.apply(this,arguments)}(h,f);_.updateTokensAndExpiration(T,M,Number(U))})()}updateTokensAndExpiration(h,f,_){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,f){const{refreshToken:_,accessToken:T,expirationTime:M}=f,U=new Ei;return _&&(te("string"==typeof _,"internal-error",{appName:h}),U.refreshToken=_),T&&(te("string"==typeof T,"internal-error",{appName:h}),U.accessToken=T),M&&(te("number"==typeof M,"internal-error",{appName:h}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return ne("not implemented")}}function An(y,h){te("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class dr{constructor(h){var{uid:f,auth:_,stsTokenManager:T}=h,M=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new $r(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,g.Z)(function*(){const _=yield tt(f,f.stsTokenManager.getToken(f.auth,h));return te(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(h){return function Po(y){return oi.apply(this,arguments)}(this,h)}reload(){return function cr(y){return sn.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new dr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var _=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),f&&(yield $n(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const f=yield h.getIdToken();return yield tt(h,function $i(y,h){return _i.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var _,T,M,U,W,Te,Ue,Je;const et=null!==(_=f.displayName)&&void 0!==_?_:void 0,yn=null!==(T=f.email)&&void 0!==T?T:void 0,gs=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,ac=null!==(U=f.photoURL)&&void 0!==U?U:void 0,ep=null!==(W=f.tenantId)&&void 0!==W?W:void 0,tp=null!==(Te=f._redirectEventId)&&void 0!==Te?Te:void 0,uc=null!==(Ue=f.createdAt)&&void 0!==Ue?Ue:void 0,cc=null!==(Je=f.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:fo,emailVerified:np,isAnonymous:Ar,providerData:wl,stsTokenManager:rp}=f;te(fo&&rp,h,"internal-error");const Xt=Ei.fromJSON(this.name,rp);te("string"==typeof fo,h,"internal-error"),An(et,h.name),An(yn,h.name),te("boolean"==typeof np,h,"internal-error"),te("boolean"==typeof Ar,h,"internal-error"),An(gs,h.name),An(ac,h.name),An(ep,h.name),An(tp,h.name),An(uc,h.name),An(cc,h.name);const po=new dr({uid:fo,auth:h,email:yn,emailVerified:np,displayName:et,isAnonymous:Ar,photoURL:ac,phoneNumber:gs,tenantId:ep,stsTokenManager:Xt,createdAt:uc,lastLoginAt:cc});return wl&&Array.isArray(wl)&&(po.providerData=wl.map(El=>Object.assign({},El))),tp&&(po._redirectEventId=tp),po}static _fromIdTokenResponse(h,f,_=!1){return(0,g.Z)(function*(){const T=new Ei;T.updateFromServerResponse(f);const M=new dr({uid:f.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield $n(M),M})()}}const Gi=new Map;function kn(y){X(y instanceof Function,"Expected a class definition");let h=Gi.get(y);return h?(X(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Gi.set(y,h),h)}const Lr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,_){var T=this;return(0,g.Z)(function*(){T.storage[f]=_})()}_get(f){var _=this;return(0,g.Z)(function*(){const T=_.storage[f];return void 0===T?null:T})()}_remove(f){var _=this;return(0,g.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return y.type="NONE",y})();function V(y,h,f){return`firebase:${y}:${h}:${f}`}class L{constructor(h,f,_){this.persistence=h,this.auth=f,this.userKey=_;const{config:T,name:M}=this.auth;this.fullUserKey=V(this.userKey,T.apiKey,M),this.fullPersistenceKey=V("persistence",T.apiKey,M),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?dr._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,g.Z)(function*(){if(f.persistence===h)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,_="authUser"){return(0,g.Z)(function*(){if(!f.length)return new L(kn(Lr),h,_);const T=(yield Promise.all(f.map(function(){var Ue=(0,g.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let M=T[0]||kn(Lr);const U=V(_,h.config.apiKey,h.name);let W=null;for(const Ue of f)try{const Je=yield Ue._get(U);if(Je){const et=dr._fromJSON(h,Je);Ue!==M&&(W=et),M=Ue;break}}catch{}const Te=T.filter(Ue=>Ue._shouldAllowMigration);return M._shouldAllowMigration&&Te.length?(M=Te[0],W&&(yield M._set(U,W.toJSON())),yield Promise.all(f.map(function(){var Ue=(0,g.Z)(function*(Je){if(Je!==M)try{yield Je._remove(U)}catch{}});return function(Je){return Ue.apply(this,arguments)}}())),new L(M,h,_)):new L(M,h,_)})()}}function z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(wt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ue(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(nn(h))return"Blackberry";if(ke(h))return"Webos";if(Y(h))return"Safari";if((h.includes("chrome/")||He(h))&&!h.includes("edge/"))return"Chrome";if(Mt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ue(y=(0,O.z$)()){return/firefox\//i.test(y)}function Y(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function He(y=(0,O.z$)()){return/crios\//i.test(y)}function wt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Mt(y=(0,O.z$)()){return/android/i.test(y)}function nn(y=(0,O.z$)()){return/blackberry/i.test(y)}function ke(y=(0,O.z$)()){return/webos/i.test(y)}function st(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function dn(y=(0,O.z$)()){return st(y)||Mt(y)||ke(y)||nn(y)||/windows phone/i.test(y)||wt(y)}function re(y,h=[]){let f;switch(y){case"Browser":f=z((0,O.z$)());break;case"Worker":f=`${z((0,O.z$)())}-${y}`;break;default:f=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${oe.SDK_VERSION}/${_}`}function Me(){return(Me=(0,g.Z)(function*(y){return(yield yt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ne(y,h){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(y,h){return yt(y,"GET","/v2/recaptchaConfig",Ct(y,h))})).apply(this,arguments)}function Rt(y){return void 0!==y&&void 0!==y.getResponse}function Yt(y){return void 0!==y&&void 0!==y.enterprise}class Tn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(f=>"EMAIL_PASSWORD_PROVIDER"===f.provider&&"OFF"!==f.enforcementState)}}function fr(y){return new Promise((h,f)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=T=>{const M=me("internal-error");M.customData=T,f(M)},_.type="text/javascript",_.charset="UTF-8",function Ut(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function ai(y){return`__${y}${Math.floor(1e6*Math.random())}`}class hn{constructor(h){this.type="recaptcha-enterprise",this.auth=pn(h)}verify(h="verify",f=!1){var _=this;return(0,g.Z)(function*(){function M(){return M=(0,g.Z)(function*(W){if(!f){if(null==W.tenantId&&null!=W._agentRecaptchaConfig)return W._agentRecaptchaConfig.siteKey;if(null!=W.tenantId&&void 0!==W._tenantRecaptchaConfigs[W.tenantId])return W._tenantRecaptchaConfigs[W.tenantId].siteKey}return new Promise(function(){var Te=(0,g.Z)(function*(Ue,Je){Ne(W,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(et=>{if(void 0!==et.recaptchaKey){const yn=new Tn(et);return null==W.tenantId?W._agentRecaptchaConfig=yn:W._tenantRecaptchaConfigs[W.tenantId]=yn,Ue(yn.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(et=>{Je(et)})});return function(Ue,Je){return Te.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(W,Te,Ue){const Je=window.grecaptcha;Yt(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(W,{action:h}).then(et=>{Te(et)}).catch(()=>{Te("NO_RECAPTCHA")})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((W,Te)=>{(function T(W){return M.apply(this,arguments)})(_.auth).then(Ue=>{if(!f&&Yt(window.grecaptcha))U(Ue,W,Te);else{if(typeof window>"u")return void Te(new Error("RecaptchaVerifier is only supported in browser"));fr("https://www.google.com/recaptcha/enterprise.js?render="+Ue).then(()=>{U(Ue,W,Te)}).catch(Je=>{Te(Je)})}}).catch(Ue=>{Te(Ue)})})})()}}function zi(y,h,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(y,h,f,_=!1){const T=new hn(y);let M;try{M=yield T.verify(f)}catch{M=yield T.verify(f,!0)}const U=Object.assign({},h);return Object.assign(U,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class Ks{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const _=M=>new Promise((U,W)=>{try{U(h(M))}catch(Te){W(Te)}});_.onAbort=f,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,g.Z)(function*(){if(f.auth.currentUser===h)return;const _=[];try{for(const T of f.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const M of _)try{M()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Fc{constructor(h,f,_,T){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.beforeStateQueue=new Ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,f){var _=this;return f&&(this._popupRedirectResolver=kn(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,M;if(!_._deleted&&(_.persistenceManager=yield L.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUser(h){var f=this;return(0,g.Z)(function*(){var _;const T=yield f.assertedPersistence.getCurrentUser();let M=T,U=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const W=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Te=M?._redirectEventId,Ue=yield f.tryRedirectSignIn(h);(!W||W===Te)&&Ue?.user&&(M=Ue.user,U=!0)}if(!M)return f.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield f.beforeStateQueue.runMiddleware(M)}catch(W){M=T,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(W))}return M?f.reloadAndSetCurrentUserOrClear(M):f.directlySetCurrentUser(null)}return te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===M._redirectEventId?f.directlySetCurrentUser(M):f.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var f=this;return(0,g.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,g.Z)(function*(){try{yield $n(h)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Pt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&te(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(h,f=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&te(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(kn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,g.Z)(function*(){const f=yield Ne(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Tn(f);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new hn(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,f,_){return this.registerStateListener(this.authStateSubscription,h,f,_)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,_){return this.registerStateListener(this.idTokenSubscription,h,f,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var _=this;return(0,g.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(f);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const _=h&&kn(h)||f._popupRedirectResolver;te(_,f,"argument-error"),f.redirectPersistenceManager=yield L.create(f,[kn(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,g.Z)(function*(){var _,T;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===h?f._currentUser:(null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,g.Z)(function*(){if(h===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,_,T){if(this._deleted)return()=>{};const M="function"==typeof f?f:f.next.bind(f),U=this._isInitialized?Promise.resolve():this._initializationPromise;return te(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof f?h.addObserver(f,_,T):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=re(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var f;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const M=yield h._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var h=this;return(0,g.Z)(function*(){var f;const _=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function gt(y,...h){ut.logLevel<=he.in.WARN&&ut.warn(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function pn(y){return(0,O.m9)(y)}class As{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yn(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Fo(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class rs{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return ne("not implemented")}_getIdTokenResponse(h){return ne("not implemented")}_linkToIdToken(h,f){return ne("not implemented")}_getReauthenticationResolver(h){return ne("not implemented")}}function Di(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:resetPassword",Ct(y,h))})).apply(this,arguments)}function od(y,h){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ad(y,h){return pf.apply(this,arguments)}function pf(){return(pf=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:update",Ct(y,h))})).apply(this,arguments)}function En(y,h){return ud.apply(this,arguments)}function ud(){return(ud=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithPassword",Ct(y,h))})).apply(this,arguments)}function Vc(y,h){return cd.apply(this,arguments)}function cd(){return(cd=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:sendOobCode",Ct(y,h))})).apply(this,arguments)}function gf(y,h){return ld.apply(this,arguments)}function ld(){return(ld=(0,g.Z)(function*(y,h){return Vc(y,h)})).apply(this,arguments)}function vu(y,h){return mf.apply(this,arguments)}function mf(){return(mf=(0,g.Z)(function*(y,h){return Vc(y,h)})).apply(this,arguments)}function dd(y,h){return _u.apply(this,arguments)}function _u(){return(_u=(0,g.Z)(function*(y,h){return Vc(y,h)})).apply(this,arguments)}function xg(y,h){return hd.apply(this,arguments)}function hd(){return(hd=(0,g.Z)(function*(y,h){return Vc(y,h)})).apply(this,arguments)}function Uc(){return(Uc=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithEmailLink",Ct(y,h))})).apply(this,arguments)}function yf(){return(yf=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithEmailLink",Ct(y,h))})).apply(this,arguments)}class Bc extends rs{constructor(h,f,_,T=null){super("password",_),this._email=h,this._password=f,this._tenantId=T}static _fromEmailAndPassword(h,f){return new Bc(h,f,"password")}static _fromEmailAndCode(h,f,_=null){return new Bc(h,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,g.Z)(function*(){var _;switch(f.signInMethod){case"password":const T={returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield zi(h,T,"signInWithPassword");return En(h,M)}return En(h,T).catch(function(){var M=(0,g.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const W=yield zi(h,T,"signInWithPassword");return En(h,W)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function fd(y,h){return Uc.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:we(h,"internal-error")}})()}_linkToIdToken(h,f){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return od(h,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function pd(y,h){return yf.apply(this,arguments)}(h,{idToken:f,email:_._email,oobCode:_._password});default:we(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ci(y,h){return is.apply(this,arguments)}function is(){return(is=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithIdp",Ct(y,h))})).apply(this,arguments)}class ui extends rs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new ui(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):we("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=f,M=(0,se._T)(f,["providerId","signInMethod"]);if(!_||!T)return null;const U=new ui(_,T);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(h){return Ci(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,Ci(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ci(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,O.xO)(f)}return h}}function gd(y,h){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:sendVerificationCode",Ct(y,h))})).apply(this,arguments)}function wu(){return(wu=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,h))})).apply(this,arguments)}function $c(){return($c=(0,g.Z)(function*(y,h){const f=yield ii(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,h));if(f.temporaryProof)throw ji(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Eu={USER_NOT_FOUND:"user-not-found"};function nr(){return(nr=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithPhoneNumber",Ct(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Eu)})).apply(this,arguments)}class Cr extends rs{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new Cr({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new Cr({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function jc(y,h){return wu.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function _f(y,h){return $c.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function wf(y,h){return nr.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:_,verificationCode:T}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:M}=h;return _||f||T||M?new Cr({verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:M}):null}}class Du{constructor(h){var f,_,T,M,U,W;const Te=(0,O.zd)((0,O.pd)(h)),Ue=null!==(f=Te.apiKey)&&void 0!==f?f:null,Je=null!==(_=Te.oobCode)&&void 0!==_?_:null,et=function Mg(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Te.mode)&&void 0!==T?T:null);te(Ue&&Je&&et,"argument-error"),this.apiKey=Ue,this.operation=et,this.code=Je,this.continueUrl=null!==(M=Te.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Te.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(W=Te.tenantId)&&void 0!==W?W:null}static parseLink(h){const f=function Iu(y){const h=(0,O.zd)((0,O.pd)(y)).link,f=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||f||h||y}(h);try{return new Du(f)}catch{return null}}}let Fn=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,_){return Bc._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const T=Du.parseLink(_);return te(T,"argument-error"),Bc._fromEmailAndCode(f,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ss{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Cu extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ci extends Cu{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return te("providerId"in f&&"signInMethod"in f,"argument-error"),ui._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),ui._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ci.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ci.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:M,nonce:U,providerId:W}=h;if(!_&&!T&&!f&&!M||!W)return null;try{return new ci(W)._credential({idToken:f,accessToken:_,nonce:U,pendingToken:M})}catch{return null}}}let zr=(()=>{class y extends Cu{constructor(){super("facebook.com")}static credential(f){return ui._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Hc=(()=>{class y extends Cu{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return ui._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:T}=f;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),bu=(()=>{class y extends Cu{constructor(){super("github.com")}static credential(f){return ui._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class $t extends rs{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ci(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,Ci(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ci(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:M}=f;return _&&T&&M&&_===T?new $t(_,M):null}static _create(h,f){return new $t(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends ss{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return os.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return os.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=$t.fromJSON(h);return te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:_}=h;if(!f||!_)return null;try{return $t._create(_,f)}catch{return null}}}let md=(()=>{class y extends Cu{constructor(){super("twitter.com")}static credential(f,_){return ui._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=f;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function qr(y,h){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signUp",Ct(y,h))})).apply(this,arguments)}class gr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,_,T=!1){return(0,g.Z)(function*(){const M=yield dr._fromIdTokenResponse(h,_,T),U=St(_);return new gr({user:M,providerId:U,_tokenResponse:_,operationType:f})})()}static _forOperation(h,f,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=St(_);return new gr({user:h,providerId:T,_tokenResponse:_,operationType:f})})()}}function St(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function If(){return(If=(0,g.Z)(function*(y){var h;const f=pn(y);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new gr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield qr(f,{returnSecureToken:!0}),T=yield gr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class Uo extends O.ZR{constructor(h,f,_,T){var M;super(f.code,f.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,Uo.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,f,_,T){return new Uo(h,f,_,T)}}function yd(y,h,f,_){return("reauthenticate"===h?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Uo._fromErrorAndOperation(y,M,h,_):M})}function vd(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function bi(){return(bi=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y);yield Lt(!0,f,h);const{providerUserInfo:_}=yield ma(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),T=vd(_||[]);return f.providerData=f.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ea(y,h){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(y,h,f=!1){const _=yield tt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),f);return gr._forOperation(y,"link",_)})).apply(this,arguments)}function Lt(y,h,f){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,g.Z)(function*(y,h,f){yield $n(h);const T=!1===y?"provider-already-linked":"no-such-provider";te(vd(h.providerData).has(f)===y,h.auth,T)})).apply(this,arguments)}function zc(y,h){return xn.apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,h,f=!1){const{auth:_}=y,T="reauthenticate";try{const M=yield tt(y,yd(_,T,h,y),f);te(M.idToken,_,"internal-error");const U=Cn(M.idToken);te(U,_,"internal-error");const{sub:W}=U;return te(y.uid===W,_,"user-mismatch"),gr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&we(_,"user-mismatch"),M}})).apply(this,arguments)}function Tu(y,h){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,g.Z)(function*(y,h,f=!1){const _="signIn",T=yield yd(y,_,h),M=yield gr._fromIdTokenResponse(y,_,T);return f||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Wr(y,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(y,h){return Tu(pn(y),h)})).apply(this,arguments)}function qc(y,h){return Su.apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y);return yield Lt(!1,f,h.providerId),Ea(f,h)})).apply(this,arguments)}function _d(y,h){return wd.apply(this,arguments)}function wd(){return(wd=(0,g.Z)(function*(y,h){return zc((0,O.m9)(y),h)})).apply(this,arguments)}function Au(y,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,h){return ii(y,"POST","/v1/accounts:signInWithCustomToken",Ct(y,h))})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,h){const f=pn(y),_=yield Au(f,{token:h,returnSecureToken:!0}),T=yield gr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class as{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?li._fromServerResponse(h,f):"totpInfo"in f?Ed._fromServerResponse(h,f):we(h,"internal-error")}}class li extends as{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new li(f)}}class Ed extends as{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Ed(f)}}function Zs(y,h,f){var _;te((null===(_=f.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),te(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(te(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(te(f.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function xu(){return xu=(0,g.Z)(function*(y,h,f){var _;const T=pn(y),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const U=yield zi(T,M,"getOobCode",!0);f&&Zs(T,U,f),yield vu(T,U)}else f&&Zs(T,M,f),yield vu(T,M).catch(function(){var U=(0,g.Z)(function*(W){if("auth/missing-recaptcha-token"!==W.code)return Promise.reject(W);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Te=yield zi(T,M,"getOobCode",!0);f&&Zs(T,Te,f),yield vu(T,Te)}});return function(W){return U.apply(this,arguments)}}())}),xu.apply(this,arguments)}function Da(){return(Da=(0,g.Z)(function*(y,h,f){yield Di((0,O.m9)(y),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y,h){yield ad((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Mu(y,h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y),_=yield Di(f,{oobCode:h}),T=_.requestType;switch(te(T,f,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(_.mfaInfo,f,"internal-error");default:te(_.email,f,"internal-error")}let M=null;return _.mfaInfo&&(M=as._fromServerResponse(pn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function ba(){return(ba=(0,g.Z)(function*(y,h){const{data:f}=yield Mu((0,O.m9)(y),h);return f.email})).apply(this,arguments)}function Ta(){return Ta=(0,g.Z)(function*(y,h,f){var _;const T=pn(y),M={returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ue=yield zi(T,M,"signUpPassword");U=qr(T,Ue)}else U=qr(T,M).catch(function(){var Ue=(0,g.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const et=yield zi(T,M,"signUpPassword");return qr(T,et)}return Promise.reject(Je)});return function(Je){return Ue.apply(this,arguments)}}());const W=yield U.catch(Ue=>Promise.reject(Ue)),Te=yield gr._fromIdTokenResponse(T,"signIn",W);return yield T._updateCurrentUser(Te.user),Te}),Ta.apply(this,arguments)}function us(){return us=(0,g.Z)(function*(y,h,f){var _;const T=pn(y),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function U(W,Te){te(Te.handleCodeInApp,T,"argument-error"),Te&&Zs(T,W,Te)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const W=yield zi(T,M,"getOobCode",!0);U(W,f),yield dd(T,W)}else U(M,f),yield dd(T,M).catch(function(){var W=(0,g.Z)(function*(Te){if("auth/missing-recaptcha-token"!==Te.code)return Promise.reject(Te);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield zi(T,M,"getOobCode",!0);U(Ue,f),yield dd(T,Ue)}});return function(Te){return W.apply(this,arguments)}}())}),us.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),T=Fn.credentialWithLink(h,f||fe());return te(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Wr(_,T)})).apply(this,arguments)}function In(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:createAuthUri",Ct(y,h))})).apply(this,arguments)}function Ru(){return(Ru=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ae()?fe():"http://localhost"},{signinMethods:T}=yield In((0,O.m9)(y),_);return T||[]})).apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Zs(f.auth,T,h);const{email:M}=yield gf(f.auth,T);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};f&&Zs(_.auth,M,f);const{email:U}=yield xg(_.auth,M);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function $o(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h){return yt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(y,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const _=(0,O.m9)(y),M={idToken:yield _.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},U=yield tt(_,$o(_.auth,M));_.displayName=U.displayName||null,_.photoURL=U.photoUrl||null;const W=_.providerData.find(({providerId:Te})=>"password"===Te);W&&(W.displayName=_.displayName,W.photoURL=_.photoURL),yield _._updateTokensIfNecessary(U)})).apply(this,arguments)}function Qs(y,h,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(y,h,f){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(M.email=h),f&&(M.password=f);const U=yield tt(y,od(_,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class di{constructor(h,f,_={}){this.isNewUser=h,this.providerId=f,this.profile=_}}class Ou extends di{constructor(h,f,_,T){super(h,f,_),this.username=T}}class Ho extends di{constructor(h,f){super(h,"facebook.com",f)}}class bd extends Ou{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Pg extends di{constructor(h,f){super(h,"google.com",f)}}class Td extends Ou{constructor(h,f,_){super(h,"twitter.com",f,_)}}function Go(y){const{user:h,_tokenResponse:f}=y;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Cd(y){var h,f;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const U=null===(f=null===(h=Cn(y.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(U)return new di(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!_)return null;switch(_){case"facebook.com":return new Ho(M,T);case"github.com":return new bd(M,T);case"google.com":return new Pg(M,T);case"twitter.com":return new Td(M,T,y.screenName||null);case"custom":case"anonymous":return new di(M,null);default:return new di(M,_,T)}}(f)}class Ns{constructor(h,f,_){this.type=h,this.credential=f,this.auth=_}static _fromIdtoken(h,f){return new Ns("enroll",h,f)}static _fromMfaPendingCredential(h){return new Ns("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,_;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Ns._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Ns._fromIdtoken(h.multiFactorSession.idToken)}return null}}class xa{constructor(h,f,_){this.session=h,this.hints=f,this.signInResolver=_}static _fromError(h,f){const _=pn(h),T=f.customData._serverResponse,M=(T.mfaInfo||[]).map(W=>as._fromServerResponse(_,W));te(T.mfaPendingCredential,_,"internal-error");const U=Ns._fromMfaPendingCredential(T.mfaPendingCredential);return new xa(U,M,function(){var W=(0,g.Z)(function*(Te){const Ue=yield Te._process(_,U);delete T.mfaInfo,delete T.mfaPendingCredential;const Je=Object.assign(Object.assign({},T),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(f.operationType){case"signIn":const et=yield gr._fromIdTokenResponse(_,f.operationType,Je);return yield _._updateCurrentUser(et.user),et;case"reauthenticate":return te(f.user,_,"internal-error"),gr._forOperation(f.user,f.operationType,Je);default:we(_,"internal-error")}});return function(Te){return W.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,g.Z)(function*(){return f.signInResolver(h)})()}}function ku(y,h){return yt(y,"POST","/v2/accounts/mfaEnrollment:start",Ct(y,h))}class Ps{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>as._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Ps(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Ns._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var _=this;return(0,g.Z)(function*(){const T=h,M=yield _.getSession(),U=yield tt(_.user,T._process(_.user.auth,M,f));return yield _.user._updateTokensIfNecessary(U),_.user.reload()})()}unenroll(h){var f=this;return(0,g.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield f.user.getIdToken();try{const M=yield tt(f.user,function Xc(y,h){return yt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(y,h))}(f.user.auth,{idToken:T,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:U})=>U!==_),yield f.user._updateTokensIfNecessary(M),yield f.user.reload()}catch(M){throw M}})()}}const Xs=new WeakMap,Ra="__sak";class Fu{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Ra,"1"),this.storage.removeItem(Ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ds=(()=>{class y extends Fu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pd(){const y=(0,O.z$)();return Y(y)||st(y)}()&&function Ii(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),M=this.localCache[_];T!==M&&f(_,M,T)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((W,Te,Ue)=>{this.notifyListeners(W,Ue)});const T=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const W=this.storage.getItem(T);if(f.newValue!==W)null!==f.newValue?this.storage.setItem(T,f.newValue):this.storage.removeItem(T);else if(this.localCache[T]===f.newValue&&!_)return}const M=()=>{const W=this.storage.getItem(T);!_&&this.localCache[T]===W||this.notifyListeners(T,W)},U=this.storage.getItem(T);!function hr(){return(0,O.w1)()&&10===document.documentMode}()||U===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,_){this.localCache[f]=_;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var T=()=>super._set,M=this;return(0,g.Z)(function*(){yield T().call(M,f,_),M.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,T=this;return(0,g.Z)(function*(){const M=yield _().call(T,f);return T.localCache[f]=JSON.stringify(M),M})()}_remove(f){var _=()=>super._remove,T=this;return(0,g.Z)(function*(){yield _().call(T,f),delete T.localCache[f]})()}}return y.type="LOCAL",y})(),eo=(()=>{class y extends Fu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return y.type="SESSION",y})();let el=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(M=>M.isListeningto(f));if(_)return _;const T=new y(f);return this.receivers.push(T),T}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,g.Z)(function*(){const T=f,{eventId:M,eventType:U,data:W}=T.data,Te=_.handlersMap[U];if(!Te?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const Ue=Array.from(Te).map(function(){var et=(0,g.Z)(function*(yn){return yn(T.origin,W)});return function(yn){return et.apply(this,arguments)}}()),Je=yield function Tf(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return h.apply(this,arguments)}}()))}(Ue);T.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:Je})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Os(y="",h=10){let f="";for(let _=0;_<h;_++)f+=Math.floor(10*Math.random());return y+f}class Sf{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,_=50){var T=this;return(0,g.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,W;return new Promise((Te,Ue)=>{const Je=Os("",20);M.port1.start();const et=setTimeout(()=>{Ue(new Error("unsupported_event"))},_);W={messageChannel:M,onMessage(yn){const gs=yn;if(gs.data.eventId===Je)switch(gs.data.status){case"ack":clearTimeout(et),U=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Te(gs.data.response);break;default:clearTimeout(et),clearTimeout(U),Ue(new Error("invalid_response"))}}},T.handlers.add(W),M.port1.addEventListener("message",W.onMessage),T.target.postMessage({eventType:h,eventId:Je,data:f},[M.port2])}).finally(()=>{W&&T.removeMessageHandler(W)})})()}}function Qt(){return window}function nl(){return typeof Qt().WorkerGlobalScope<"u"&&"function"==typeof Qt().importScripts}function Wo(){return(Wo=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ko="firebaseLocalStorageDb",Pa="firebaseLocalStorage",no="fbase_key";class rl{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function il(y,h){return y.transaction([Pa],h?"readwrite":"readonly").objectStore(Pa)}function kd(){const y=indexedDB.open(Ko,1);return new Promise((h,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Pa,{keyPath:no})}catch(T){f(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Pa)?h(_):(_.close(),yield function gn(){const y=indexedDB.deleteDatabase(Ko);return new rl(y).toPromise()}(),h(yield kd()))}))})}function Fd(y,h,f){return Af.apply(this,arguments)}function Af(){return(Af=(0,g.Z)(function*(y,h,f){const _=il(y,!0).put({[no]:h,value:f});return new rl(_).toPromise()})).apply(this,arguments)}function Mf(){return(Mf=(0,g.Z)(function*(y,h){const f=il(y,!1).get(h),_=yield new rl(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Og(y,h){const f=il(y,!0).delete(h);return new rl(f).toPromise()}const Oa=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield kd()),f.db})()}_withRetries(f){var _=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const M=yield _._openDb();return yield f(M)}catch(M){if(T++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return nl()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=el._getInstance(function Mn(){return nl()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(T,M){return{keyProcessed:(yield f._poll()).includes(M.key)}});return function(T,M){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var _,T;if(f.activeServiceWorker=yield function Vu(){return Wo.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Sf(f.activeServiceWorker);const M=yield f.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function to(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield kd();return yield Fd(f,Ra,"1"),yield Og(f,Ra),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(M=>Fd(M,f,_)),T.localCache[f]=_,T.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,g.Z)(function*(){const T=yield _._withRetries(M=>function xf(y,h){return Mf.apply(this,arguments)}(M,f));return _.localCache[f]=T,T})()}_remove(f){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(T=>Og(T,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const _=yield f._withRetries(U=>{const W=il(U,!1).getAll();return new rl(W).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:U,value:W}of _)M.add(U),JSON.stringify(f.localCache[U])!==JSON.stringify(W)&&(f.notifyListeners(U,W),T.push(U));for(const U of Object.keys(f.localCache))f.localCache[U]&&!M.has(U)&&(f.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(f,_){this.localCache[f]=_;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Hn(y,h){return yt(y,"POST","/v2/accounts/mfaSignIn:start",Ct(y,h))}const Qn=1e12;class Ki{constructor(h){this.auth=h,this.counter=Qn,this._widgets=new Map}render(h,f){const _=this.counter;return this._widgets.set(_,new ka(h,this.auth.name,f||{})),this.counter++,_}reset(h){var f;const _=h||Qn;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Qn))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,g.Z)(function*(){var _;return null===(_=f._widgets.get(h||Qn))||void 0===_||_.execute(),""})()}}class ka{constructor(h,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:f}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bu(y){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zi=ai("rcb"),ro=new qt(3e4,6e4);class At{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Qt().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return te(function Vd(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Rt(Qt().grecaptcha)?Promise.resolve(Qt().grecaptcha):new Promise((_,T)=>{const M=Qt().setTimeout(()=>{T(me(h,"network-request-failed"))},ro.get());Qt()[Zi]=()=>{Qt().clearTimeout(M),delete Qt()[Zi];const W=Qt().grecaptcha;if(!W||!Rt(W))return void T(me(h,"internal-error"));const Te=W.render;W.render=(Ue,Je)=>{const et=Te(Ue,Je);return this.counter++,et},this.hostLanguage=f,_(W)},fr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Zi,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(M),T(me(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Qt().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kg{load(h){return(0,g.Z)(function*(){return new Ki(h)})()}clearedOneInstance(){}}const Zo="recaptcha",Ur={theme:"light",type:"image"};class Fa{constructor(h,f=Object.assign({},Ur),_){this.parameters=f,this.type=Zo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(_),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kg:new At,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(f)||new Promise(M=>{const U=W=>{!W||(h.tokenChangeListeners.delete(U),M(W))};h.tokenChangeListeners.add(U),h.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof h)h(f);else if("string"==typeof h){const _=Qt()[h];"function"==typeof _&&_(f)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){te(ae()&&!nl(),h.auth,"internal-error"),yield function io(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function ee(y){return Me.apply(this,arguments)}(h.auth);te(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yi{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=Cr._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function La(){return(La=(0,g.Z)(function*(y,h,f){const _=pn(y),T=yield so(_,h,(0,O.m9)(f));return new Yi(T,M=>Wr(_,M))})).apply(this,arguments)}function Va(){return(Va=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);yield Lt(!1,_,"phone");const T=yield so(_.auth,h,(0,O.m9)(f));return new Yi(T,M=>qc(_,M))})).apply(this,arguments)}function ju(){return(ju=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),T=yield so(_.auth,h,(0,O.m9)(f));return new Yi(T,M=>_d(_,M))})).apply(this,arguments)}function so(y,h,f){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,h,f){var _;const T=yield f.verify();try{let M;if(te("string"==typeof T,y,"argument-error"),te(f.type===Zo,y,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const U=M.session;if("phoneNumber"in M)return te("enroll"===U.type,y,"internal-error"),(yield ku(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===U.type,y,"internal-error");const W=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return te(W,y,"missing-multi-factor-info"),(yield Hn(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:W,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield gd(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return U}}finally{f._reset()}})).apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(y,h){yield Ea((0,O.m9)(y),h)})).apply(this,arguments)}let mn=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=pn(f)}verifyPhoneNumber(f,_){return so(this.auth,f,(0,O.m9)(_))}static credential(f,_){return Cr._fromVerification(f,_)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:T}=f;return _&&T?Cr._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function yr(y,h){return h?kn(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Tr extends rs{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ci(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ci(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ci(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Nf(y){return Tu(y.auth,new Tr(y),y.bypassAuthState)}function al(y){const{auth:h,user:f}=y;return te(f,h,"internal-error"),zc(f,new Tr(y),y.bypassAuthState)}function Ba(y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y){const{auth:h,user:f}=y;return te(f,h,"internal-error"),Ea(f,new Tr(y),y.bypassAuthState)})).apply(this,arguments)}class ks{constructor(h,f,_,T,M=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,g.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(_,T){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:M,tenantId:U,error:W,type:Te}=h;if(W)return void f.reject(W);const Ue={auth:f.auth,requestUri:_,sessionId:T,tenantId:U||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Te)(Ue))}catch(Je){f.reject(Je)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Nf;case"linkViaPopup":case"linkViaRedirect":return Ba;case"reauthViaPopup":case"reauthViaRedirect":return al;default:we(this.auth,"internal-error")}}resolve(h){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vr=new qt(2e3,1e4);function Rn(){return(Rn=(0,g.Z)(function*(y,h,f){const _=pn(y);Be(y,h,ss);const T=yr(_,f);return new Hu(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Be(_.auth,h,ss);const T=yr(_.auth,f);return new Hu(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Be(_.auth,h,ss);const T=yr(_.auth,f);return new Hu(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Hu=(()=>{class y extends ks{constructor(f,_,T,M,U){super(f,_,M,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const _=yield f.execute();return te(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,g.Z)(function*(){X(1===f.filter.length,"Popup operations only handle one event");const _=Os();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(me(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,vr.get())};f()}}return y.currentPopupAction=null,y})();const zu=new Map;class ll extends ks{constructor(h,f,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,g.Z)(function*(){let _=zu.get(f.auth._key());if(!_){try{const M=(yield function Ls(y,h){return ja.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;_=()=>Promise.resolve(M)}catch(T){_=()=>Promise.reject(T)}zu.set(f.auth._key(),_)}return f.bypassAuthState||zu.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,f().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ja(){return(ja=(0,g.Z)(function*(y,h){const f=Qo(h),_=$a(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(f));return yield _._remove(f),T})).apply(this,arguments)}function ao(y,h){return qu.apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(y,h){return $a(y)._set(Qo(h),"true")})).apply(this,arguments)}function Vs(y,h){zu.set(y._key(),h)}function $a(y){return kn(y._redirectPersistence)}function Qo(y){return V("pendingRedirect",y.config.apiKey,y.name)}function hs(){return(hs=(0,g.Z)(function*(y,h,f){const _=pn(y);Be(y,h,ss),yield _._initializationPromise;const T=yr(_,f);return yield ao(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function fs(){return(fs=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Be(_.auth,h,ss),yield _.auth._initializationPromise;const T=yr(_.auth,f);yield ao(T,_.auth);const M=yield Ga(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Pf(){return(Pf=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Be(_.auth,h,ss),yield _.auth._initializationPromise;const T=yr(_.auth,f);yield Lt(!1,_,h.providerId),yield ao(T,_.auth);const M=yield Ga(_);return T._openRedirect(_.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function Wu(){return(Wu=(0,g.Z)(function*(y,h){return yield pn(y)._initializationPromise,Xo(y,h,!1)})).apply(this,arguments)}function Xo(y,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,h,f=!1){const _=pn(y),T=yr(_,h),U=yield new ll(_,T,f).execute();return U&&!f&&(delete U.user._redirectEventId,yield _._persistUserIfCurrent(U.user),yield _._setRedirectUser(null,h)),U})).apply(this,arguments)}function Ga(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(y){const h=Os(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class $d{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(f=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Yu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hd(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var _;if(h.error&&!Hd(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(me(this.auth,T))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const _=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zu(h))}saveEventToCache(h){this.cachedEventUids.add(Zu(h)),this.lastProcessedEventTime=Date.now()}}function Zu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Hd({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Fg(y){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,g.Z)(function*(y,h={}){return yt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const zd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hl=/^https?/;function Us(){return(Us=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Fg(y);for(const f of h)try{if(qd(f))return}catch{}we(y,"unauthorized-domain")})).apply(this,arguments)}function qd(y){const h=fe(),{protocol:f,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===_?"chrome-extension:"===f&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&U.hostname===_}if(!hl.test(f))return!1;if(zd.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Lg=new qt(3e4,6e4);function lo(){const y=Qt().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let Bs=null;function Jr(y){return Bs=Bs||function Qr(y){return new Promise((h,f)=>{var _,T,M;function U(){lo(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{lo(),f(me(y,"network-request-failed"))},timeout:Lg.get()})}if(null!==(T=null===(_=Qt().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(M=Qt().gapi)||void 0===M||!M.load){const W=ai("iframefcb");return Qt()[W]=()=>{gapi.load?U():f(me(y,"network-request-failed"))},fr(`https://apis.google.com/js/api.js?onload=${W}`).catch(Te=>f(Te))}U()}}).catch(h=>{throw Bs=null,h})}(y),Bs}const za=new qt(5e3,15e3),gl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ml(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const f=h.emulator?Jt(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Wd.get(y.config.apiHost);T&&(_.eid=T);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${f}?${(0,O.xO)(_).slice(1)}`}function D(){return D=(0,g.Z)(function*(y){const h=yield Jr(y),f=Qt().gapi;return te(f,y,"internal-error"),h.open({where:document.body,url:ml(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gl,dontclear:!0},_=>new Promise(function(){var T=(0,g.Z)(function*(M,U){yield _.restyle({setHideOnLeave:!1});const W=me(y,"network-request-failed"),Te=Qt().setTimeout(()=>{U(W)},za.get());function Ue(){Qt().clearTimeout(Te),M(_)}_.ping(Ue).then(Ue,()=>{U(W)})});return function(M,U){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const hi=encodeURIComponent("fac");function Ln(y,h,f,_,T,M){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y,h,f,_,T,M){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:_,v:oe.SDK_VERSION,eventId:T};if(h instanceof ss){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Je,et]of Object.entries(M||{}))U[Je]=et}if(h instanceof Cu){const Je=h.getScopes().filter(et=>""!==et);Je.length>0&&(U.scopes=Je.join(","))}y.tenantId&&(U.tid=y.tenantId);const W=U;for(const Je of Object.keys(W))void 0===W[Je]&&delete W[Je];const Te=yield y._getAppCheckToken(),Ue=Te?`#${hi}=${encodeURIComponent(Te)}`:"";return`${Mi(y)}?${(0,O.xO)(W).slice(1)}${Ue}`})).apply(this,arguments)}function Mi({config:y}){return y.emulator?Jt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Ri="webStorageSupport";class Vg extends class Qu{constructor(h){this.factorId=h}_process(h,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,_);case"signin":return this._finalizeSignIn(h,f.credential);default:return ne("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Vg(h)}_finalizeEnroll(h,f,_){return function ls(y,h){return yt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(y,h))}(h,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function fn(y,h){return yt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ct(y,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let IC=(()=>{class y{constructor(){}static assertion(f){return Vg._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var lv="@firebase/auth";class Ff{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ta(){return window}function Zd(){return(Zd=(0,g.Z)(function*(y,h,f){var _;const{BuildInfo:T}=ta();X(h.sessionId,"AuthEvent did not contain a session ID");const M=yield pv(h.sessionId),U={};return st()?U.ibi=T.packageName:Mt()?U.apn=T.packageName:we(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=M,Ln(y,f,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,U)})).apply(this,arguments)}function Vf(){return(Vf=(0,g.Z)(function*(y){const{BuildInfo:h}=ta(),f={};st()?f.iosBundleId=h.packageName:Mt()?f.androidPackageName=h.packageName:we(y,"operation-not-supported-in-this-environment"),yield Fg(y,f)})).apply(this,arguments)}function Uf(){return(Uf=(0,g.Z)(function*(y,h,f){const{cordova:_}=ta();let T=()=>{};try{yield new Promise((M,U)=>{let W=null;function Te(){var et;M();const yn=null===(et=_.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof yn&&yn(),"function"==typeof f?.close&&f.close()}function Ue(){W||(W=window.setTimeout(()=>{U(me(y,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===document?.visibilityState&&Ue()}h.addPassiveListener(Te),document.addEventListener("resume",Ue,!1),Mt()&&document.addEventListener("visibilitychange",Je,!1),T=()=>{h.removePassiveListener(Te),document.removeEventListener("resume",Ue,!1),document.removeEventListener("visibilitychange",Je,!1),W&&window.clearTimeout(W)}})}finally{T()}})).apply(this,arguments)}function pv(y){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,g.Z)(function*(y){const h=gv(y),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gv(y){if(X(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),f=new Uint8Array(h);for(let _=0;_<y.length;_++)f[_]=y.charCodeAt(_);return f}(0,O.Pz)("authIdTokenMaxAge"),function pw(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:f})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),M=h.getProvider("app-check-internal"),{apiKey:U,authDomain:W}=_.options;te(U&&!U.includes(":"),"invalid-api-key",{appName:_.name}),te(!W?.includes(":"),"argument-error",{appName:_.name});const Te={apiKey:U,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:re(y)},Ue=new Fc(_,T,M,Te);return function pr(y,h){const f=h?.persistence||[],_=(Array.isArray(f)?f:[f]).map(kn);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(Ue,f),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,_)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const f=pn(h.getProvider("auth").getImmediate());return new Ff(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(lv,"0.23.1",function dv(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(lv,"0.23.1","esm2017")}("Browser");class jf extends $d{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Hg(y){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,g.Z)(function*(y){const h=yield vl()._get(Gf(y));return h&&(yield vl()._remove(Gf(y))),h})).apply(this,arguments)}function Hf(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function vl(){return kn(ds)}function Gf(y){return V("authEvent",y.config.apiKey,y.name)}function tc(y){if(!y?.includes("?"))return{};const[h,...f]=y.split("?");return(0,O.zd)(f.join("?"))}function nc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Ji(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function _l(y=(0,O.z$)()){return!("file:"!==Ji()&&"ionic:"!==Ji()&&"capacitor:"!==Ji()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kf(){try{const y=self.localStorage,h=Os();if(y)return y.setItem(h,"1"),y.removeItem(h),!function rc(y=(0,O.z$)()){return function Wf(){return(0,O.w1)()&&11===document?.documentMode}()||function Kg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Zf()&&(0,O.hl)()}return!1}function Zf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zg(){return(function Wg(){return"http:"===Ji()||"https:"===Ji()}()||(0,O.ru)()||_l())&&!function yv(){return(0,O.b$)()||(0,O.UG)()}()&&Kf()&&!Zf()}function eh(){return _l()&&typeof document<"u"}function th(){return(th=(0,g.Z)(function*(){return!!eh()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ir={LOCAL:"local",NONE:"none",SESSION:"session"},ic=te,Yg="persistence";function na(y){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,g.Z)(function*(y){yield y._initializationPromise;const h=ra(),f=V(Yg,y.config.apiKey,y.name);h&&h.setItem(f,y._getPersistence())})).apply(this,arguments)}function ra(){var y;try{return(null===(y=function Qf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Qg=te;class qa{constructor(){this.browserResolver=kn(class Xr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eo,this._completeRedirectFn=Xo,this._overrideRedirectResult=Vs}_openPopup(h,f,_,T){var M=this;return(0,g.Z)(function*(){var U;X(null===(U=M.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const W=yield Ln(h,f,_,fe(),T);return function je(y,h,f,_=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-_)/2,0).toString();let W="";const Te=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:M,left:U}),Ue=(0,O.z$)().toLowerCase();f&&(W=He(Ue)?"_blank":f),ue(Ue)&&(h=h||"http://localhost",Te.scrollbars="yes");const Je=Object.entries(Te).reduce((yn,[gs,ac])=>`${yn}${gs}=${ac},`,"");if(function ln(y=(0,O.z$)()){var h;return st(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ue)&&"_self"!==W)return function Xe(y,h){const f=document.createElement("a");f.href=y,f.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(h||"",W),new ze(null);const et=window.open(h||"",W,Je);te(et,y,"popup-blocked");try{et.focus()}catch{}return new ze(et)}(h,W,Os())})()}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M._originValidation(h),function tl(y){Qt().location.href=y}(yield Ln(h,f,_,fe(),T)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:T,promise:M}=this.eventManagers[f];return T?Promise.resolve(T):(X(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(h);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(h){var f=this;return(0,g.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(h),T=new $d(h);return _.register("authEvent",M=>(te(M?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:T},f.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Ri,{type:Ri},T=>{var M;const U=null===(M=T?.[0])||void 0===M?void 0:M[Ri];void 0!==U&&f(!!U),we(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function co(y){return Us.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return dn()||Y()||st()}}),this.cordovaResolver=kn(class ho{constructor(){this._redirectPersistence=eo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xo,this._overrideRedirectResult=Vs}_initialize(h){var f=this;return(0,g.Z)(function*(){const _=h._key();let T=f.eventManagers.get(_);return T||(T=new jf(h),f.eventManagers.set(_,T),f.attachCallbackListeners(h,T)),T})()}_openPopup(h){we(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){!function jg(y){var h,f,_,T,M,U,W,Te,Ue,Je;const et=ta();te("function"==typeof(null===(h=et?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof(null===(f=et?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(M=null===(T=null===(_=et?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Te=null===(W=null===(U=et?.cordova)||void 0===U?void 0:U.plugins)||void 0===W?void 0:W.browsertab)||void 0===Te?void 0:Te.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Je=null===(Ue=et?.cordova)||void 0===Ue?void 0:Ue.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield M._initialize(h);yield U.initialized(),U.resetRedirect(),function Bd(){zu.clear()}(),yield M._originValidation(h);const W=function $f(y,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:Hf(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(h,_,T);yield function $g(y,h){return vl()._set(Gf(y),h)}(h,W);const Te=yield function fv(y,h,f){return Zd.apply(this,arguments)}(h,W,f),Ue=yield function gw(y){const{cordova:h}=ta();return new Promise(f=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function ct(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(T)})})}(Te);return function mw(y,h,f){return Uf.apply(this,arguments)}(h,U,Ue)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Bg(y){return Vf.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:_,handleOpenURL:T,BuildInfo:M}=ta(),U=setTimeout((0,g.Z)(function*(){yield Hg(h),f.onEvent(nc())}),500),W=function(){var Je=(0,g.Z)(function*(et){clearTimeout(U);const yn=yield Hg(h);let gs=null;yn&&et?.url&&(gs=function Gg(y,h){var f,_;const T=function zf(y){const h=tc(y),f=h.link?decodeURIComponent(h.link):void 0,_=tc(f).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return tc(T).link||T||_||f||y}(h);if(T.includes("/__/auth/callback")){const M=tc(T),U=M.firebaseError?function zg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,W=null===(_=null===(f=U?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Te=W?me(W):null;return Te?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Te,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(yn,et.url)),f.onEvent(gs||nc())});return function(yn){return Je.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,W);const Te=T,Ue=`${M.packageName.toLowerCase()}://`;ta().handleOpenURL=function(){var Je=(0,g.Z)(function*(et){if(et.toLowerCase().startsWith(Ue)&&W({url:et}),"function"==typeof Te)try{Te(et)}catch(yn){console.error(yn)}});return function(et){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=eo,this._completeRedirectFn=Xo,this._overrideRedirectResult=Vs}_initialize(h){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,f,_,T)})()}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,f,_,T)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return eh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const f=yield function Yf(){return th.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function nh(y){return y.unwrap()}function Jg(y){return rh(y)}function rh(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return mn.credentialFromResult(y);const f=h.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=Hc;break;case"facebook.com":_=zr;break;case"github.com":_=bu;break;case"twitter.com":_=md;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:W,nonce:Te}=h;return M||U||T||W?W?f.startsWith("saml.")?$t._create(f,W):ui._fromParams({providerId:f,signInMethod:f,pendingToken:W,idToken:T,accessToken:M}):new ci(f).credential({idToken:T,accessToken:M,rawNonce:Te}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ei(y,h){return h.catch(f=>{throw f instanceof O.ZR&&function wv(y,h){var f;const _=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new yw(y,function Rd(y,h){var f;const _=(0,O.m9)(y),T=h;return te(h.customData.operationType,_,"argument-error"),te(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),xa._fromError(_,T)}(y,h));else if(_){const T=rh(h),M=h;T&&(M.credential=T,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:Jg(f),additionalUserInfo:Go(f),user:js.getOrCreate(T)}})}function oc(y,h){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,g.Z)(function*(y,h){const f=yield h;return{verificationId:f.verificationId,confirm:_=>ei(y,f.confirm(_))}})).apply(this,arguments)}class yw{constructor(h,f){this.resolver=f,this.auth=function _v(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ei(nh(this.auth),this.resolver.resolveSignIn(h))}}class js{constructor(h){this._delegate=h,this.multiFactor=function qo(y){const h=(0,O.m9)(y);return Xs.has(h)||Xs.set(h,Ps._fromUser(h)),Xs.get(h)}(h)}static getOrCreate(h){return js.USER_MAP.has(h)||js.USER_MAP.set(h,new js(h)),js.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,g.Z)(function*(){return ei(f.auth,qc(f._delegate,h))})()}linkWithPhoneNumber(h,f){var _=this;return(0,g.Z)(function*(){return oc(_.auth,function Ud(y,h,f){return Va.apply(this,arguments)}(_._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,g.Z)(function*(){return ei(f.auth,function cl(y,h,f){return Fs.apply(this,arguments)}(f._delegate,h,qa))})()}linkWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield na(pn(f.auth)),function dl(y,h,f){return function cv(y,h,f){return Pf.apply(this,arguments)}(y,h,f)}(f._delegate,h,qa)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,g.Z)(function*(){return ei(f.auth,_d(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return oc(this.auth,function sl(y,h,f){return ju.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return ei(this.auth,function ul(y,h,f){return oo.apply(this,arguments)}(this._delegate,h,qa))}reauthenticateWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield na(pn(f.auth)),function Jo(y,h,f){return function Sr(y,h,f){return fs.apply(this,arguments)}(y,h,f)}(f._delegate,h,qa)})()}sendEmailVerification(h){return function Qc(y,h){return xs.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,g.Z)(function*(){return yield function wa(y,h){return bi.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Pu(y,h){return Qs((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Si(y,h){return Qs((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Yr(y,h){return ol.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Nu(y,h){return Ms.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function jo(y,h,f){return cs.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}js.USER_MAP=new WeakMap;const ih=te;let Ev=(()=>{class y{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=f.options;ih(T,"invalid-api-key",{appName:f.name}),ih(T,"invalid-api-key",{appName:f.name});const M=typeof window<"u"?qa:void 0;this._delegate=_.initialize({options:{persistence:vw(T,f.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function sd(y,h,f){const _=pn(y);te(_._canInitEmulator,_,"emulator-config-failed"),te(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!f?.disableWarnings,M=Yn(h),{host:U,port:W}=function Vr(y){const h=Yn(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const M=T[1];return{host:M,port:Fo(_.substr(M.length+1))}}{const[M,U]=_.split(":");return{host:M,port:Fo(U)}}}(h);_.config.emulator={url:`${M}//${U}${null===W?"":`:${W}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:U,port:W,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function yu(){function y(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,_)}applyActionCode(f){return function Df(y,h){return Ti.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Mu(this._delegate,f)}confirmPasswordReset(f,_){return function Id(y,h,f){return Da.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var T=this;return(0,g.Z)(function*(){return ei(T._delegate,function Kc(y,h,f){return Ta.apply(this,arguments)}(T._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Yc(y,h){return Ru.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Cf(y,h){return"EMAIL_SIGNIN"===Du.parseLink(h)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){ih(Zg(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function Of(y,h){return Wu.apply(this,arguments)}(f._delegate,qa);return _?ei(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Qd(y,h){pn(y)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,_,T){const{next:M,error:U,complete:W}=Xf(f,_,T);return this._delegate.onAuthStateChanged(M,U,W)}onIdTokenChanged(f,_,T){const{next:M,error:U,complete:W}=Xf(f,_,T);return this._delegate.onIdTokenChanged(M,U,W)}sendSignInLinkToEmail(f,_){return function Ys(y,h,f){return us.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Ng(y,h,f){return xu.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,g.Z)(function*(){let T;switch(function vv(y,h){ic(Object.values(ir).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?ic(h!==ir.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?ic(h===ir.NONE,y,"unsupported-persistence-type"):Zf()?ic(h===ir.NONE||h===ir.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):ic(h===ir.NONE||Kf(),y,"unsupported-persistence-type")}(_._delegate,f),f){case ir.SESSION:T=eo;break;case ir.LOCAL:T=(yield kn(Oa)._isAvailable())?Oa:ds;break;case ir.NONE:T=Lr;break;default:return we("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ei(this._delegate,function Ef(y){return If.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ei(this._delegate,Wr(this._delegate,f))}signInWithCustomToken(f){return ei(this._delegate,function br(y,h){return Kr.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return ei(this._delegate,function Dd(y,h,f){return Wr((0,O.m9)(y),Fn.credential(h,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return ei(this._delegate,function Ht(y,h,f){return qi.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return oc(this._delegate,function Ai(y,h,f){return La.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,g.Z)(function*(){return ih(Zg(),_._delegate,"operation-not-supported-in-this-environment"),ei(_._delegate,function $u(y,h,f){return Rn.apply(this,arguments)}(_._delegate,f,qa))})()}signInWithRedirect(f){var _=this;return(0,g.Z)(function*(){return ih(Zg(),_._delegate,"operation-not-supported-in-this-environment"),yield na(_._delegate),function Ha(y,h,f){return function jd(y,h,f){return hs.apply(this,arguments)}(y,h,f)}(_._delegate,f,qa)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Wc(y,h){return ba.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ir,y})();function Xf(y,h,f){let _=y;"function"!=typeof y&&({next:_,error:h,complete:f}=y);const T=_;return{next:U=>T(U&&js.getOrCreate(U)),error:h,complete:f}}function vw(y,h){const f=function sc(y,h){const f=ra();if(!f)return[];const _=V(Yg,y,h);switch(f.getItem(_)){case ir.NONE:return[Lr];case ir.LOCAL:return[Oa,eo];case ir.SESSION:return[eo];default:return[]}}(y,h);if(typeof self<"u"&&!f.includes(Oa)&&f.push(Oa),typeof window<"u")for(const _ of[ds,eo])f.includes(_)||f.push(_);return f.includes(Lr)||f.push(Lr),f}class Iv{constructor(){this.providerId="phone",this._delegate=new mn(nh(J.Z.auth()))}static credential(h,f){return mn.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Iv.PHONE_SIGN_IN_METHOD=mn.PHONE_SIGN_IN_METHOD,Iv.PROVIDER_ID=mn.PROVIDER_ID;const CC=te;class bC{constructor(h,f,_=J.Z.app()){var T;CC(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Fa(h,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _w(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Ev(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fn,FacebookAuthProvider:zr,GithubAuthProvider:bu,GoogleAuthProvider:Hc,OAuthProvider:ci,SAMLAuthProvider:os,PhoneAuthProvider:Iv,PhoneMultiFactorGenerator:IC,RecaptchaVerifier:bC,TwitterAuthProvider:md,Auth:Ev,AuthCredential:rs,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.1")}(J.Z)},5861:(dt,Se,F)=>{function g(O,oe,se,he,le,_e,pe){try{var j=O[_e](pe),$=j.value}catch(q){return void se(q)}j.done?oe($):Promise.resolve($).then(he,le)}function J(O){return function(){var oe=this,se=arguments;return new Promise(function(he,le){var _e=O.apply(oe,se);function pe($){g(_e,he,le,pe,j,"next",$)}function j($){g(_e,he,le,pe,j,"throw",$)}pe(void 0)})}}F.d(Se,{Z:()=>J})}},dt=>{dt(dt.s=8219)}]);